{"version":3,"sources":["webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/@babel/runtime/helpers/createSuper.js","webpack:///./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./src/agents/acteur/index.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./src/views/Sma.vue?746e","webpack:///./src/agents/HelloAgent.js","webpack:///./src/agents/SnifferAgent.js","webpack:///./src/agents/SubscribeAgent.js","webpack:///src/views/Sma.vue","webpack:///./src/views/Sma.vue?245a","webpack:///./src/views/Sma.vue","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./src/agents/agent/index.js","webpack:///./node_modules/evejs/dist/eve.custom-request.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/core-js/modules/es.reflect.to-string-tag.js","webpack:///./src/agents/environnement/index.js"],"names":["global","uncurryThis","aCallable","isObject","hasOwn","arraySlice","Function","concat","join","factories","construct","C","argsLength","args","list","i","module","exports","bind","that","F","this","Prototype","prototype","partArgs","arguments","boundFunction","length","apply","PROPER_FUNCTION_NAME","PROPER","redefine","anObject","isPrototypeOf","$toString","fails","regExpFlags","TO_STRING","RegExpPrototype","RegExp","n$ToString","getFlags","NOT_GENERIC","call","source","flags","INCORRECT_NAME","name","R","p","rf","f","undefined","unsafe","getPrototypeOf","require","isNativeReflectConstruct","possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","constructor","Reflect","__esModule","$","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","target","stat","forced","sham","it","_getPrototypeOf","o","Object","setPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","Agent","Board","options","console","log","data","_setPrototypeOf","getBuiltIn","aConstructor","create","nativeConstruct","ObjectPrototype","push","NEW_TARGET_BUG","ARGS_BUG","FORCED","Target","newTarget","$args","proto","instance","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","Constructor","protoProps","staticProps","render","_vm","_h","$createElement","_c","_self","_v","on","boardTest","_l","a","id","_s","JSON","stringify","staticRenderFns","HelloAgent","eve","extend","count","connect","transports","getAll","sayHello","to","send","receive","from","message","indexOf","SnifferAgent","SubscribeAgent","url","type","Vue","$getResources","resources","$subscribe","created","agent1","agent2","sniffer1","subscribe1","request","reply","file","env","board","print","acteur","fictif","agents","methods","watch","computed","$store","state","sma","component","_typeof","assertThisInitialized","_possibleConstructorReturn","TypeError","_isNativeReflectConstruct","Proxy","Boolean","valueOf","e","obj","Symbol","iterator","_classCallCheck","uuidv4","v4","schema","Date","now","debug","window","pushAgent","save","text","str","callback","setTimeout","alert","define","r","n","t","c","u","Error","code","1","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","Item","array","noop","nextTick","Array","title","browser","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","2","root","freeExports","nodeType","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","error","RangeError","map","fn","mapDomain","string","parts","split","replace","labels","encoded","ucs2decode","value","extra","output","counter","charCodeAt","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","out","basic","j","index","oldi","w","baseMinusT","inputLength","bias","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","test","slice","toLowerCase","toASCII","amd","hasOwnProperty","3","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","v","x","idx","substr","decodeURIComponent","isArray","xs","toString","4","stringifyPrimitive","isFinite","objectKeys","ks","encodeURIComponent","res","keys","5","parse","6","util","Url","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","urlParse","resolve","urlResolve","resolveObject","urlResolveObject","format","urlFormat","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","isString","relative","queryIndex","splitter","uSplit","slashRegex","rest","trim","simplePath","exec","lowerProto","match","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","l","part","newpart","validParts","notHost","bit","unshift","h","ae","esc","escape","qm","s","charAt","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","isAbsolute","7","arg","8","rawAsap","freeTasks","pendingErrors","requestErrorThrow","makeRequestCallFromTimer","throwFirstError","asap","task","rawTask","RawTask","onerror","9","requestFlush","capacity","flush","currentIndex","scan","newLength","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromMutationObserver","toggle","observer","node","document","createTextNode","observe","characterData","timeoutHandle","handleTimer","intervalHandle","setInterval","clearInterval","10","isValue","isPlainFunction","assign","normalizeOpts","contains","d","dscr","desc","gs","get","set","11","useColors","__nwjs","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","$1","formatArgs","namespace","humanize","diff","color","lastC","namespaces","storage","setItem","removeItem","load","getItem","DEBUG","localstorage","localStorage","destroy","warned","warn","colors","formatters","12","setup","selectColor","createDebug","abs","prevTime","namespacesCache","enabledCache","enableOverride","enabled","curr","Number","ms","prev","coerce","formatter","val","logFn","init","newDebug","enable","names","skips","disable","toNamespace","substring","stack","default","forEach","13","14","15","foo","bar","trzy","16","max","dest","src","17","objPropertyIsEnumerable","propertyIsEnumerable","18","_undefined","19","20","21","object","22","opts1","23","24","25","26","27","searchString","28","ServiceManager","TransportManager","RequestModule","transport","LocalTransport","registerType","system","add","getTransportById","registerModule","29","Promise","uuid","URL","connections","defaultConnection","ready","_getModuleConstructor","modules","sort","b","mixin","me","loadModule","additionalOptions","_options","_receive","colon","_sendByProtocol","at","_to","_transportId","_sendByTransportId","conn","reject","_sendByNetworkId","networkId","connection","transportId","oobParams","getUrls","getMyUrl","getUrlByProtocol","_transport","_connect","_updateReady","disconnect","_disconnect","close","all","30","seed","hypertimer","KNOWN_PROPERTIES","timer","random","config","clear","deterministic","31","types","unload","getByType","32","TIMEOUT","agent","receiveOriginal","envelope","response","isPromise","then","catch","err","33","Connection","34","Transport","35","LocalConnection","queryParams","36","37","normalizeURL","38","isEmpty","__ee__","39","descriptors","callable","defineProperties","listener","__eeOnceListener__","candidate","40","41","42","Debug","43","emitter","hasListeners","createMaster","createSlave","TYPE","INTERVAL","TRIGGER","paced","rate","configuredTime","master","running","startTime","hyperTime","systemNow","timeouts","current","timeoutId","idSeq","server","client","_getConfig","time","_validateConfig","_setConfig","toTimestamp","_rescheduleIntervals","toISOString","newRate","isNaN","applyConfig","_schedule","broadcastConfig","_rescheduleInterval","occurrence","round","interval","_queueTimeout","_execTimeout","finish","_getExpiredTimeouts","expired","shuffle","next","delay","realDelay","onTimeout","date","realInterval","hyperInterval","pause","getTime","timestamp","setTrigger","_interval","_firstTime","_time","clearTrigger","continue","44","WebSocket","45","Server","sanitizedConfig","ws","_emitter","broadcast","event","clients","46","DELAY","REPEAT","slave","isFirst","isDestroyed","syncTimer","sync","getLatencyAndWait","getLatency","latency","wait","repeat","latencies","limit","median","std","filtered","mean","start","end","onopen","47","eventEmitter","socket","getId","onmessage","readyState","OPEN","CONNECTING","_id","48","compare","sum","arr","reduce","sqrt","variance","_mean","pow","sorted","49","times","results","recurse","whilst","condition","50","51","52","y","parseFloat","fmtShort","msAbs","fmtLong","plural","isPlural","long","53","54","LAST_ERROR","IS_ERROR","getThen","ex","tryCallOne","tryCallTwo","_U","_V","_W","_X","doResolve","safeThen","onFulfilled","onRejected","handle","Handler","deferred","_Y","handleResolved","cb","ret","promise","newValue","finale","_Z","done","reason","_0","55","56","TRUE","valuePromise","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","iterableToArray","iterable","remaining","race","values","57","finally","58","59","denodeify","argumentCount","Infinity","denodeifyWithCount","denodeifyWithoutCount","callbackFn","body","fnLength","_","nodeify","ctx","60","enableSynchronous","isPending","getState","isFulfilled","isRejected","getValue","getReason","disableSynchronous","61","width","chunks","digits","pool","GLOBAL","startdenom","significance","overflow","mask","oldRandom","ARC4","keylen","S","g","flatten","depth","typ","mixkey","smear","stringseed","tostring","autoseed","crypto","getRandomValues","Uint8Array","plugins","screen","use_entropy","entropy","arc4","resetGlobal","62","isPrototype","63","possibleTypes","64","isFunction","classRe","functionToString","65","66","67","uuidRegex","isUUID","asyncGeneratorStep","gen","_next","_throw","info","_asyncToGenerator","_inherits","subClass","superClass","setToStringTag","Environnement","updateEnv","item","store","dispatch","commit"],"mappings":"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","file":"js/chunk-893c3d5a.84c0c4f9.js","sourcesContent":["'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar arraySlice = require('../internals/array-slice');\n\nvar Function = global.Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar $toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar n$ToString = RegExpPrototype[TO_STRING];\nvar getFlags = uncurryThis(regExpFlags);\n\nvar NOT_GENERIC = fails(function () { return n$ToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = PROPER_FUNCTION_NAME && n$ToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = $toString(R.source);\n    var rf = R.flags;\n    var f = $toString(rf === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype) ? getFlags(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn.js\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}\n\nmodule.exports = _createSuper;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var Agent = require('../agent');\n\n// let schema = {\n//   \"ve:type\": {\"@id\": \"ve:tension\"},\n//   \"ve:wi\" : 'what is ?',\n//   \"ve:wsb\": 'test in root and in properties',\n//   \"ve:proposition\": '',\n// }\n\n// let props = [\n//   {\"name\": 've:pod', \"value\": null},\n//   // {\"name\": 've:wsb', \"value\": \"What should be in prop ?\"},\n//   // {\"name\": 've:proposition', \"value\": \"What is in prop ?\"},\n// ]\n\nclass Board extends Agent {\n\n  constructor(options){\n    super(options); // this is required\n    // this.data = Object.assign(this.data, schema);\n    //this.data['ve:properties'] = Object.assign(this.data['ve:properties'], props);\n    console.log(this.data);\n  }\n\n}\nmodule.exports = Board;\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind');\nvar aConstructor = require('../internals/a-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" sma\"),_c('br'),_c('b-button',{on:{\"click\":_vm.boardTest}},[_vm._v(\"boardTest\")]),_vm._v(\" Agents : \"),_c('ul',_vm._l((_vm.agents),function(a){return _c('li',{key:a.id},[_vm._v(\" \"+_vm._s(JSON.stringify(a, null, 2))+\" \")])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// var eve = require('evejs');\nimport * as eve from  'evejs/dist/eve.custom-request.js';\n\nexport function HelloAgent(id) {\n  // execute super constructor\n  eve.Agent.call(this, id);\n  // extend the agent with support for requests\n  this.extend('request');\n  // alternatively, the request module can be loaded in a separate namespace\n  // instead of extending the agent itself:\n  //   this.request = this.loadModule('request');\n  //   this.request.request(...)\n  this.count = 0\n\n  // connect to all transports configured by the system\n  this.connect(eve.system.transports.getAll());\n}\n\n// extend the eve.Agent prototype\nHelloAgent.prototype = Object.create(eve.Agent.prototype);\nHelloAgent.prototype.constructor = HelloAgent;\n\nHelloAgent.prototype.sayHello = function(to) {\n  this.send(to, 'Hello ' + to + '!');\n};\n\nHelloAgent.prototype.receive = function(from, message) {\n  console.log(from + ' said: ' + JSON.stringify(message));\n  // document.write(from + ' said: ' + JSON.stringify(message) + '<br>');\n\n  if (typeof message == \"string\" && message.indexOf('Hello') === 0) {\n    // reply to the greeting\n    this.send(from, 'Hi ' + from + ', nice to meet you!');\n    // return value is send back as reply in case of a request\n    return 'Hi ' + from + ', Here is the answer of your request!';\n  }\n  // else{\n  //   if(this.count <10)\n  //   {\n  //     this.count ++\n  //     this.send(from, 'Hi ' + from + 'my count is '+this.count );\n  //   }\n  // }\n};\n","// var eve = require('evejs');\nimport Vue from 'vue'\nimport * as eve from  'evejs/dist/eve.custom-request.js';\n\nexport function SnifferAgent(id) {\n  // execute super constructor\n  eve.Agent.call(this, id);\n  this.extend('request');\n  this.count = 0\n\n  // connect to all transports configured by the system\n  this.connect(eve.system.transports.getAll());\n}\n\n// extend the eve.Agent prototype\nSnifferAgent.prototype = Object.create(eve.Agent.prototype);\nSnifferAgent.prototype.constructor = SnifferAgent;\n\nSnifferAgent.prototype.sayHello = function(to) {\n  this.send(to, 'Hello ' + to + '!');\n};\n\nSnifferAgent.prototype.receive = async function(from, message) {\n  console.log(\"SNIFFER : \"+from + ' said: ' + JSON.stringify(message));\n  // document.write(from + ' said: ' + JSON.stringify(message) + '<br>');\n  let url = message.url\n  if (message.type == \"request\"){\n    url = message.message.url\n  }\n  let resources = await Vue.prototype.$getResources(url)\n  console.log(\"$getResources\", resources)\n  return {resources: resources};\n  //return {resources: resources}\n  // for (const r of resources){\n  //   console.log(r)\n  //   if (r.type == \"folder\"){\n  //     r.resources = await Vue.prototype.$getResources(r.url)\n  //   }\n  // }\n  //let resources = await getResources(message)\n  //if (message.indexOf('Hello') === 0) {\n  // reply to the greeting\n  //  this.send(from, {resources: resources});\n\n  // }else{\n  //   if(this.count <10)\n  //   {\n  //     this.count ++\n  //     this.send(from, 'Hi ' + from + 'my count is '+this.count );\n  //   }\n  // }\n};\n\n// async function getResources(r){\n//   r.resources = await Vue.prototype.$getResources(r.url)\n//   for (const (i, res) in r.resources){\n//     let res  = r.resources[i]\n//\n//     if (res.type == \"folder\"){\n//       console.log(res.url)\n//       res.resources = await getResources(res)\n//     }\n//   }\n//   console.log(r)\n//   return r\n//\n// }\n","// var eve = require('evejs');\nimport Vue from 'vue'\nimport * as eve from  'evejs/dist/eve.custom-request.js';\n\nexport function SubscribeAgent(id) {\n  // execute super constructor\n  eve.Agent.call(this, id);\n//  this.extend('request');\n  this.count = 0\n\n  // connect to all transports configured by the system\n  this.connect(eve.system.transports.getAll());\n}\n\n// extend the eve.Agent prototype\nSubscribeAgent.prototype = Object.create(eve.Agent.prototype);\nSubscribeAgent.prototype.constructor = SubscribeAgent;\n\nSubscribeAgent.prototype.sayHello = function(to) {\n  this.send(to, 'Hello ' + to + '!');\n};\n\nSubscribeAgent.prototype.receive = async function(from, message) {\n  //https://github.com/solid/node-solid-server/issues/933\n//  console.log(\"SubscribeAgent : \"+from + ' said: ' + JSON.stringify(message));\n  // document.write(from + ' said: ' + JSON.stringify(message) + '<br>');\n  // let url = message.url\n  // if (message.type == \"request\"){\n  //   url = message.message.url\n  // }\n  console.log(\"SubscribeAgent\",message.url)\n   await Vue.prototype.$subscribe(message.url)\n  //console.log(\"subscribe retour\", retour)\n//  return {retour: retour};\n  //return {resources: resources}\n  // for (const r of resources){\n  //   console.log(r)\n  //   if (r.type == \"folder\"){\n  //     r.resources = await Vue.prototype.$getResources(r.url)\n  //   }\n  // }\n  //let resources = await getResources(message)\n  //if (message.indexOf('Hello') === 0) {\n  // reply to the greeting\n  //  this.send(from, {resources: resources});\n\n  // }else{\n  //   if(this.count <10)\n  //   {\n  //     this.count ++\n  //     this.send(from, 'Hi ' + from + 'my count is '+this.count );\n  //   }\n  // }\n};\n\n// async function getResources(r){\n//   r.resources = await Vue.prototype.$getResources(r.url)\n//   for (const (i, res) in r.resources){\n//     let res  = r.resources[i]\n//\n//     if (res.type == \"folder\"){\n//       console.log(res.url)\n//       res.resources = await getResources(res)\n//     }\n//   }\n//   console.log(r)\n//   return r\n//\n// }\n","<template>\n  <div>\n    sma<br>\n    <b-button @click=\"boardTest\">boardTest</b-button>\n    Agents :\n    <ul>\n      <li v-for=\"a in agents\" :key=\"a.id\">\n        {{JSON.stringify(a, null, 2)}}\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport * as Environnement from '@/agents/environnement'\nimport * as Acteur from '@/agents/acteur'\nimport * as Board from '@/agents/acteur'\n// import  'evejs/dist/eve.custom-request.js';\n\nimport { HelloAgent } from '@/agents/HelloAgent.js';\nimport { SnifferAgent } from '@/agents/SnifferAgent.js';\nimport { SubscribeAgent } from '@/agents/SubscribeAgent.js';\n\n// import { Observable } from 'object-observer/dist/object-observer.min.js';\n\nexport default {\n  name: \"Sma\",\n  data(){\n    return{\n      // observables: [],\n      url : \"https://agora.solidcommunity.net/public/blackboard/\"\n    }\n\n  },\n  created(){\n    let debut = Date.now()\n    // create two agents\n    this.agent1 = new HelloAgent('agent1');\n    this.agent2 = new HelloAgent('agent2');\n    this.sniffer1 = new SnifferAgent('sniffer1');\n    this.subscribe1 = new SubscribeAgent('subscribe1');\n    console.log(this.agent1)\n    console.log(\"sniffer\",this.sniffer1)\n\n    // send a message to agent1\n    this.agent2.send('agent1', 'Hello agent1!, a basic send');\n\n    // send a request to agent 1, await the response\n    this.agent2.request('agent1', 'Hello agent1! a request')\n    .then(function(reply) {\n      console.log('reply: ' + reply);\n    });\n\n    //  this.agent2.send('sniffer1', 'Hello agent1!, a basic send');\n\n\n    this.agent2.send('subscribe1', {url : this.url})\n    // .then(function(reply) {\n    //   //  let res = JSON.stringify(reply)\n    //   let delay = Date.now() - debut\n    //   console.log('reply FOLDER from subscribe1: ',delay , reply);\n    //   //  console.log(reply.resources[0].url, reply.resources[0].file)\n    //   //  alert('reply from SNIFFR: '+delay+' '+  reply.resources[0].url+ ' '+ JSON.stringify(reply, null, 2));\n    // });\n\n\n//let app = this\n    this.agent2.request('sniffer1', {url : this.url})\n    .then(function(reply) {\n      //  let res = JSON.stringify(reply)\n      let delay = Date.now() - debut\n      console.log('reply from SNIFFR: ',delay , reply);\n      console.log(reply.resources[0].url, reply.resources[0].file)\n\n      // reply.resources.forEach((r) => {\n      //   console.log(\"res\",r)\n      //   app.agent2.send('subscribe1', r)\n      //   // .then(function(reply) {\n      //   //   //  let res = JSON.stringify(reply)\n      //   //   let delay = Date.now() - debut\n      //   //   console.log('reply from subscribe1: ',delay , reply);\n      //   //   //  console.log(reply.resources[0].url, reply.resources[0].file)\n      //   //   //  alert('reply from SNIFFR: '+delay+' '+  reply.resources[0].url+ ' '+ JSON.stringify(reply, null, 2));\n      //   // });\n      //\n      // });\n\n    //  alert('reply from SNIFFR: '+delay+' '+  reply.resources[0].url+ ' '+ JSON.stringify(reply, null, 2));\n    });\n\n    // this.agent2.request('subscribe1', {url : this.url})\n    // .then(function(reply) {\n    //   //  let res = JSON.stringify(reply)\n    //   let delay = Date.now() - debut\n    //   console.log('reply from subscribe1: ',delay , reply);\n    //   //  console.log(reply.resources[0].url, reply.resources[0].file)\n    //   //  alert('reply from SNIFFR: '+delay+' '+  reply.resources[0].url+ ' '+ JSON.stringify(reply, null, 2));\n    // });\n\n\n    this.env = new Environnement({name: \"env\", store: this.$store, type: 'Vue2', vue: this})\n    console.log(this.env)\n    this.board = new Board({name: \"board\"})\n    this.board.print()\n    this.acteur = new Acteur({name: \"user\"})\n\n    this.acteur.print()\n    this.acteur.log(\"yohoho, hello i'm the principal actor!\")\n    let fictif = new Acteur({name: \"fictif 1\"})\n    console.log(\"fictif 1\", fictif)\n    let agents = window.env.getAgents()\n    console.log(agents)\n  },\n  methods:{\n    boardTest(){\n      this.acteur.send(\"board\", {action: \"put\", content: {text: \"hello\", world: \"world\"}})\n      this.acteur.send(\"board\", {action: \"read\"})\n    }\n  },\n  watch:{\n    //     agents(){\n    //       this.observables = []\n    //       this.agents.forEach(agent => {\n    //         let observableAgent = Observable.from(agent);\n    //         this.observables.push(observableAgent)\n    //         observableAgent.observe(changes => {\n    //           changes.forEach(change => {\n    //             console.log(\"CHANGE\", change);\n    //           });\n    //         });\n    //       });\n    // console.log(this.observables)\n    //     }\n  },\n  computed:{\n    agents(){\n      return this.$store.state.sma.agents\n    },\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sma.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sma.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sma.vue?vue&type=template&id=e3016602&\"\nimport script from \"./Sma.vue?vue&type=script&lang=js&\"\nexport * from \"./Sma.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// this.options = agent properties\n// vue lifecycle https://v3.vuejs.org/api/options-lifecycle-hooks.html#beforecreate\n// js object lifecycle https://www.coursera.org/lecture/javascript-jquery-json/javascript-object-life-cycle-4pedI\nconst { v4: uuidv4 } = require('uuid');\n\nlet schema = {\n  \"@context\": {\n    \"@vocab\": \"https://www.w3.org/ns/activitystreams\",\n    \"as\": \"https://www.w3.org/ns/activitystreams\",\n    \"ve\": \"https://scenaristeur.github.io/verse/\",\n    \"@id\": \"id\",\n    \"@type\": \"type\"\n  },\n  \"ve:name\":'',\n  \"type\": \"agent\",\n  \"ve:age\": -1 ,\n  \"ve:properties\": [],\n  \"ve:tags\": ''\n  //  \"ve:privacy\": 'private',\n\n}\n\n\nclass Agent{\n\n  constructor(options = {}){\n    //this.env = window.env || {}\n    this.options = options ;\n    this.id == undefined ? this.id = uuidv4() : \"\"\n    this.name = this.options.name || this.id\n    this.data = schema\n    this.data['as:created'] = Date.now()\n    //  console.log(\"construct\", this.options)\n    if (options.debug == true){this.debug()}\n    //this.send('env',{action:'addAgent', value:this})\n    if(window.env != undefined){\n      window.env.pushAgent(this)\n    }else{\n      console.log(\"can not add to env\", this)\n    }\n\n  }\n  save(data){\n    console.log(\"saving\", data)\n    window.env.save(data)\n  }\n\n  send(to, message){\n    let from = {id: this.id, name: this.name}\n    console.log(\"SEND\",\"from\",from, \"to\",to, message)\n  }\n\n  debug(){\n    console.log(\"--- DEBUG --- props : \",this.options)\n    console.log(\"--- DEBUG --- data : \",this.data)\n  }\n\n  print(){\n    console.log(\"--printing props : \",this.options, this.data)\n  }\n\n  log(text){\n    console.log('-----log--- ',text)\n  }\n\n  async wait (str, callback){\n    let name = this.options.name\n    setTimeout(function() {\n      str+= \" \"+name\n      callback(str);\n    }, 3000);\n  }\n  alert(){\n    alert(JSON.stringify(this.data, null, 2))\n  }\n\n\n}\nmodule.exports = Agent;\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.eve = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],2:[function(require,module,exports){\n(function (global){(function (){\n/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this)}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],3:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n},{}],4:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n},{\"./decode\":3,\"./encode\":4}],6:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n},{\"./util\":7,\"punycode\":2,\"querystring\":5}],7:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = require(\"./raw\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n\n},{\"./raw\":9}],9:[function(require,module,exports){\n(function (global){(function (){\n\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n}).call(this)}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],10:[function(require,module,exports){\n\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\n},{\"es5-ext/object/assign\":14,\"es5-ext/object/normalize-options\":22,\"es5-ext/string/#/contains\":25,\"type/plain-function/is\":64,\"type/value/is\":66}],11:[function(require,module,exports){\n(function (process){(function (){\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n\n}).call(this)}).call(this,require('_process'))\n},{\"./common\":12,\"_process\":1}],12:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n\n},{\"ms\":52}],13:[function(require,module,exports){\n\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n\n},{}],14:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n\n},{\"./is-implemented\":15,\"./shim\":16}],15:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n\n},{}],16:[function(require,module,exports){\n\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n\n},{\"../keys\":19,\"../valid-value\":24}],17:[function(require,module,exports){\n\"use strict\";\n\nvar value                   = require(\"./valid-value\")\n  , objPropertyIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nmodule.exports = function (obj) {\n\tvar i;\n\tvalue(obj);\n\tfor (i in obj) {\n\t\t// Jslint: ignore\n\t\tif (objPropertyIsEnumerable.call(obj, i)) return false;\n\t}\n\treturn true;\n};\n\n},{\"./valid-value\":24}],18:[function(require,module,exports){\n\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n\n},{\"../function/noop\":13}],19:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n\n},{\"./is-implemented\":20,\"./shim\":21}],20:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\n},{}],21:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n\n},{\"../is-value\":18}],22:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n\n},{\"./is-value\":18}],23:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\n},{}],24:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n\n},{\"./is-value\":18}],25:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n\n},{\"./is-implemented\":26,\"./shim\":27}],26:[function(require,module,exports){\n\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n\n},{}],27:[function(require,module,exports){\n\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n\n},{}],28:[function(require,module,exports){\nexports.Agent = require('./lib/Agent');\nexports.ServiceManager = require('./lib/ServiceManager');\nexports.TransportManager = require('./lib/TransportManager');\nvar RequestModule = require('./lib/module/RequestModule');\n\n\nexports.transport = {\n  LocalTransport:     require('./lib/transport/local/LocalTransport')\n};\n\nexports.TransportManager.registerType(exports.transport.LocalTransport);\n\n// load the default ServiceManager, a singleton, initialized with a LocalTransport\nexports.system = new exports.ServiceManager();\nexports.system.transports.add(new exports.transport.LocalTransport());\n\n// override Agent.getTransportById in order to support Agent.connect(transportId)\nexports.Agent.getTransportById = function (id) {\n  return exports.system.transports.get(id);\n};\n\nexports.Agent.registerModule(RequestModule);\n\n},{\"./lib/Agent\":29,\"./lib/ServiceManager\":30,\"./lib/TransportManager\":31,\"./lib/module/RequestModule\":32,\"./lib/transport/local/LocalTransport\":36}],29:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('promise');\nvar uuid = require('uuid-v4');\nvar util = require('./util');\nvar URL = require('url');\n\n/**\n * Agent\n * @param {string} [id]         Id for the agent. If not provided, the agent\n *                              will be given a uuid.\n * @constructor\n */\nfunction Agent(id) {\n  this.id = id ? id.toString() : uuid();\n\n  // a list with all connected transports\n  this.connections = [];\n  this.defaultConnection = null;\n  this.ready = Promise.resolve([]);\n}\n\n// an object with modules which can be used to extend the agent\nAgent.modules = {};\n\n/**\n * Register a new type of module. This module can then be loaded via\n * Agent.extend() and Agent.loadModule().\n * @param {Function} constructor     A module constructor\n */\nAgent.registerModule = function (constructor) {\n  var type = constructor.prototype.type;\n  if (typeof constructor !== 'function') {\n    throw new Error('Constructor function expected');\n  }\n  if (!type) {\n    throw new Error('Field \"prototype.type\" missing in transport constructor');\n  }\n  if (type in Agent.modules) {\n    if (Agent.modules[type] !== constructor) {\n      throw new Error('Module of type \"' + type + '\" already exists');\n    }\n  }\n\n  Agent.modules[type] = constructor;\n};\n\n/**\n * Get a transport by id.\n * This static method can be overloaded for example by the get function of\n * a singleton TransportManager.\n * @param {string} id\n * @return {Transport}\n */\nAgent.getTransportById = function (id) {\n  throw new Error('Transport with id \"' + id + '\" not found');\n};\n\n/**\n * Extend an agent with modules (mixins).\n * The modules new functions are added to the Agent itself.\n * See also function `loadModule`.\n * @param {string | string[]} module  A module name or an Array with module\n *                                    names. Available modules:\n *                                    'pattern', 'request', 'babble'\n * @param {Object} [options]          Additional options for loading the module\n * @return {Agent} Returns the agent itself\n */\nAgent.prototype.extend = function (module, options) {\n  if (Array.isArray(module)) {\n    var modules = [].concat(module);\n\n    // order the modules such that 'pattern' comes first, this module must be\n    // loaded before other modules ('request' specifically)\n    modules.sort(function (a, b) {\n      if (a == 'pattern') return -1;\n      if (b == 'pattern') return 1;\n      return 0;\n    });\n\n    // an array with module names\n    for (var i = 0; i < modules.length; i++) {\n      this.extend(modules[i], options)\n    }\n  }\n  else {\n    // a single module name\n    var constructor = _getModuleConstructor(module);\n    var instance = new constructor(this, options);\n    var mixin = instance.mixin();\n\n    // check for conflicts in the modules mixin functions\n    var me = this;\n    Object.keys(mixin).forEach(function (name) {\n      if (me[name] !== undefined && name !== '_receive') {\n        throw new Error('Conflict: agent already has a property \"' + prop + '\"');\n      }\n    });\n\n    // extend the agent with all mixin functions provided by the module\n    Object.keys(mixin).forEach(function (name) {\n      me[name] = mixin[name];\n    });\n  }\n\n  return this;\n};\n\n/**\n * Load a module onto an agent.\n * See also function `extend`.\n * @param {string | string[]} module  A module name or an Array with module\n *                                    names. Available modules:\n *                                    'pattern', 'request', 'babble'\n * @param {Object} [options]          Additional options for loading the module\n * @return {Object} Returns the created module\n */\nAgent.prototype.loadModule = function (module, options, additionalOptions) {\n  var _options = options !== undefined ? Object.create(options) : {};\n  _options.extend = false;\n\n  var constructor = _getModuleConstructor(module);\n  var instance = new constructor(this, options, additionalOptions);\n  var mixin = instance.mixin();\n\n  // only replace the _receive function, do not add other mixin functions\n  this._receive = mixin._receive;\n\n  return instance;\n};\n\n/**\n * Get a module constructor by it's name.\n * Throws an error when the module is not found.\n * @param {string} name\n * @return {function} Returns the modules constructor function\n * @private\n */\nfunction _getModuleConstructor(name) {\n  var constructor = Agent.modules[name];\n  if (!constructor) {\n    throw new Error('Unknown module \"' + name + '\". ' +\n      'Choose from: ' + Object.keys(Agent.modules).map(JSON.stringify).join(', '));\n  }\n  return constructor;\n}\n\n/**\n * Send a message to an agent\n * @param {string} to\n *              to is either:\n *              - A string \"agentId\", the id of the recipient. Will be send\n *                via the default transport or when there is no default\n *                transport via the first connected transport.\n *              - A string \"agentId@transportId\" Only usable locally, not\n *                for sharing an address with remote agents.\n *              - A string \"protocol://networkId/agentId\". This is a sharable\n *                identifier for an agent.\n * @param {*} message  Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n */\nAgent.prototype.send = function (to, message) {\n\n  var colon = to.indexOf(':');\n  if (colon !== -1) {\n    var url = URL.parse(to);\n\n    //TODO: Fix this for protocols that use networkId instead of host (Needs to be fixed in the protocol itself.)\n    return this._sendByProtocol(url.protocol.slice(0, -1), to, message);\n  }\n\n  // TODO: deprecate this notation \"agentId@transportId\"?\n  var at = to.indexOf('@');\n  if (at != -1) {\n    // to is an id like \"agentId@transportId\"\n    var _to = to.substring(0, at);\n    var _transportId = to.substring(at + 1);\n    return this._sendByTransportId(_transportId, _to, message);\n  }\n\n  // to is an id like \"agentId\". Send via the default transport\n  var conn = this.defaultConnection;\n  if (conn) {\n    return conn.send(to, message);\n  }\n  else {\n    return Promise.reject(new Error('No transport found'));\n  }\n};\n\n/**\n * Send a transport to an agent given a networkId\n * @param {string} networkId    A network id\n * @param {string} to           An agents id\n * @param {string} message      Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n * @private\n */\nAgent.prototype._sendByNetworkId = function (networkId, to, message) {\n  // TODO: change this.connections to a map with networkId as keys, much faster\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.networkId == networkId) {\n      return connection.send(to, message);\n    }\n  }\n\n  return Promise.reject(new Error('No transport found with networkId \"' + networkId + '\"'));\n};\n\n/**\n * Send a message by a transport by protocol.\n * The message will be send via the first found transport having the specified\n * protocol.\n * @param {string} protocol     A protocol, for example 'http' or 'ws'\n * @param {string} to           An agents id\n * @param {string} message      Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n * @private\n */\nAgent.prototype._sendByProtocol = function (protocol, to, message) {\n\n  // the https addresses also make use of the http protocol.\n  protocol = protocol == 'https' ? 'http' : protocol;\n\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.type == protocol) {\n      return connection.send(to, message);\n    }\n  }\n\n  return Promise.reject(new Error('No transport found for protocol \"' + protocol + '\"'));\n};\n\n/**\n * Send a transport to an agent via a specific transport\n * @param {string} transportId  The configured id of a transport.\n * @param {string} to           An agents id\n * @param {string} message      Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n * @private\n */\nAgent.prototype._sendByTransportId = function (transportId, to, message) {\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.id == transportId) {\n      return connection.send(to, message);\n    }\n  }\n\n  return Promise.reject(new Error('No transport found with id \"' + transportId + '\"'));\n};\n\n/**\n * Receive a message.\n * @param {string} from     Id of sender\n * @param {*} message       Received message, a JSON object (often a string)\n */\nAgent.prototype.receive = function (from, message, oobParams) {\n  // ... to be overloaded\n};\n\n/**\n * The method _receive is overloaded in a cascaded way by modules, and calls\n * the public method Agent.receive at the end of the chain.\n * @param {string} from     Id of sender\n * @param {*} message       Received message, a JSON object (often a string)\n * @param {array} oobParams Optional Out of Band parameters, e.g. query params for http\n * @returns {*} Returns the return value of Agent.receive\n * @private\n */\nAgent.prototype._receive = function (from, message, oobParams) {\n  return this.receive(from, message);\n};\n\nAgent.prototype.getUrls = function () {\n  return this.connections.map(function (connection) {\n    return connection.getMyUrl()\n  });\n};\n\nAgent.prototype.getUrlByProtocol = function (protocol) {\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.type == protocol) {\n      return connection.getMyUrl();\n    }\n  }\n};\n\n/**\n * Connect to a transport. The agent will subscribe itself to\n * messages sent to his id.\n * @param {string | Transport | Transport[] | string[]} transport\n *                                  A Transport instance, or the id of a\n *                                  transport loaded in eve.system.\n * @param {string} [id]             An optional alternative id to be used\n *                                  for the connection. By default, the agents\n *                                  own id is used.\n * @return {Connection | Connection[]}  Returns a connection or, in case of\n *                                      multiple transports, returns an\n *                                      array with connections. The connections\n *                                      have a promise .ready which resolves\n *                                      as soon as the connection is ready for\n *                                      use.\n */\nAgent.prototype.connect = function (transport, id) {\n  if (Array.isArray(transport)) {\n    var me = this;\n    return transport.map(function (_transport) {\n        try {\n          return me._connect(_transport, id);\n        } catch (e) {\n          return {error: e}\n        }\n      }\n    );\n  }\n  else if (typeof transport === 'string') {\n    // get transport by id\n    try {\n      return this._connect(Agent.getTransportById(transport), id);\n    } catch (e) {\n      return {error: e}\n    }\n  }\n  else {\n    // a transport instance\n    try {\n      return this._connect(transport, id);\n    } catch (e) {\n      return {error: e}\n    }\n  }\n};\n\n/**\n * Connect to a transport\n * @param {Transport} transport     A Transport instance\n * @param {string} [id]             An optional alternative id to be used\n *                                  for the connection. By default, the agents\n *                                  own id is used.\n * @return {Connection}             Returns a connection.\n * @private\n */\nAgent.prototype._connect = function (transport, id) {\n  // create a receive function which is bound to the _receive function.\n  // the _receive function can be replaced in by modules in a cascaded way,\n  // and in the end calls this.receive of the agent.\n  // note: we don't do receive = this._receive.bind(this) as the _receive\n  //       function can be overloaded after a connection is made.\n  var me = this;\n  var receive = function (from, message, oobParams) {\n    return me._receive(from, message, oobParams);\n  };\n  var connection = transport.connect(id || this.id, receive);\n  this.connections.push(connection);\n\n  // set or replace the defaultConnection\n  if (!this.defaultConnection) {\n    this.defaultConnection = connection;\n  }\n  else if (transport['default']) {\n    if (this.defaultConnection['default']) {\n      throw new Error('Cannot connect to a second default transport');\n    }\n    this.defaultConnection = connection;\n  }\n\n  this._updateReady();\n\n  return connection;\n};\n\n/**\n * Disconnect from one or multiple transports\n * @param {string | Transport | string[] | Transport[]} [transport]\n *              A transport or an array with transports.\n *              parameter transport can be an instance of a Transport, or the\n *              id of a transport.\n *              When transport is undefined, the agent will be disconnected\n *              from all connected transports.\n */\nAgent.prototype.disconnect = function (transport) {\n  var i, connection;\n\n  if (!transport) {\n    // disconnect all transports\n    while (connection = this.connections[0]) {\n      this._disconnect(connection);\n    }\n  }\n  else if (Array.isArray(transport)) {\n    // an array with transports\n    i = 0;\n    while (i < this.connections.length) {\n      connection = this.connections[i];\n      if (transport.indexOf(connection.transport) !== -1) {\n        this._disconnect(connection);\n      }\n      else {\n        i++;\n      }\n    }\n  }\n  else if (typeof transport === 'string') {\n    // transport by id\n    this.disconnect(Agent.getTransportById(transport));\n  }\n  else {\n    // a single transport\n    for (i = 0; i < this.connections.length; i++) {\n      connection = this.connections[i];\n      if (connection.transport === transport) {\n        this._disconnect(connection);\n        break;\n      }\n    }\n  }\n};\n\n/**\n * Close a connection\n * @param {Connection} connection\n * @private\n */\nAgent.prototype._disconnect = function (connection) {\n  // find the connection\n  var index = this.connections.indexOf(connection);\n  if (index !== -1) {\n    // close the connection\n    connection.close();\n\n    // remove from the list with connections\n    this.connections.splice(index, 1);\n\n    // replace the defaultConnection if needed\n    if (this.defaultConnection === connection) {\n      this.defaultConnection = this.connections[this.connections.length - 1] || null;\n    }\n  }\n\n  this._updateReady();\n};\n\n/**\n * Update the ready state of the agent\n * @private\n */\nAgent.prototype._updateReady = function () {\n  // FIXME: we should not replace with a new Promise,\n  //        we have a problem when this.ready is requested before ready,\n  //        and another connection is opened before ready\n  this.ready = Promise.all(this.connections.map(function (connection) {\n    return connection.ready;\n  }));\n};\n\nmodule.exports = Agent;\n\n},{\"./util\":37,\"promise\":53,\"url\":6,\"uuid-v4\":67}],30:[function(require,module,exports){\n'use strict';\n\nvar seed = require('seed-random');\nvar hypertimer = require('hypertimer');\nvar TransportManager = require('./TransportManager');\n\n// map with known configuration properties\nvar KNOWN_PROPERTIES = {\n  transports: true,\n  timer: true,\n  random: true\n};\n\nfunction ServiceManager(config) {\n  this.transports = new TransportManager();\n\n  this.timer = hypertimer();\n\n  this.random = Math.random;\n\n  this.init(config);\n}\n\n/**\n * Initialize the service manager with services loaded from a configuration\n * object. All current services are unloaded and removed.\n * @param {Object} config\n */\nServiceManager.prototype.init = function (config) {\n  this.transports.clear();\n\n  if (config) {\n    if (config.transports) {\n      this.transports.load(config.transports);\n    }\n\n    if (config.timer) {\n      this.timer.config(config.timer);\n    }\n\n    if (config.random) {\n      if (config.random.deterministic) {\n        var key = config.random.seed || 'random seed';\n        this.random = seed(key, config.random);\n      }\n      else {\n        this.random = Math.random;\n      }\n    }\n\n    for (var prop in config) {\n      if (config.hasOwnProperty(prop) && !KNOWN_PROPERTIES[prop]) {\n        // TODO: should log this warning via a configured logger\n        console.log('WARNING: Unknown configuration option \"' + prop + '\"')\n      }\n    }\n  }\n};\n\n/**\n * Clear all configured services\n */\nServiceManager.prototype.clear = function () {\n  this.transports.clear();\n};\n\nmodule.exports = ServiceManager;\n\n},{\"./TransportManager\":31,\"hypertimer\":40,\"seed-random\":61}],31:[function(require,module,exports){\n'use strict';\n\n/**\n * A manager for loading and finding transports.\n * @param {Array} [config]      Optional array containing configuration objects\n *                             for transports.\n * @constructor\n */\nfunction TransportManager(config) {\n  this.transports = [];\n\n  if (config) {\n    this.load(config);\n  }\n}\n\n// map with all registered types of transports\n// each transport must register itself at the TransportManager using registerType.\nTransportManager.types = {};\n\n/**\n * Register a new type of transport. This transport can then be loaded via\n * configuration.\n * @param {Transport.prototype} constructor     A transport constructor\n */\nTransportManager.registerType = function (constructor) {\n  var type = constructor.prototype.type;\n  if (typeof constructor !== 'function') {\n    throw new Error('Constructor function expected');\n  }\n  if (!type) {\n    throw new Error('Field \"prototype.type\" missing in transport constructor');\n  }\n  if (type in TransportManager.types) {\n    if (TransportManager.types[type] !== constructor) {\n      throw new Error('Transport type \"' + type + '\" already exists');\n    }\n  }\n\n  TransportManager.types[type] = constructor;\n};\n\n/**\n * Add a loaded transport to the manager\n * @param {Transport} transport\n * @return {Transport} returns the transport itself\n */\nTransportManager.prototype.add = function (transport) {\n  this.transports.push(transport);\n  return transport;\n};\n\n/**\n * Load one or multiple transports based on JSON configuration.\n * New transports will be appended to current transports.\n * @param {Object | Array} config\n * @return {Transport | Transport[]} Returns the loaded transport(s)\n */\nTransportManager.prototype.load = function (config) {\n  if (Array.isArray(config)) {\n    return config.map(this.load.bind(this));\n  }\n\n  var type = config.type;\n  if (!type) {\n    throw new Error('Property \"type\" missing');\n  }\n\n  var constructor = TransportManager.types[type];\n  if (!constructor) {\n    throw new Error('Unknown type of transport \"' + type + '\". ' +\n        'Choose from: ' + Object.keys(TransportManager.types).join(','))\n  }\n\n  var transport = new constructor(config);\n  this.transports.push(transport);\n  return transport;\n};\n\n/**\n * Unload a transport.\n * @param {Transport | Transport[] | string | string[]} transport\n *              A Transport instance or the id of a transport, or an Array\n *              with transports or transport ids.\n */\nTransportManager.prototype.unload = function (transport) {\n  var _transport;\n  if (typeof transport === 'string') {\n    _transport = this.get(transport);\n  }\n  else if (Array.isArray(transport)) {\n    for (var i = 0; i < transport.length; i++) {\n      this.unload(transport[i]);\n    }\n  }\n  else {\n    _transport = transport;\n  }\n\n  if (_transport) {\n    _transport.close();\n\n    var index = this.transports.indexOf(_transport);\n    if (index !== -1) {\n      this.transports.splice(index, 1);\n    }\n  }\n};\n\n/**\n * Get a transport by its id. The transport must have been created with an id\n * @param {string} [id] The id of a transport\n * @return {Transport} Returns the transport when found. Throws an error\n *                     when not found.\n */\nTransportManager.prototype.get = function (id) {\n  for (var i = 0; i < this.transports.length; i++) {\n    var transport = this.transports[i];\n    if (transport.id === id) {\n      return transport;\n    }\n  }\n\n  throw new Error('Transport with id \"' + id + '\" not found');\n};\n\n/**\n * Get all transports.\n * @return {Transport[]} Returns an array with all loaded transports.\n */\nTransportManager.prototype.getAll = function () {\n  return this.transports.concat([]);\n};\n\n/**\n * Find transports by type.\n * @param {string} [type]   Type of the transport. Choose from 'amqp',\n *                          'distribus', 'local', 'pubnub'.\n * @return {Transport[]}    When type is defined, the all transports of this\n *                          type are returned. When undefined, all transports\n *                          are returned.\n */\nTransportManager.prototype.getByType = function (type) {\n  if (type) {\n    if (!(type in TransportManager.types)) {\n      throw new Error('Unknown type of transport \"' + type + '\". ' +\n          'Choose from: ' + Object.keys(TransportManager.types).join(','))\n    }\n\n    return this.transports.filter(function (transport) {\n      return transport.type === type;\n    });\n  }\n  else {\n    return [].concat(this.transports);\n  }\n};\n\n/**\n * Close all configured transports and remove them from the manager.\n */\nTransportManager.prototype.clear = function () {\n  this.transports.forEach(function (transport) {\n    transport.close();\n  });\n  this.transports = [];\n};\n\nmodule.exports = TransportManager;\n\n},{}],32:[function(require,module,exports){\n'use strict';\n\nvar uuid = require('uuid-v4');\nvar Promise = require('promise');\nvar util = require('../util');\n\nvar TIMEOUT = 60000; // ms\n\n/**\n * Create a Request module.\n * The module attaches a handler to the agents _receive function.\n * Creates a Request instance with function `request`.\n * @param {Agent} agent\n * @param {Object} [options]   Optional parameters. Can contain properties:\n *                            - timeout: number   A timeout for responses in\n *                                                milliseconds. 60000 ms by\n *                                                default.\n */\nfunction RequestModule(agent, options) {\n  this.agent = agent;\n  this.receiveOriginal = agent._receive;\n  this.timeout = options && options.timeout || TIMEOUT;\n  this.queue = [];\n}\n\nRequestModule.prototype.type = 'request';\n\n/**\n * Event handler, handles incoming messages\n * @param {String} from     Id of the sender\n * @param {*} message\n * @return {boolean} Returns true when a message is handled, else returns false\n */\nRequestModule.prototype.receive = function (from, message, oobParams) {\n  var agent = this.agent;\n\n  if (typeof message === 'object') {\n    var envelope = message;\n\n    // match the request from the id in the response\n    var request = this.queue[envelope.id];\n    if (request) {\n      // remove the request from the queue\n      clearTimeout(request.timeout);\n      delete this.queue[envelope.id];\n\n      // resolve the requests promise with the response message\n      if (envelope.error) {\n        // TODO: turn this into an Error instance again\n        request.reject(new Error(envelope.error));\n      }\n      else {\n        request.resolve(envelope.message);\n      }\n      return true;\n    }\n    else if (message.type == 'request') {\n      try {\n        var response = this.receiveOriginal.call(agent, from, message.message, oobParams);\n        if (util.isPromise(response)) {\n          // wait until the promise resolves\n          response\n              .then(function (result) {\n                agent.send(from, {type: 'request', id: message.id, message: result});\n              })\n              .catch(function (err) {\n                agent.send(from, {type: 'request', id: message.id, error: err.message || err.toString()});\n              });\n        }\n        else {\n          // immediately send a result\n          agent.send(from, {type: 'request', id: message.id, message: response });\n        }\n      }\n      catch (err) {\n        agent.send(from, {type: 'request', id: message.id, error: err.message || err.toString()});\n      }\n    }\n  }\n  else {\n    if (this.receiveOriginal) {\n      this.receiveOriginal.call(agent, from, message, oobParams);\n    }\n  }\n};\n\n/**\n * Send a request\n * @param {string} to   Id of the recipient\n * @param {*} message\n * @returns {Promise.<*, Error>} Returns a promise resolving with the response message\n */\nRequestModule.prototype.request = function (to, message) {\n  var me = this;\n  return new Promise(function (resolve, reject) {\n    // put the data in an envelope with id\n    var id = uuid();\n    var envelope = {\n      type: 'request',\n      id: id,\n      message: message\n    };\n\n    // add the request to the list with requests in progress\n    me.queue[id] = {\n      resolve: resolve,\n      reject: reject,\n      timeout: setTimeout(function () {\n        delete me.queue[id];\n        reject(new Error('Timeout'));\n      }, me.timeout)\n    };\n\n    me.agent.send(to, envelope)\n        .catch(function (err) {\n          reject(err);\n        });\n  });\n};\n\n/**\n * Get a map with mixin functions\n * @return {{_receive: function, request: function}}\n *            Returns mixin function, which can be used to extend the agent.\n */\nRequestModule.prototype.mixin = function () {\n  return {\n    _receive: this.receive.bind(this),\n    request: this.request.bind(this)\n  }\n};\n\nmodule.exports = RequestModule;\n\n},{\"../util\":37,\"promise\":53,\"uuid-v4\":67}],33:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('promise');\n\n/**\n * An abstract Transport connection\n * @param {Transport} transport\n * @param {string} id\n * @param {function} receive\n * @constructor\n * @abstract\n */\nfunction Connection (transport, id, receive) {\n  throw new Error('Cannot create an abstract Connection');\n}\n\nConnection.prototype.ready = Promise.reject(new Error('Cannot get abstract property ready'));\n\n/**\n * Send a message to an agent.\n * @param {string} to\n * @param {*} message\n * @return {Promise} returns a promise which resolves when the message has been sent\n */\nConnection.prototype.send = function (to, message) {\n  throw new Error('Cannot call abstract function send');\n};\n\n/**\n * Close the connection, disconnect from the transport.\n */\nConnection.prototype.close = function () {\n  throw new Error('Cannot call abstract function \"close\"');\n};\n\nConnection.prototype.getMyUrl = function(){\n  return this.transport.type +\":\"+this.id;\n};\n\nmodule.exports = Connection;\n\n},{\"promise\":53}],34:[function(require,module,exports){\n'use strict';\n\n/**\n * Abstract prototype of a transport\n * @param {Object} [config]\n * @constructor\n */\nfunction Transport(config) {\n  this.id = config && config.id || null;\n  this['default'] = config && config['default'] || false;\n}\n\nTransport.prototype.type = null;\n\n/**\n * Connect an agent\n * @param {String} id\n * @param {Function} receive  Invoked as receive(from, message)\n * @return {Connection}       Returns a connection\n */\nTransport.prototype.connect = function(id, receive) {\n  throw new Error('Cannot invoke abstract function \"connect\"');\n};\n\n/**\n * Close the transport\n */\nTransport.prototype.close = function() {\n  throw new Error('Cannot invoke abstract function \"close\"');\n};\n\nmodule.exports = Transport;\n\n},{}],35:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('promise');\nvar Connection = require('../Connection');\n\n/**\n * A local connection.\n * @param {LocalTransport} transport\n * @param {string | number} id\n * @param {function} receive\n * @constructor\n */\nfunction LocalConnection(transport, id, receive) {\n  this.transport = transport;\n  this.id = id;\n\n  // register the agents receive function\n  if (this.id in this.transport.agents) {\n    throw new Error('Agent with id ' + id + ' already exists');\n  }\n  this.transport.agents[this.id] = receive;\n\n  // ready state\n  this.ready = Promise.resolve(this);\n}\n\nLocalConnection.prototype.getMyUrl = function(){\n  return this.transport.type +\":\"+this.id;\n};\n\n/**\n * Send a message to an agent.\n * @param {string} to\n * @param {*} message\n * @return {Promise} returns a promise which resolves when the message has been sent\n */\nLocalConnection.prototype.send = function (to, message) {\n  var query = to.replace(\"local:\",\"\").split(\"?\");\n  var callback = this.transport.agents[query[0]];\n  if (!callback) {\n    return Promise.reject(new Error('Agent with id ' + to + ' not found'));\n  }\n\n  var queryParams = query[1] ? query[1].split(\"&\"):[];\n  // invoke the agents receiver as callback(from, message, queryparameters)\n  callback(\"local:\"+this.id, message, queryParams);\n\n  return Promise.resolve();\n};\n\n/**\n * Close the connection\n */\nLocalConnection.prototype.close = function () {\n  delete this.transport.agents[this.id];\n};\n\nmodule.exports = LocalConnection;\n\n},{\"../Connection\":33,\"promise\":53}],36:[function(require,module,exports){\n'use strict';\n\nvar Transport = require('./../Transport');\nvar LocalConnection = require('./LocalConnection');\n\n/**\n * Create a local transport.\n * @param {Object} config         Config can contain the following properties:\n *                                - `id: string`. Optional\n * @constructor\n */\nfunction LocalTransport(config) {\n  this.id = config && config.id || null;\n  this.networkId = this.id || null;\n  this['default'] = config && config['default'] || false;\n  this.agents = {};\n}\n\nLocalTransport.prototype = new Transport();\n\nLocalTransport.prototype.type = 'local';\n\n/**\n * Connect an agent\n * @param {String} id\n * @param {Function} receive                  Invoked as receive(from, message)\n * @return {LocalConnection} Returns a promise which resolves when\n *                                                connected.\n */\nLocalTransport.prototype.connect = function(id, receive) {\n  return new LocalConnection(this, id, receive);\n};\n\n/**\n * Close the transport. Removes all agent connections.\n */\nLocalTransport.prototype.close = function() {\n  this.agents = {};\n};\n\nmodule.exports = LocalTransport;\n\n},{\"./../Transport\":34,\"./LocalConnection\":35}],37:[function(require,module,exports){\n'use strict';\n\n/**\n * Test whether the provided value is a Promise.\n * A value is marked as a Promise when it is an object containing functions\n * `then` and `catch`.\n * @param {*} value\n * @return {boolean} Returns true when `value` is a Promise\n */\nexports.isPromise = function (value) {\n  return value &&\n      typeof value['then'] === 'function' &&\n      typeof value['catch'] === 'function'\n};\n\n/**\n * Normalize a url. Removes trailing slash\n * @param {string} url\n * @return {string} Returns the normalized url\n */\nexports.normalizeURL = function (url) {\n  if (url[url.length - 1] == '/') {\n    return url.substring(0, url.length - 1);\n  }\n  else {\n    return url;\n  }\n};\n\n},{}],38:[function(require,module,exports){\n'use strict';\n\nvar isEmpty = require('es5-ext/object/is-empty')\n  , value   = require('es5-ext/object/valid-value')\n\n  , hasOwnProperty = Object.prototype.hasOwnProperty;\n\nmodule.exports = function (obj/*, type*/) {\n\tvar type;\n\tvalue(obj);\n\ttype = arguments[1];\n\tif (arguments.length > 1) {\n\t\treturn hasOwnProperty.call(obj, '__ee__') && Boolean(obj.__ee__[type]);\n\t}\n\treturn obj.hasOwnProperty('__ee__') && !isEmpty(obj.__ee__);\n};\n\n},{\"es5-ext/object/is-empty\":17,\"es5-ext/object/valid-value\":24}],39:[function(require,module,exports){\n'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n\n},{\"d\":10,\"es5-ext/object/valid-callable\":23}],40:[function(require,module,exports){\nmodule.exports = require('./lib/hypertimer');\n\n},{\"./lib/hypertimer\":43}],41:[function(require,module,exports){\nmodule.exports = (typeof window === 'undefined' || typeof window.Promise === 'undefined') ?\n    require('promise') :\n    window.Promise;\n\n},{\"promise\":53}],42:[function(require,module,exports){\nvar Debug = typeof window !== 'undefined' ? window.Debug : require('debug');\n\nmodule.exports = Debug || function () {\n  // empty stub when in the browser\n  return function () {};\n};\n\n},{\"debug\":11}],43:[function(require,module,exports){\nvar emitter = require('event-emitter');\nvar hasListeners = require('event-emitter/has-listeners');\nvar createMaster = require('./synchronization/master').createMaster;\nvar createSlave = require('./synchronization/slave').createSlave;\nvar util = require('./util');\n\n// enum for type of timeout\nvar TYPE = {\n  TIMEOUT: 0,\n  INTERVAL: 1,\n  TRIGGER: 2\n};\n\n/**\n * Create a new hypertimer\n * @param {Object} [options]  The following options are available:\n *                            deterministic: boolean\n *                                        If true (default), simultaneous events\n *                                        are executed in a deterministic order.\n *                            paced: boolean\n *                                        Mode for pacing of time. When paced,\n *                                        the time proceeds at a continuous,\n *                                        configurable rate, useful for\n *                                        animation purposes. When unpaced, the\n *                                        time jumps immediately from scheduled\n *                                        event to the next scheduled event.\n *                            rate: number\n *                                        The rate of progress of time with\n *                                        respect to real-time. Rate must be a\n *                                        positive number, and is 1 by default.\n *                                        For example when 2, the time of the\n *                                        hypertimer runs twice as fast as\n *                                        real-time.\n *                                        Only applicable when option paced=true.\n *                            time: number | Date | String\n *                                        Set a simulation time. If not provided,\n *                                        The timer is instantiated with the\n *                                        current system time.\n */\nfunction hypertimer(options) {\n  // options\n  var paced = true;\n  var rate = 1;             // number of milliseconds per milliseconds\n  var deterministic = true; // run simultaneous events in a deterministic order\n  var configuredTime = null;// only used for returning the configured time on .config()\n  var master = null;        // url of master, will run as slave\n  var port = null;          // port to serve as master\n\n  // properties\n  var running = false;              // true when running\n  var startTime = null;             // timestamp. the moment in real-time when hyperTime was set\n  var hyperTime = util.systemNow(); // timestamp. the start time in hyper-time\n  var timeouts = [];                // array with all running timeouts\n  var current = {};                 // the timeouts currently in progress (callback is being executed)\n  var timeoutId = null;             // currently running timer\n  var idSeq = 0;                    // counter for unique timeout id's\n  var server = null;\n  var client = null;\n\n  // exported timer object with public functions and variables\n  // add event-emitter mixin\n  var timer = emitter({});\n\n  /**\n   * Change configuration options of the hypertimer, or retrieve current\n   * configuration.\n   * @param {Object} [options]  The following options are available:\n   *                            deterministic: boolean\n   *                                        If true (default), simultaneous events\n   *                                        are executed in a deterministic order.\n   *                            paced: boolean\n   *                                        Mode for pacing of time. When paced,\n   *                                        the time proceeds at a continuous,\n   *                                        configurable rate, useful for\n   *                                        animation purposes. When unpaced, the\n   *                                        time jumps immediately from scheduled\n   *                                        event to the next scheduled event.\n   *                            rate: number\n   *                                        The rate of progress of time with\n   *                                        respect to real-time. Rate must be a\n   *                                        positive number, and is 1 by default.\n   *                                        For example when 2, the time of the\n   *                                        hypertimer runs twice as fast as\n   *                                        real-time.\n   *                                        Only applicable when option paced=true.\n   *                            time: number | Date | String\n   *                                        Set a simulation time.\n   * @return {Object} Returns the applied configuration\n   */\n  timer.config = function(options) {\n    if (options) {\n      _validateConfig(options);\n      _setConfig(options);\n    }\n\n    // return a copy of the configuration options\n    return _getConfig();\n  };\n\n  /**\n   * Returns the current time of the timer as a number.\n   * See also getTime().\n   * @return {number} The time\n   */\n  timer.now = function () {\n    if (paced) {\n      if (running) {\n        // TODO: implement performance.now() / process.hrtime(time) for high precision calculation of time interval\n        var realInterval = util.systemNow() - startTime;\n        var hyperInterval = realInterval * rate;\n        return hyperTime + hyperInterval;\n      }\n      else {\n        return hyperTime;\n      }\n    }\n    else {\n      return hyperTime;\n    }\n  };\n\n  /**\n   * Continue the timer.\n   */\n  timer['continue'] = function() {\n    startTime = util.systemNow();\n    running = true;\n\n    // reschedule running timeouts\n    _schedule();\n  };\n\n  /**\n   * Pause the timer. The timer can be continued again with `continue()`\n   */\n  timer.pause = function() {\n    hyperTime = timer.now();\n    startTime = null;\n    running = false;\n\n    // reschedule running timeouts (pauses them)\n    _schedule();\n  };\n\n  /**\n   * Returns the current time of the timer as Date.\n   * See also now().\n   * @return {Date} The time\n   */\n  timer.getTime = function() {\n    return new Date(timer.now());\n  };\n\n  /**\n   * Get the value of the hypertimer. This function returns the result of getTime().\n   * @return {Date} current time\n   */\n  timer.valueOf = timer.getTime;\n\n  /**\n   * Return a string representation of the current hyper-time.\n   * @returns {string} String representation\n   */\n  timer.toString = function () {\n    return timer.getTime().toString();\n  };\n\n  /**\n   * Set a timeout, which is triggered when the timeout occurs in hyper-time.\n   * See also setTrigger.\n   * @param {Function} callback   Function executed when delay is exceeded.\n   * @param {number} delay        The delay in milliseconds. When the delay is\n   *                              smaller or equal to zero, the callback is\n   *                              triggered immediately.\n   * @return {number} Returns a timeoutId which can be used to cancel the\n   *                  timeout using clearTimeout().\n   */\n  timer.setTimeout = function(callback, delay) {\n    var id = idSeq++;\n    var timestamp = timer.now() + delay;\n    if (isNaN(timestamp)) {\n      throw new TypeError('delay must be a number');\n    }\n\n    // add a new timeout to the queue\n    _queueTimeout({\n      id: id,\n      type: TYPE.TIMEOUT,\n      time: timestamp,\n      callback: callback\n    });\n\n    // reschedule the timeouts\n    _schedule();\n\n    return id;\n  };\n\n  /**\n   * Set a trigger, which is triggered when the timeout occurs in hyper-time.\n   * See also getTimeout.\n   * @param {Function} callback   Function executed when timeout occurs.\n   * @param {Date | number | string } time\n   *                              An absolute moment in time (Date) when the\n   *                              callback will be triggered. When the date is\n   *                              a Date in the past, the callback is triggered\n   *                              immediately.\n   * @return {number} Returns a triggerId which can be used to cancel the\n   *                  trigger using clearTrigger().\n   */\n  timer.setTrigger = function (callback, time) {\n    var id = idSeq++;\n    var timestamp = toTimestamp(time);\n\n    // add a new timeout to the queue\n    _queueTimeout({\n      id: id,\n      type: TYPE.TRIGGER,\n      time: timestamp,\n      callback: callback\n    });\n\n    // reschedule the timeouts\n    _schedule();\n\n    return id;\n  };\n\n\n  /**\n   * Trigger a callback every interval. Optionally, a start date can be provided\n   * to specify the first time the callback must be triggered.\n   * See also setTimeout and setTrigger.\n   * @param {Function} callback         Function executed when delay is exceeded.\n   * @param {number} interval           Interval in milliseconds. When interval\n   *                                    is smaller than zero or is infinity, the\n   *                                    interval will be set to zero and triggered\n   *                                    with a maximum rate.\n   * @param {Date | number | string} [firstTime]\n   *                                    An absolute moment in time (Date) when the\n   *                                    callback will be triggered the first time.\n   *                                    By default, firstTime = now() + interval.\n   * @return {number} Returns a intervalId which can be used to cancel the\n   *                  trigger using clearInterval().\n   */\n  timer.setInterval = function(callback, interval, firstTime) {\n    var id = idSeq++;\n\n    var _interval = Number(interval);\n    if (isNaN(_interval)) {\n      throw new TypeError('interval must be a number');\n    }\n    if (_interval < 0 || !isFinite(_interval)) {\n      _interval = 0;\n    }\n\n    var _firstTime = (firstTime != undefined) ?\n        toTimestamp(firstTime) :\n        null;\n\n    var now = timer.now();\n    var _time = (_firstTime != null) ? _firstTime : (now + _interval);\n\n    var timeout = {\n      id: id,\n      type: TYPE.INTERVAL,\n      interval: _interval,\n      time: _time,\n      firstTime: _firstTime != null ? _firstTime : _time,\n      occurrence: 0,\n      callback: callback\n    };\n\n    if (_time < now) {\n      // update schedule when in the past\n      _rescheduleInterval(timeout, now);\n    }\n\n    // add a new timeout to the queue\n    _queueTimeout(timeout);\n\n    // reschedule the timeouts\n    _schedule();\n\n    return id;\n  };\n\n  /**\n   * Cancel a timeout\n   * @param {number} timeoutId   The id of a timeout\n   */\n  timer.clearTimeout = function(timeoutId) {\n    // test whether timeout is currently being executed\n    if (current[timeoutId]) {\n      delete current[timeoutId];\n      return;\n    }\n\n    // find the timeout in the queue\n    for (var i = 0; i < timeouts.length; i++) {\n      if (timeouts[i].id === timeoutId) {\n        // remove this timeout from the queue\n        timeouts.splice(i, 1);\n\n        // reschedule timeouts\n        _schedule();\n        break;\n      }\n    }\n  };\n\n  /**\n   * Cancel a trigger\n   * @param {number} triggerId   The id of a trigger\n   */\n  timer.clearTrigger = timer.clearTimeout;\n\n  timer.clearInterval = timer.clearTimeout;\n\n  /**\n   * Returns a list with the id's of all timeouts\n   * @returns {number[]} Timeout id's\n   */\n  timer.list = function () {\n    return timeouts.map(function (timeout) {\n      return timeout.id;\n    });\n  };\n\n  /**\n   * Clear all timeouts\n   */\n  timer.clear = function () {\n    // empty the queue\n    current = {};\n    timeouts = [];\n\n    // reschedule\n    _schedule();\n  };\n\n  /**\n   * Destroy the timer. This will clear all timeouts, and close connections\n   * to a master or to slave timers.\n   */\n  timer.destroy = function () {\n    timer.clear();\n    if (client) client.destroy();\n    if (server) server.destroy();\n  };\n\n  /**\n   * Get the current configuration\n   * @returns {{paced: boolean, rate: number, deterministic: boolean, time: *, master: *}}\n   *                Returns a copy of the current configuration\n   * @private\n   */\n  function _getConfig () {\n    return {\n      paced: paced,\n      rate: rate,\n      deterministic: deterministic,\n      time: configuredTime,\n      master: master,\n      port: port\n    }\n  }\n\n  /**\n   * Validate configuration, depending on the current mode: slave or normal\n   * @param {Object} options\n   * @private\n   */\n  function _validateConfig (options) {\n    // validate writable options\n    if (client || options.master) {\n      // when we are a slave, we can't adjust the config, except for\n      // changing the master url or becoming a master itself (port configured)\n      for (var prop in options) {\n        if (prop !== 'master' && prop !== 'slave') {\n          throw new Error('Cannot apply configuration option \"'  + prop +'\", timer is configured as slave.');\n        }\n      }\n    }\n  }\n\n  /**\n   * Change configuration\n   * @param {{paced: boolean, rate: number, deterministic: boolean, time: *, master: *}} options\n   * @private\n   */\n  function _setConfig(options) {\n    if ('deterministic' in options) {\n      deterministic = options.deterministic ? true : false;\n    }\n\n    if ('paced' in options) {\n      paced = options.paced ? true : false;\n    }\n\n    // important: apply time before rate\n    if ('time' in options) {\n      hyperTime = toTimestamp(options.time);\n      startTime = util.systemNow();\n\n      // update intervals\n      _rescheduleIntervals(hyperTime);\n\n      configuredTime = new Date(hyperTime).toISOString();\n    }\n\n    if ('rate' in options) {\n      var newRate = Number(options.rate);\n      if (isNaN(newRate) || newRate <= 0) {\n        throw new TypeError('Invalid rate ' + JSON.stringify(options.rate) + '. Rate must be a positive number');\n      }\n\n      // important: first get the new hyperTime, then adjust the startTime\n      hyperTime = timer.now();\n      startTime = util.systemNow();\n      rate = newRate;\n    }\n\n    if ('master' in options) {\n      // create a timesync slave, connect to master via a websocket\n      if (client) {\n        client.destroy();\n        client = null;\n      }\n\n      master = options.master;\n      if (options.master != null) {\n        client = createSlave(options.master);\n\n        function applyConfig(config) {\n          var prev = _getConfig();\n          _setConfig(config);\n          var curr = _getConfig();\n          timer.emit('config', curr, prev);\n        }\n\n        client.on('change', function (time)   { applyConfig({time: time}) });\n        client.on('config', function (config) { applyConfig(config) });\n        client.on('error',  function (err)    { timer.emit('error', err) });\n      }\n    }\n\n    // create a master\n    if ('port' in options) {\n      if (server) {\n        server.destroy();\n        server = null;\n      }\n\n      port = options.port;\n      if (options.port) {\n        server = createMaster(timer.now, timer.config, options.port);\n        server.on('error', function (err) { timer.emit('error', err) });\n      }\n    }\n\n    // reschedule running timeouts\n    _schedule();\n\n    if (server) {\n      // broadcast changed config\n      server.broadcastConfig();\n    }\n  }\n\n  /**\n   * Reschedule all intervals after a new time has been set.\n   * @param {number} now\n   * @private\n   */\n  function _rescheduleIntervals(now) {\n    for (var i = 0; i < timeouts.length; i++) {\n      var timeout = timeouts[i];\n      if (timeout.type === TYPE.INTERVAL) {\n        _rescheduleInterval(timeout, now);\n      }\n    }\n  }\n\n  /**\n   * Reschedule the intervals after a new time has been set.\n   * @param {Object} timeout\n   * @param {number} now\n   * @private\n   */\n  function _rescheduleInterval(timeout, now) {\n    timeout.occurrence = Math.round((now - timeout.firstTime) / timeout.interval);\n    timeout.time = timeout.firstTime + timeout.occurrence * timeout.interval;\n  }\n\n  /**\n   * Add a timeout to the queue. After the queue has been changed, the queue\n   * must be rescheduled by executing _reschedule()\n   * @param {{id: number, type: number, time: number, callback: Function}} timeout\n   * @private\n   */\n  function _queueTimeout(timeout) {\n    // insert the new timeout at the right place in the array, sorted by time\n    if (timeouts.length > 0) {\n      var i = timeouts.length - 1;\n      while (i >= 0 && timeouts[i].time > timeout.time) {\n        i--;\n      }\n\n      // insert the new timeout in the queue. Note that the timeout is\n      // inserted *after* existing timeouts with the exact *same* time,\n      // so the order in which they are executed is deterministic\n      timeouts.splice(i + 1, 0, timeout);\n    }\n    else {\n      // queue is empty, append the new timeout\n      timeouts.push(timeout);\n    }\n  }\n\n  /**\n   * Execute a timeout\n   * @param {{id: number, type: number, time: number, callback: function}} timeout\n   * @param {function} [callback]\n   *             The callback is executed when the timeout's callback is\n   *             finished. Called without parameters\n   * @private\n   */\n  function _execTimeout(timeout, callback) {\n    // store the timeout in the queue with timeouts in progress\n    // it can be cleared when a clearTimeout is executed inside the callback\n    current[timeout.id] = timeout;\n\n    function finish() {\n      // in case of an interval we have to reschedule on next cycle\n      // interval must not be cleared while executing the callback\n      if (timeout.type === TYPE.INTERVAL && current[timeout.id]) {\n        timeout.occurrence++;\n        timeout.time = timeout.firstTime + timeout.occurrence * timeout.interval;\n        _queueTimeout(timeout);\n        //console.log('queue timeout', timer.getTime().toISOString(), new Date(timeout.time).toISOString(), timeout.occurrence) // TODO: cleanup\n      }\n\n      // remove the timeout from the queue with timeouts in progress\n      delete current[timeout.id];\n\n      callback && callback();\n    }\n\n    // execute the callback\n    try {\n      if (timeout.callback.length == 0) {\n        // synchronous timeout,  like `timer.setTimeout(function () {...}, delay)`\n        timeout.callback();\n        finish();\n      } else {\n        // asynchronous timeout, like `timer.setTimeout(function (done) {...; done(); }, delay)`\n        timeout.callback(finish);\n      }\n    } catch (err) {\n      // emit or log the error\n      if (hasListeners(timer, 'error')) {\n        timer.emit('error', err);\n      }\n      else {\n        console.log('Error', err);\n      }\n\n      finish();\n    }\n  }\n\n  /**\n   * Remove all timeouts occurring before or on the provided time from the\n   * queue and return them.\n   * @param {number} time    A timestamp\n   * @returns {Array} returns an array containing all expired timeouts\n   * @private\n   */\n  function _getExpiredTimeouts(time) {\n    var i = 0;\n    while (i < timeouts.length && ((timeouts[i].time <= time) || !isFinite(timeouts[i].time))) {\n      i++;\n    }\n    var expired = timeouts.splice(0, i);\n\n    if (deterministic == false) {\n      // the array with expired timeouts is in deterministic order\n      // shuffle them\n      util.shuffle(expired);\n    }\n\n    return expired;\n  }\n\n  /**\n   * Reschedule all queued timeouts\n   * @private\n   */\n  function _schedule() {\n    // do not _schedule when there are timeouts in progress\n    // this can be the case with async timeouts in non-paced mode.\n    // _schedule will be executed again when all async timeouts are finished.\n    if (!paced && Object.keys(current).length > 0) {\n      return;\n    }\n\n    var next = timeouts[0];\n\n    // cancel timer when running\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n\n    if (running && next) {\n      // schedule next timeout\n      var time = next.time;\n      var delay = time - timer.now();\n      var realDelay = paced ? delay / rate : 0;\n\n      function onTimeout() {\n        // when running in non-paced mode, update the hyperTime to\n        // adjust the time of the current event\n        if (!paced) {\n          hyperTime = (time > hyperTime && isFinite(time)) ? time : hyperTime;\n        }\n\n        // grab all expired timeouts from the queue\n        var expired = _getExpiredTimeouts(time);\n        // note: expired.length can never be zero (on every change of the queue, we reschedule)\n\n        // execute all expired timeouts\n        if (paced) {\n          // in paced mode, we fire all timeouts in parallel,\n          // and don't await their completion (they can do async operations)\n          expired.forEach(function (timeout) {\n            _execTimeout(timeout);\n          });\n\n          // schedule the next round\n          _schedule();\n        }\n        else {\n          // in non-paced mode, we execute all expired timeouts serially,\n          // and wait for their completion in order to guarantee deterministic\n          // order of execution\n          function next() {\n            var timeout = expired.shift();\n            if (timeout) {\n              _execTimeout(timeout, next);\n            }\n            else {\n              // schedule the next round\n              _schedule();\n            }\n          }\n          next();\n        }\n      }\n\n      timeoutId = setTimeout(onTimeout, Math.round(realDelay));\n      // Note: Math.round(realDelay) is to defeat a bug in node.js v0.10.30,\n      //       see https://github.com/joyent/node/issues/8065\n    }\n  }\n\n  /**\n   * Convert a Date, number, or ISOString to a number timestamp,\n   * and validate whether it's a valid Date. The number Infinity is also\n   * accepted as a valid timestamp\n   * @param {Date | number | string} date\n   * @return {number} Returns a unix timestamp, a number\n   */\n  function toTimestamp(date) {\n    var value =\n        (typeof date === 'number') ? date :           // number\n        (date instanceof Date)     ? date.valueOf() : // Date\n        new Date(date).valueOf();                     // ISOString, momentjs, ...\n\n    if (isNaN(value)) {\n      throw new TypeError('Invalid date ' + JSON.stringify(date) + '. ' +\n          'Date, number, or ISOString expected');\n    }\n\n    return value;\n  }\n\n  Object.defineProperty(timer, 'running', {\n    get: function () {\n      return running;\n    }\n  });\n\n  timer.config(options);  // apply options\n  timer.continue();       // start the timer\n\n  return timer;\n}\n\nmodule.exports = hypertimer;\n\n},{\"./synchronization/master\":45,\"./synchronization/slave\":46,\"./util\":50,\"event-emitter\":39,\"event-emitter/has-listeners\":38}],44:[function(require,module,exports){\nmodule.exports = (typeof window === 'undefined' || typeof window.WebSocket === 'undefined') ?\n    require('ws') :\n    window.WebSocket;\n\n},{\"ws\":51}],45:[function(require,module,exports){\nvar WebSocket = require('./WebSocket');\nvar emitter = require('./socket-emitter');\nvar debug = require('../debug')('hypertimer:master');\n\nexports.createMaster = function (now, config, port) {\n  var master = new WebSocket.Server({port: port});\n\n  master.on('connection', function (ws) {\n    debug('new connection');\n\n    var _emitter = emitter(ws);\n\n    // ping timesync messages (for the timesync module)\n    _emitter.on('time', function (data, callback) {\n      var time = now();\n      callback(time);\n      debug('send time ' + new Date(time).toISOString());\n    });\n\n    // send the masters config to the new connection\n    var config = sanitizedConfig();\n    debug('send config', config);\n    _emitter.send('config', config);\n\n    ws.emitter = _emitter; // used by broadcast\n  });\n\n  master.broadcast = function (event, data) {\n    debug('broadcast', event, data);\n    master.clients.forEach(function (client) {\n      client.emitter.send(event, data);\n    });\n  };\n\n  master.broadcastConfig = function () {\n    master.broadcast('config', sanitizedConfig());\n  };\n\n  master.destroy = function() {\n    master.close();\n    debug('destroyed');\n  };\n\n  function sanitizedConfig() {\n    var curr = config();\n    delete curr.time;\n    delete curr.master;\n    delete curr.port;\n    return curr;\n  }\n\n  debug('listening at ws://localhost:' + port);\n\n  return master;\n};\n\n},{\"../debug\":42,\"./WebSocket\":44,\"./socket-emitter\":47}],46:[function(require,module,exports){\nvar WebSocket = require('./WebSocket');\nvar Promise = require('../Promise');\nvar debug = require('../debug')('hypertimer:slave');\nvar emitter = require('./socket-emitter');\nvar stat = require('./stat');\nvar util = require('./util');\n\n// TODO: make these constants configurable\nvar INTERVAL = 3600000; // once an hour\nvar DELAY = 1000;       // delay between individual requests\nvar REPEAT = 5;         // number of times to request the time for determining latency\n\nexports.createSlave = function (url) {\n  var ws = new WebSocket(url);\n  var slave = emitter(ws);\n  var isFirst = true;\n  var isDestroyed = false;\n  var syncTimer = null;\n\n  ws.onopen = function () {\n    debug('connected');\n    sync();\n    syncTimer = setInterval(sync, INTERVAL);\n  };\n\n  slave.destroy = function () {\n    isDestroyed = true;\n\n    clearInterval(syncTimer);\n    syncTimer = null;\n\n    ws.close();\n\n    debug('destroyed');\n  };\n\n  /**\n   * Sync with the time of the master. Emits a 'change' message\n   * @private\n   */\n  function sync() {\n    // retrieve latency, then wait 1 sec\n    function getLatencyAndWait() {\n      var result = null;\n\n      if (isDestroyed) {\n        return Promise.resolve(result);\n      }\n\n      return getLatency(slave)\n          .then(function (latency) { result = latency })  // store the retrieved latency\n          .catch(function (err)    { console.log(err) })  // just log failed requests\n          .then(function () { return util.wait(DELAY) })  // wait 1 sec\n          .then(function () { return result});            // return the retrieved latency\n    }\n\n    return util\n        .repeat(getLatencyAndWait, REPEAT)\n        .then(function (all) {\n          debug('latencies', all);\n\n          // filter away failed requests\n          var latencies = all.filter(function (latency) {\n            return latency !== null;\n          });\n\n          // calculate the limit for outliers\n          var limit = stat.median(latencies) + stat.std(latencies);\n\n          // filter away outliers: all latencies largereq than the mean+std\n          var filtered = latencies.filter(function (latency) {\n            return latency < limit;\n          });\n\n          // return the mean latency\n          return (filtered.length > 0) ? stat.mean(filtered) : null;\n        })\n        .then(function (latency) {\n          if (isDestroyed) {\n            return Promise.resolve(null);\n          }\n          else {\n            return slave.request('time').then(function (timestamp) {\n              var time = timestamp + latency;\n              slave.emit('change', time);\n              return time;\n            });\n          }\n        })\n        .catch(function (err) {\n          slave.emit('error', err)\n        });\n  }\n\n  /**\n   * Request the time of the master and calculate the latency from the\n   * roundtrip time\n   * @param {{request: function}} emitter\n   * @returns {Promise.<number | null>} returns the latency\n   * @private\n   */\n  function getLatency(emitter) {\n    var start = Date.now();\n\n    return emitter.request('time')\n        .then(function (timestamp) {\n          var end = Date.now();\n          var latency = (end - start) / 2;\n          var time = timestamp + latency;\n\n          // apply the first ever retrieved offset immediately.\n          if (isFirst) {\n            isFirst = false;\n            emitter.emit('change', time);\n          }\n\n          return latency;\n        })\n  }\n\n  return slave;\n};\n\n\n},{\"../Promise\":41,\"../debug\":42,\"./WebSocket\":44,\"./socket-emitter\":47,\"./stat\":48,\"./util\":49}],47:[function(require,module,exports){\n// Turn a WebSocket in an event emitter.\nvar eventEmitter = require('event-emitter');\nvar Promise = require('./../Promise');\nvar debug = require('../debug')('hypertimer:socket');\n\nvar TIMEOUT = 60000; // ms\n// TODO: make timeout a configuration setting\n\nmodule.exports = function (socket) {\n  var emitter = eventEmitter({\n    socket: socket,\n    send: send,\n    request: request\n  });\n\n  /**\n   * Send an event\n   * @param {string} event\n   * @param {*} data\n   */\n  function send (event, data) {\n    var envelope = {\n      event: event,\n      data: data\n    };\n    debug('send', envelope);\n    socket.send(JSON.stringify(envelope));\n  }\n\n  /**\n   * Request an event, await a response\n   * @param {string} event\n   * @param {*} data\n   * @return {Promise} Returns a promise which resolves with the reply\n   */\n  function request (event, data) {\n    return new Promise(function (resolve, reject) {\n      // put the data in an envelope with id\n      var id = getId();\n      var envelope = {\n        event: event,\n        id: id,\n        data: data\n      };\n\n      // add the request to the list with requests in progress\n      queue[id] = {\n        resolve: resolve,\n        reject: reject,\n        timeout: setTimeout(function () {\n          delete queue[id];\n          reject(new Error('Timeout'));\n        }, TIMEOUT)\n      };\n\n      debug('request', envelope);\n      socket.send(JSON.stringify(envelope));\n    }).catch(function (err) {console.log('ERROR', err)});\n  }\n\n  /**\n   * Event handler, handles incoming messages\n   * @param {Object} event\n   */\n  socket.onmessage = function (event) {\n    var data = event.data;\n    var envelope = JSON.parse(data);\n    debug('receive', envelope);\n\n    // match the request from the id in the response\n    var request = queue[envelope.id];\n    if (request) {\n      // incoming response\n      clearTimeout(request.timeout);\n      delete queue[envelope.id];\n      request.resolve(envelope.data);\n    }\n    else if ('id' in envelope) {\n      // incoming request\n      emitter.emit(envelope.event, envelope.data, function (reply) {\n        var response = {\n          id: envelope.id,\n          data: reply\n        };\n\n        if (socket.readyState === socket.OPEN || socket.readyState === socket.CONNECTING) {\n          debug('reply', response);\n          socket.send(JSON.stringify(response));\n        }\n        else {\n          debug('cancel reply', response, '(socket is closed)');\n        }\n      });\n    }\n    else {\n      // regular incoming message\n      emitter.emit(envelope.event, envelope.data);\n    }\n  };\n\n  var queue = {};   // queue with requests in progress\n\n  // get a unique id (simple counter)\n  function getId () {\n    return _id++;\n  }\n  var _id = 0;\n\n  return emitter;\n};\n\n},{\"../debug\":42,\"./../Promise\":41,\"event-emitter\":39}],48:[function(require,module,exports){\n// basic statistical functions\n\nexports.compare = function (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n};\n\nexports.add = function (a, b) {\n  return a + b;\n};\n\nexports.sum = function (arr) {\n  return arr.reduce(exports.add);\n};\n\nexports.mean = function (arr) {\n  return exports.sum(arr) / arr.length;\n};\n\nexports.std = function (arr) {\n  return Math.sqrt(exports.variance(arr));\n};\n\nexports.variance = function (arr) {\n  if (arr.length < 2) return 0;\n\n  var _mean = exports.mean(arr);\n  return arr\n          .map(function (x) {\n            return Math.pow(x - _mean, 2)\n          })\n          .reduce(exports.add) / (arr.length - 1);\n};\n\nexports.median = function (arr) {\n  if (arr.length < 2) return arr[0];\n\n  var sorted = arr.slice().sort(exports.compare);\n  if (sorted.length % 2 === 0) {\n    // even\n    return (arr[arr.length / 2 - 1] + arr[arr.length / 2]) / 2;\n  }\n  else {\n    // odd\n    return arr[(arr.length - 1) / 2];\n  }\n};\n\n},{}],49:[function(require,module,exports){\nvar Promise = require('../Promise');\n\n/**\n * Resolve a promise after a delay\n * @param {number} delay    A delay in milliseconds\n * @returns {Promise} Resolves after given delay\n */\nexports.wait = function(delay) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, delay);\n  });\n};\n\n/**\n * Repeat a given asynchronous function a number of times\n * @param {function} fn   A function returning a promise\n * @param {number} times\n * @return {Promise}\n */\nexports.repeat = function (fn, times) {\n  return new Promise(function (resolve, reject) {\n    var count = 0;\n    var results = [];\n\n    function recurse() {\n      if (count < times) {\n        count++;\n        fn().then(function (result) {\n          results.push(result);\n          recurse();\n        })\n      }\n      else {\n        resolve(results);\n      }\n    }\n\n    recurse();\n  });\n};\n\n/**\n * Repeat an asynchronous callback function whilst\n * @param {function} condition   A function returning true or false\n * @param {function} callback    A callback returning a Promise\n * @returns {Promise}\n */\nexports.whilst = function (condition, callback) {\n  return new Promise(function (resolve, reject) {\n    function recurse() {\n      if (condition()) {\n        callback().then(function () {\n          recurse()\n        });\n      }\n      else {\n        resolve();\n      }\n    }\n\n    recurse();\n  });\n};\n\n},{\"../Promise\":41}],50:[function(require,module,exports){\n\n/* istanbul ignore else */\nif (typeof Date.now === 'function') {\n  /**\n   * Helper function to get the current time\n   * @return {number} Current time\n   */\n  exports.systemNow = function () {\n    return Date.now();\n  }\n}\nelse {\n  /**\n   * Helper function to get the current time\n   * @return {number} Current time\n   */\n  exports.systemNow = function () {\n    return new Date().valueOf();\n  }\n}\n\n/**\n * Shuffle an array\n *\n * + Jonas Raoni Soares Silva\n * @ http://jsfromhell.com/array/shuffle [v1.0]\n *\n * @param {Array} o   Array to be shuffled\n * @returns {Array}   Returns the shuffled array\n */\nexports.shuffle = function (o){\n  for(var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);\n  return o;\n};\n\n},{}],51:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n\n},{}],52:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n\n},{}],53:[function(require,module,exports){\n'use strict';\n\nmodule.exports = require('./lib')\n\n},{\"./lib\":58}],54:[function(require,module,exports){\n'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._U = 0;\n  this._V = 0;\n  this._W = null;\n  this._X = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._Y = null;\nPromise._Z = null;\nPromise._0 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._V === 3) {\n    self = self._W;\n  }\n  if (Promise._Y) {\n    Promise._Y(self);\n  }\n  if (self._V === 0) {\n    if (self._U === 0) {\n      self._U = 1;\n      self._X = deferred;\n      return;\n    }\n    if (self._U === 1) {\n      self._U = 2;\n      self._X = [self._X, deferred];\n      return;\n    }\n    self._X.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._V === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._V === 1) {\n        resolve(deferred.promise, self._W);\n      } else {\n        reject(deferred.promise, self._W);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._W);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._V = 3;\n      self._W = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._V = 1;\n  self._W = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._V = 2;\n  self._W = newValue;\n  if (Promise._Z) {\n    Promise._Z(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._U === 1) {\n    handle(self, self._X);\n    self._X = null;\n  }\n  if (self._U === 2) {\n    for (var i = 0; i < self._X.length; i++) {\n      handle(self, self._X[i]);\n    }\n    self._X = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n},{\"asap/raw\":9}],55:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype.done = function (onFulfilled, onRejected) {\n  var self = arguments.length ? this.then.apply(this, arguments) : this;\n  self.then(null, function (err) {\n    setTimeout(function () {\n      throw err;\n    }, 0);\n  });\n};\n\n},{\"./core.js\":54}],56:[function(require,module,exports){\n'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._0);\n  p._V = 1;\n  p._W = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nvar iterableToArray = function (iterable) {\n  if (typeof Array.from === 'function') {\n    // ES2015+, iterables exist\n    iterableToArray = Array.from;\n    return Array.from(iterable);\n  }\n\n  // ES5, only arrays and array-likes exist\n  iterableToArray = function (x) { return Array.prototype.slice.call(x); };\n  return Array.prototype.slice.call(iterable);\n}\n\nPromise.all = function (arr) {\n  var args = iterableToArray(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._V === 3) {\n            val = val._W;\n          }\n          if (val._V === 1) return res(i, val._W);\n          if (val._V === 2) reject(val._W);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    iterableToArray(values).forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n},{\"./core.js\":54}],57:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype.finally = function (f) {\n  return this.then(function (value) {\n    return Promise.resolve(f()).then(function () {\n      return value;\n    });\n  }, function (err) {\n    return Promise.resolve(f()).then(function () {\n      throw err;\n    });\n  });\n};\n\n},{\"./core.js\":54}],58:[function(require,module,exports){\n'use strict';\n\nmodule.exports = require('./core.js');\nrequire('./done.js');\nrequire('./finally.js');\nrequire('./es6-extensions.js');\nrequire('./node-extensions.js');\nrequire('./synchronous.js');\n\n},{\"./core.js\":54,\"./done.js\":55,\"./es6-extensions.js\":56,\"./finally.js\":57,\"./node-extensions.js\":59,\"./synchronous.js\":60}],59:[function(require,module,exports){\n'use strict';\n\n// This file contains then/promise specific extensions that are only useful\n// for node.js interop\n\nvar Promise = require('./core.js');\nvar asap = require('asap');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nPromise.denodeify = function (fn, argumentCount) {\n  if (\n    typeof argumentCount === 'number' && argumentCount !== Infinity\n  ) {\n    return denodeifyWithCount(fn, argumentCount);\n  } else {\n    return denodeifyWithoutCount(fn);\n  }\n};\n\nvar callbackFn = (\n  'function (err, res) {' +\n  'if (err) { rj(err); } else { rs(res); }' +\n  '}'\n);\nfunction denodeifyWithCount(fn, argumentCount) {\n  var args = [];\n  for (var i = 0; i < argumentCount; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'return new Promise(function (rs, rj) {',\n    'var res = fn.call(',\n    ['self'].concat(args).concat([callbackFn]).join(','),\n    ');',\n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n  return Function(['Promise', 'fn'], body)(Promise, fn);\n}\nfunction denodeifyWithoutCount(fn) {\n  var fnLength = Math.max(fn.length - 1, 3);\n  var args = [];\n  for (var i = 0; i < fnLength; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'var args;',\n    'var argLength = arguments.length;',\n    'if (arguments.length > ' + fnLength + ') {',\n    'args = new Array(arguments.length + 1);',\n    'for (var i = 0; i < arguments.length; i++) {',\n    'args[i] = arguments[i];',\n    '}',\n    '}',\n    'return new Promise(function (rs, rj) {',\n    'var cb = ' + callbackFn + ';',\n    'var res;',\n    'switch (argLength) {',\n    args.concat(['extra']).map(function (_, index) {\n      return (\n        'case ' + (index) + ':' +\n        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +\n        'break;'\n      );\n    }).join(''),\n    'default:',\n    'args[argLength] = cb;',\n    'res = fn.apply(self, args);',\n    '}',\n    \n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n\n  return Function(\n    ['Promise', 'fn'],\n    body\n  )(Promise, fn);\n}\n\nPromise.nodeify = function (fn) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    var callback =\n      typeof args[args.length - 1] === 'function' ? args.pop() : null;\n    var ctx = this;\n    try {\n      return fn.apply(this, arguments).nodeify(callback, ctx);\n    } catch (ex) {\n      if (callback === null || typeof callback == 'undefined') {\n        return new Promise(function (resolve, reject) {\n          reject(ex);\n        });\n      } else {\n        asap(function () {\n          callback.call(ctx, ex);\n        })\n      }\n    }\n  }\n};\n\nPromise.prototype.nodeify = function (callback, ctx) {\n  if (typeof callback != 'function') return this;\n\n  this.then(function (value) {\n    asap(function () {\n      callback.call(ctx, null, value);\n    });\n  }, function (err) {\n    asap(function () {\n      callback.call(ctx, err);\n    });\n  });\n};\n\n},{\"./core.js\":54,\"asap\":8}],60:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.enableSynchronous = function () {\n  Promise.prototype.isPending = function() {\n    return this.getState() == 0;\n  };\n\n  Promise.prototype.isFulfilled = function() {\n    return this.getState() == 1;\n  };\n\n  Promise.prototype.isRejected = function() {\n    return this.getState() == 2;\n  };\n\n  Promise.prototype.getValue = function () {\n    if (this._V === 3) {\n      return this._W.getValue();\n    }\n\n    if (!this.isFulfilled()) {\n      throw new Error('Cannot get a value of an unfulfilled promise.');\n    }\n\n    return this._W;\n  };\n\n  Promise.prototype.getReason = function () {\n    if (this._V === 3) {\n      return this._W.getReason();\n    }\n\n    if (!this.isRejected()) {\n      throw new Error('Cannot get a rejection reason of a non-rejected promise.');\n    }\n\n    return this._W;\n  };\n\n  Promise.prototype.getState = function () {\n    if (this._V === 3) {\n      return this._W.getState();\n    }\n    if (this._V === -1 || this._V === -2) {\n      return 0;\n    }\n\n    return this._V;\n  };\n};\n\nPromise.disableSynchronous = function() {\n  Promise.prototype.isPending = undefined;\n  Promise.prototype.isFulfilled = undefined;\n  Promise.prototype.isRejected = undefined;\n  Promise.prototype.getValue = undefined;\n  Promise.prototype.getReason = undefined;\n  Promise.prototype.getState = undefined;\n};\n\n},{\"./core.js\":54}],61:[function(require,module,exports){\n(function (global){(function (){\n'use strict';\r\n\r\nvar width = 256;// each RC4 output is 0 <= x < 256\r\nvar chunks = 6;// at least six RC4 outputs for each double\r\nvar digits = 52;// there are 52 significant digits in a double\r\nvar pool = [];// pool: entropy pool starts empty\r\nvar GLOBAL = typeof global === 'undefined' ? window : global;\r\n\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\nvar startdenom = Math.pow(width, chunks),\r\n    significance = Math.pow(2, digits),\r\n    overflow = significance * 2,\r\n    mask = width - 1;\r\n\r\n\r\nvar oldRandom = Math.random;\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\nmodule.exports = function(seed, options) {\r\n  if (options && options.global === true) {\r\n    options.global = false;\r\n    Math.random = module.exports(seed, options);\r\n    options.global = true;\r\n    return Math.random;\r\n  }\r\n  var use_entropy = (options && options.entropy) || false;\r\n  var key = [];\r\n\r\n  // Flatten the seed string or build one from local entropy if needed.\r\n  var shortseed = mixkey(flatten(\r\n    use_entropy ? [seed, tostring(pool)] :\r\n    0 in arguments ? seed : autoseed(), 3), key);\r\n\r\n  // Use the seed to initialize an ARC4 generator.\r\n  var arc4 = new ARC4(key);\r\n\r\n  // Mix the randomness into accumulated entropy.\r\n  mixkey(tostring(arc4.S), pool);\r\n\r\n  // Override Math.random\r\n\r\n  // This function returns a random double in [0, 1) that contains\r\n  // randomness in every bit of the mantissa of the IEEE 754 value.\r\n\r\n  return function() {         // Closure to return a random double:\r\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n        x = 0;                          //   and no 'extra last byte'.\r\n    while (n < significance) {          // Fill up all significant digits by\r\n      n = (n + x) * width;              //   shifting numerator and\r\n      d *= width;                       //   denominator and generating a\r\n      x = arc4.g(1);                    //   new least-significant-byte.\r\n    }\r\n    while (n >= overflow) {             // To avoid rounding up, before adding\r\n      n /= 2;                           //   last byte, shift everything\r\n      d /= 2;                           //   right using integer Math until\r\n      x >>>= 1;                         //   we have exactly the desired bits.\r\n    }\r\n    return (n + x) / d;                 // Form the number within [0, 1).\r\n  };\r\n};\r\n\r\nmodule.exports.resetGlobal = function () {\r\n  Math.random = oldRandom;\r\n};\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n/** @constructor */\r\nfunction ARC4(key) {\r\n  var t, keylen = key.length,\r\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n  // The empty key [] is treated as [0].\r\n  if (!keylen) { key = [keylen++]; }\r\n\r\n  // Set up S using the standard key scheduling algorithm.\r\n  while (i < width) {\r\n    s[i] = i++;\r\n  }\r\n  for (i = 0; i < width; i++) {\r\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n    s[j] = t;\r\n  }\r\n\r\n  // The \"g\" method returns the next (count) outputs as one number.\r\n  (me.g = function(count) {\r\n    // Using instance members instead of closure state nearly doubles speed.\r\n    var t, r = 0,\r\n        i = me.i, j = me.j, s = me.S;\r\n    while (count--) {\r\n      t = s[i = mask & (i + 1)];\r\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n    }\r\n    me.i = i; me.j = j;\r\n    return r;\r\n    // For robust unpredictability discard an initial batch of values.\r\n    // See http://www.rsa.com/rsalabs/node.asp?id=2009\r\n  })(width);\r\n}\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\nfunction flatten(obj, depth) {\r\n  var result = [], typ = (typeof obj)[0], prop;\r\n  if (depth && typ == 'o') {\r\n    for (prop in obj) {\r\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n    }\r\n  }\r\n  return (result.length ? result : typ == 's' ? obj : obj + '\\0');\r\n}\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\nfunction mixkey(seed, key) {\r\n  var stringseed = seed + '', smear, j = 0;\r\n  while (j < stringseed.length) {\r\n    key[mask & j] =\r\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n  }\r\n  return tostring(key);\r\n}\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto if available.\r\n//\r\n/** @param {Uint8Array=} seed */\r\nfunction autoseed(seed) {\r\n  try {\r\n    GLOBAL.crypto.getRandomValues(seed = new Uint8Array(width));\r\n    return tostring(seed);\r\n  } catch (e) {\r\n    return [+new Date, GLOBAL, GLOBAL.navigator && GLOBAL.navigator.plugins,\r\n            GLOBAL.screen, tostring(pool)];\r\n  }\r\n}\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\nfunction tostring(a) {\r\n  return String.fromCharCode.apply(0, a);\r\n}\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to intefere with determinstic PRNG state later,\r\n// seedrandom will not call Math.random on its own again after\r\n// initialization.\r\n//\r\nmixkey(Math.random(), pool);\r\n\n}).call(this)}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],62:[function(require,module,exports){\n\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n\n},{\"../prototype/is\":65}],63:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n\n},{\"../value/is\":66}],64:[function(require,module,exports){\n\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n\n},{\"../function/is\":62}],65:[function(require,module,exports){\n\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n\n},{\"../object/is\":63}],66:[function(require,module,exports){\n\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n\n},{}],67:[function(require,module,exports){\n\nexports = module.exports = function() {\n\tvar ret = '', value;\n\tfor (var i = 0; i < 32; i++) {\n\t\tvalue = exports.random() * 16 | 0;\n\t\t// Insert the hypens\n\t\tif (i > 4 && i < 21 && ! (i % 4)) {\n\t\t\tret += '-';\n\t\t}\n\t\t// Add the next random character\n\t\tret += (\n\t\t\t(i === 12) ? 4 : (\n\t\t\t\t(i === 16) ? (value & 3 | 8) : value\n\t\t\t)\n\t\t).toString(16);\n\t}\n\treturn ret;\n};\n\nvar uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;\nexports.isUUID = function(uuid) {\n\treturn uuidRegex.test(uuid);\n};\n\nexports.random = function() {\n\treturn Math.random();\n};\n\n\n},{}]},{},[28])(28)\n});\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n$({ global: true }, { Reflect: {} });\n\n// Reflect[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-reflect-@@tostringtag\nsetToStringTag(global.Reflect, 'Reflect', true);\n","var Agent = require('../agent');\n\nlet agents = []\n// let schema = {\n//   \"ve:type\": {\"@id\": \"ve:tension\"},\n//   \"ve:wi\" : 'what is ?',\n//   \"ve:wsb\": 'test in root and in properties',\n//   \"ve:proposition\": '',\n// }\n\nlet props = [\n  {\"name\": 've:type', \"value\": \"virtual\"},\n  {\"name\": 've:size', \"value\": \"unlinmited\"},\n  // {\"name\": 've:wsb', \"value\": \"What should be in prop ?\"},\n  // {\"name\": 've:proposition', \"value\": \"What is in prop ?\"},\n]\n\nclass Environnement extends Agent {\n\n  constructor(options){\n    super(options);\n    //window.env = this// this is required\n    // this.data = Object.assign(this.data, schema);\n    this.data['ve:properties'] = Object.assign(this.data['ve:properties'], props);\n    console.log(this.data);\n    window.env = this\n  }\n\n  pushAgent(a){\n    agents.push(a)\n    this.updateEnv()\n  }\n  removeAgentByName(name){\n    agents = agents.filter(x => {return x.name != name})\n    this.updateEnv()\n  }\n  getAgents(){\n    return agents\n  }\n  async save(item){\n    console.log(\"must save item\", item)\n    if(this.options.type.toLowerCase() == \"vue2\"){\n      await this.options.store.dispatch('local/saveItem', item)\n      await this.options.store.dispatch('local/getItems', item)\n    }\n  }\n\n  updateEnv(){\n    if(this.options.type.toLowerCase() == \"vue2\"){\n      this.options.store.commit('sma/setAgents', agents)\n    }\n  }\n\n}\nmodule.exports = Environnement;\n"],"sourceRoot":""}