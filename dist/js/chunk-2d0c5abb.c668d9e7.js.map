{"version":3,"sources":["webpack:///./src/views/tension/Tension.vue?e8ce","webpack:///src/views/tension/Tension.vue","webpack:///./src/views/tension/Tension.vue?d93c","webpack:///./src/views/tension/Tension.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_m","attrs","model","value","item","callback","$$v","$set","expression","_e","ref","text_placeholder","on","$event","inputFocus","tags","autocompleteTagsItems","update","tag","clean","add","_s","items","length","staticRenderFns","name","components","data","debounce","cardActive","share","checked1","methods","init","$store","state","local","currentItem","i","type","dispatch","initForm","console","log","undefined","q","title","wi","wsb","proposition","watch","computed","component"],"mappings":"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","file":"js/chunk-2d0c5abb.c668d9e7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"Tension\")]),_vm._m(0),_c('b-card',[(_vm.cardActive)?_c('b-form-input',{attrs:{\"placeholder\":\"Name\"},model:{value:(_vm.item['ve:name']),callback:function ($$v) {_vm.$set(_vm.item, 've:name', $$v)},expression:\"item['ve:name']\"}}):_vm._e(),_c('b-form-input',{ref:\"title\",attrs:{\"placeholder\":_vm.text_placeholder},on:{\"click\":function($event){_vm.inputFocus=true},\"blur\":function($event){_vm.inputFocus=false}},model:{value:(_vm.item['ve:wi']),callback:function ($$v) {_vm.$set(_vm.item, 've:wi', $$v)},expression:\"item['ve:wi']\"}}),(_vm.cardActive)?_c('b-form-input',{attrs:{\"placeholder\":\"What should be ?\"},model:{value:(_vm.item['ve:wsb']),callback:function ($$v) {_vm.$set(_vm.item, 've:wsb', $$v)},expression:\"item['ve:wsb']\"}}):_vm._e(),(_vm.cardActive)?_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"Your proposition...\",\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.item['ve:proposition']),callback:function ($$v) {_vm.$set(_vm.item, 've:proposition', $$v)},expression:\"item['ve:proposition']\"}}):_vm._e(),(_vm.cardActive)?_c('vue-tags-input',{attrs:{\"tags\":_vm.tags,\"autocomplete-items\":_vm.autocompleteTagsItems},on:{\"tags-changed\":_vm.update},model:{value:(_vm.tag),callback:function ($$v) {_vm.tag=$$v},expression:\"tag\"}}):_vm._e(),(_vm.cardActive)?_c('div',[_vm._v(\" Priority / Age / Status \"),_c('b-form-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.item['ve:age']),callback:function ($$v) {_vm.$set(_vm.item, 've:age', $$v)},expression:\"item['ve:age']\"}})],1):_vm._e(),(_vm.cardActive)?_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"light\"},on:{\"click\":_vm.clean}},[_vm._v(\"Cancel\")]):_vm._e(),(_vm.cardActive)?_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":_vm.add}},[_vm._v(\"Save\")]):_vm._e()],1),_vm._v(\" \"+_vm._s(_vm.items.length)+\" \"),_c('b-row',[_c('Items',{attrs:{\"items\":_vm.items}})],1),_vm._v(\" \"+_vm._s(_vm.items)+\" \")],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" Dans un système basique, chacun doit pouvoir faire remonter ses idées, ou ses problèmes de manière simple. \"),_c('br'),_vm._v(\" La solution envisagée ici est inspirée du système de Tension en holacratie. \"),_c('br'),_c('ul',[_c('li',[_vm._v(\"Un titre\")]),_c('li',[_vm._v(\"Un description de ce qui est à l'heure actuelle.\")]),_c('li',[_vm._v(\"Une description de ce qui devrait être.\")]),_c('li',[_vm._v(\"Une proposition pour passer de ce qui est à ce qui devrait être.\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h3>Tension</h3>\n    <p>\n      Dans un système basique, chacun doit pouvoir faire remonter ses idées, ou ses problèmes de manière simple.\n      <br>\n      La solution envisagée ici est inspirée du système de Tension en holacratie. <br>\n      <ul>\n        <li>Un titre</li>\n        <li>Un description de ce qui est à l'heure actuelle.</li>\n        <li>Une description de ce qui devrait être.</li>\n        <li>Une proposition pour passer de ce qui est à ce qui devrait être.</li>\n      </ul>\n    </p>\n    <b-card>\n      <b-form-input\n      v-if=\"cardActive\"\n      v-model=\"item['ve:name']\"\n      placeholder=\"Name\"\n      ></b-form-input>\n\n      <b-form-input\n      ref=\"title\"\n      v-model=\"item['ve:wi']\"\n      :placeholder=\"text_placeholder\"\n      @click=\"inputFocus=true\"\n      @blur=\"inputFocus=false\"\n      ></b-form-input>\n\n      <b-form-input\n      v-if=\"cardActive\"\n      v-model=\"item['ve:wsb']\"\n      placeholder=\"What should be ?\"\n      ></b-form-input>\n\n      <b-form-textarea\n      id=\"textarea\"\n      v-if=\"cardActive\"\n      v-model=\"item['ve:proposition']\"\n      placeholder=\"Your proposition...\"\n      rows=\"3\"\n      max-rows=\"6\"\n      ></b-form-textarea>\n\n      <vue-tags-input\n      v-if=\"cardActive\"\n      v-model=\"tag\"\n      :tags=\"tags\"\n      :autocomplete-items=\"autocompleteTagsItems\"\n      @tags-changed=\"update\"\n      />\n\n      <div v-if=\"cardActive\">\n        Priority / Age / Status\n        <b-form-input\n        v-model=\"item['ve:age']\"\n        type=\"number\"\n        ></b-form-input>\n      </div>\n\n      <!-- <b-form-input\n      v-if=\"cardActive\"\n      v-model=\"note.tags\"\n      placeholder=\"Tags séparés par une virgule\"\n      ></b-form-input> -->\n\n      <b-button v-if=\"cardActive\" size=\"sm\" variant=\"light\" @click=\"clean\">Cancel</b-button>\n      <b-button v-if=\"cardActive\" variant=\"info\" @click=\"add\">Save</b-button>\n\n\n  </b-card>\n  {{ items.length}}\n\n\n<b-row>\n\n  <Items :items=\"items\" />\n\n</b-row>\n{{ items}}\n\n\n</div>\n</template>\n\n<script>\nimport _ from 'underscore'\nconst API_URL = 'https://www.wikidata.org/w/api.php?action=wbsearchentities&origin=*&format=json'\n\nexport default {\n  name: \"Tension\",\n  components: {\n    'VueTagsInput': () => import('@johmun/vue-tags-input'),\n    'Items': () => import('@/components/items/Items'),\n  },\n  data(){\n    return{\n      tag: '',\n      tags: [],\n      autocompleteTagsItems: [],\n      debounce: null,\n      item: null,\n      inputFocus: false,\n      cardActive: false,\n      text_placeholder: \"What should be different ?\",\n      share: true,\n      checked1: true,\n\n    }\n  },\n  async created() {\n    this.init()\n    this.language = navigator.language.split(\"-\")[0] || 'en'\n    this.initForm(this.$route.query)\n\n\n  },\n  methods:{\n    init(){\n      this.item = this.$store.state.local.currentItem ||\n      {  \"@context\": {\n        \"@vocab\": \"https://www.w3.org/ns/activitystreams\",\n        \"ve\": \"https://scenaristeur.github.io/verse/\",\n        \"@id\": \"id\",\n        \"@type\": \"type\"\n      },\n      \"ve:name\":'',\n      \"ve:wi\" : '',\n      \"ve:wsb\": '',\n      \"ve:proposition\": '',\n      \"ve:tags\": '',\n      \"ve:age\": 0 ,\n      \"ve:privacy\": 'private',\n      \"ve:type\": \"item\",\n      \"ve:properties\": [],\n      test: \"test vocab\"}\n    },\n    add(){\n      //  if (this.pod != undefined && this.pod.webId != null){\n      let i = this.item\n      i.share = this.share\n      i.type = \"tension\"\n      this.$store.dispatch('local/saveItem', i)\n      this.clean()\n      this.$store.dispatch('local/getItems', {type: \"tension\"})\n      // }else{\n      //   alert(\"Tu devrais te connecter en selectionnant un fournisseur de PODs, pour enregistrer un Booklice sur ton Pod\")\n      //   let path = \"/?title=\"+this.tension.title+\"&wi=\"+this.tension.wi+\"&wsb=\"+this.tension.wsb+\"&proposition=\"+this.tension.proposition+\"&tags=\"+JSON.stringify(this.tension.tags)\n      //   this.$router.push({path: path})\n      // }\n    },\n    clean(){\n      this.init()//this.tension = {title: \"\", wi: \"\", wsb: \"\", proposition: \"\", tags: \"\", age: 0}\n      //this.currentNote = {title: \"\", wi: \"\", wsb: \"\", proposition: \"\", tags: \"\", age: 0}\n      this.cardActive = false\n      this.text_placeholder= \"Signal a tension\"\n      this.tags = []\n    },\n\n    initForm(q){\n      console.log(\"init\",q)\n      if (q.title != undefined || q.wi != undefined || q.wsb != undefined || q.proposition != undefined){\n        let i = {'ve:name': q.title || \"\",\n        've:wi': q.wi || \"\",\n        've:wsb': q.wsb || \"\",\n        've:proposition': q.proposition || \"\",\n        've:age': q.age || \"\",\n      }\n      this.tags = q.tags != undefined ? JSON.parse(q.tags) : \"\"\n      this.cardActive = true\n      // if(n.url.length == 0 && n.text.startsWith('http')){\n      //   n.url = n.text\n      //   n.text = \"\"\n      //   this.text_placeholder = \"Ajoutez une description\"\n      // }\n      this.item = i\n      console.log(\"item init\",this.item)\n      this.topic == undefined ? this.topic = \"default\" : \"\"\n    }\n  },\n  update(newTags) {\n    this.autocompleteTagsItems = [];\n    this.tags = newTags;\n  },\n  // initItems() {\n  //   if (this.tag.length < 2) return;\n  //   const url = `https://itunes.apple.com/search?term=\n  //   ${this.tag}&entity=allArtist&attribute=allArtistTerm&limit=6`;\n  //\n  //   clearTimeout(this.debounce);\n  //   this.debounce = setTimeout(() => {\n  //     axios.get(url).then(response => {\n  //       this.autocompleteItems = response.data.results.map(a => {\n  //         return { text: a.artistName };\n  //       });\n  //     }).catch(() => console.warn('Oh. Something went wrong'));\n  //   }, 600);\n  // },\n  async getTags(query) {\n    //  this.conceptUri = \"\"\n    if(query.length>0){\n      this.loading = true\n      let search_url = API_URL+\"&language=\"+this.language+\"&search=\"+query\n      console.log(search_url)\n      try{\n        const res = await fetch(search_url)\n        const suggestions = await res.json()\n        console.log(suggestions)\n        this.tags_items = suggestions.search\n        console.log(this.tags_items)\n        this.autocompleteTagsItems = suggestions.search.map(a => {\n          return { text: a.match.text+\" (\"+a.description+\")\", url: a.concepturi };\n        });\n      }catch(e){\n        alert(e)\n      }\n      this.loading = false\n    }\n  },\n\n},\nwatch:{\n  'tag': _.debounce(function(t) { this.getTags(t) }, 500),\n  tags(){\n    console.log(this.tags)\n    this.item['ve:tags'] = this.tags//.map(t => t.text.trim())\n  },\n  '$route' (to) {\n    //  console.log(\"New Note, to\",to)\n    this.initForm(to.query)\n  },\n  inputFocus(){\n    if (this.inputFocus == true){\n      this.cardActive = true\n      this.text_placeholder = \"What is ?\"\n      this.$refs.title.focus()\n    }\n  },\n  currentNote(){\n    //console.log(\"currentNote\",this.currentNote)\n    this.tension = this.currentTension\n    this.tags = this.currentTension.tags//.map(t => {return {text:t}})\n    this.cardActive = true\n    this.$refs.title.focus()\n    //  console.log(this.$refs.text)\n  }\n},\ncomputed:{\n  pod(){\n    return this.$store.state.solid.pod\n  },\n  // currentTension:{\n  //   get() { return this.$store.state.app.currentTension},\n  //   set(/*note*/) {/*this.$store.commit('booklice/setCurrentNote', note)*/}\n  // },\n  items:{\n    get() { return this.$store.state.local.items},\n    set(/*note*/) {/*this.$store.commit('booklice/setCurrentNote', note)*/}\n  },\n}\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tension.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tension.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tension.vue?vue&type=template&id=5416689c&\"\nimport script from \"./Tension.vue?vue&type=script&lang=js&\"\nexport * from \"./Tension.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}