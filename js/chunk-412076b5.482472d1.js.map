{"version":3,"sources":["webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/@babel/runtime/helpers/createSuper.js","webpack:///./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./src/agents/acteur/index.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./src/views/Sma.vue?139a","webpack:///./src/agents/HelloAgent.js","webpack:///src/views/Sma.vue","webpack:///./src/views/Sma.vue?245a","webpack:///./src/views/Sma.vue","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/evejs/dist/eve.custom.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./src/agents/agent/index.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/core-js/modules/es.reflect.to-string-tag.js","webpack:///./src/agents/environnement/index.js"],"names":["global","uncurryThis","aCallable","isObject","hasOwn","arraySlice","Function","concat","join","factories","construct","C","argsLength","args","list","i","module","exports","bind","that","F","this","Prototype","prototype","partArgs","arguments","boundFunction","length","apply","PROPER_FUNCTION_NAME","PROPER","redefine","anObject","isPrototypeOf","$toString","fails","regExpFlags","TO_STRING","RegExpPrototype","RegExp","n$ToString","getFlags","NOT_GENERIC","call","source","flags","INCORRECT_NAME","name","R","p","rf","f","undefined","unsafe","getPrototypeOf","require","isNativeReflectConstruct","possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","constructor","Reflect","__esModule","$","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","target","stat","forced","sham","it","_getPrototypeOf","o","Object","setPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","Agent","Board","options","console","log","data","_setPrototypeOf","getBuiltIn","aConstructor","create","nativeConstruct","ObjectPrototype","push","NEW_TARGET_BUG","ARGS_BUG","FORCED","Target","newTarget","$args","proto","instance","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","Constructor","protoProps","staticProps","render","_vm","_h","$createElement","_c","_self","_v","on","boardTest","_l","a","id","_s","JSON","stringify","staticRenderFns","HelloAgent","eve","count","connect","transports","getAll","sayHello","to","send","receive","from","message","indexOf","observables","created","env","board","print","acteur","fictif","agents","methods","watch","computed","$store","state","sma","component","_typeof","assertThisInitialized","_possibleConstructorReturn","TypeError","_isNativeReflectConstruct","Proxy","Boolean","valueOf","e","obj","Symbol","iterator","define","r","n","t","c","u","Error","code","1","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","Item","array","noop","nextTick","Array","title","browser","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","2","root","freeExports","nodeType","freeModule","freeGlobal","window","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","error","type","RangeError","map","fn","mapDomain","string","parts","split","replace","labels","encoded","ucs2decode","value","extra","output","counter","charCodeAt","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","out","basic","j","index","oldi","w","baseMinusT","inputLength","bias","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","test","slice","toLowerCase","toASCII","amd","hasOwnProperty","3","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","v","x","idx","substr","decodeURIComponent","isArray","xs","toString","4","stringifyPrimitive","isFinite","objectKeys","ks","encodeURIComponent","res","keys","5","parse","6","util","Url","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","urlParse","resolve","urlResolve","resolveObject","urlResolveObject","format","urlFormat","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","url","parseQueryString","slashesDenoteHost","isString","relative","queryIndex","splitter","uSplit","slashRegex","rest","trim","simplePath","exec","lowerProto","match","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","l","part","newpart","validParts","notHost","bit","unshift","h","ae","esc","escape","qm","s","charAt","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","isAbsolute","7","arg","8","rawAsap","freeTasks","pendingErrors","requestErrorThrow","makeRequestCallFromTimer","throwFirstError","asap","task","rawTask","RawTask","onerror","9","requestFlush","capacity","flush","currentIndex","scan","newLength","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromMutationObserver","callback","toggle","observer","node","document","createTextNode","observe","characterData","timeoutHandle","handleTimer","intervalHandle","setInterval","clearInterval","10","isValue","isPlainFunction","assign","normalizeOpts","contains","d","dscr","desc","gs","get","set","11","useColors","__nwjs","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","$1","formatArgs","namespace","humanize","diff","color","lastC","save","namespaces","storage","setItem","removeItem","load","getItem","DEBUG","localstorage","localStorage","destroy","warned","warn","colors","debug","formatters","12","setup","selectColor","createDebug","abs","prevTime","namespacesCache","enabledCache","enableOverride","enabled","curr","Number","Date","ms","prev","coerce","formatter","val","logFn","extend","init","newDebug","enable","names","skips","disable","toNamespace","substring","stack","default","forEach","13","14","15","foo","bar","trzy","16","max","dest","src","17","objPropertyIsEnumerable","propertyIsEnumerable","18","_undefined","19","20","21","object","22","opts1","23","24","25","26","str","27","searchString","28","ServiceManager","TransportManager","transport","LocalTransport","registerType","system","add","getTransportById","29","Promise","uuid","URL","connections","defaultConnection","ready","_getModuleConstructor","modules","registerModule","sort","b","mixin","me","loadModule","additionalOptions","_options","_receive","colon","_sendByProtocol","at","_to","_transportId","_sendByTransportId","conn","reject","_sendByNetworkId","networkId","connection","transportId","oobParams","getUrls","getMyUrl","getUrlByProtocol","_transport","_connect","_updateReady","disconnect","_disconnect","close","all","30","seed","hypertimer","KNOWN_PROPERTIES","timer","random","config","clear","deterministic","31","types","unload","getByType","32","Connection","33","Transport","34","LocalConnection","queryParams","35","36","isPromise","normalizeURL","37","isEmpty","__ee__","38","descriptors","callable","defineProperties","listener","__eeOnceListener__","candidate","39","40","41","Debug","42","emitter","hasListeners","createMaster","createSlave","TYPE","TIMEOUT","INTERVAL","TRIGGER","paced","rate","configuredTime","master","running","startTime","hyperTime","systemNow","timeouts","current","timeoutId","idSeq","server","client","_getConfig","time","_validateConfig","_setConfig","toTimestamp","_rescheduleIntervals","toISOString","newRate","isNaN","now","applyConfig","err","_schedule","broadcastConfig","_rescheduleInterval","occurrence","round","interval","_queueTimeout","_execTimeout","finish","_getExpiredTimeouts","expired","shuffle","next","delay","realDelay","onTimeout","date","realInterval","hyperInterval","pause","getTime","timestamp","setTrigger","_interval","_firstTime","_time","clearTrigger","continue","43","WebSocket","44","Server","sanitizedConfig","ws","_emitter","broadcast","event","clients","45","DELAY","REPEAT","slave","isFirst","isDestroyed","syncTimer","sync","getLatencyAndWait","getLatency","then","latency","catch","wait","repeat","latencies","limit","median","std","filtered","mean","request","start","end","onopen","46","eventEmitter","socket","envelope","getId","onmessage","reply","response","readyState","OPEN","CONNECTING","_id","47","compare","sum","arr","reduce","sqrt","variance","_mean","pow","sorted","48","times","results","recurse","whilst","condition","49","50","51","y","parseFloat","fmtShort","msAbs","fmtLong","plural","isPlural","long","52","53","LAST_ERROR","IS_ERROR","getThen","ex","tryCallOne","tryCallTwo","_U","_V","_W","_X","doResolve","safeThen","onFulfilled","onRejected","handle","Handler","deferred","_Y","handleResolved","cb","ret","promise","newValue","finale","_Z","done","reason","_0","54","55","TRUE","valuePromise","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","iterableToArray","iterable","remaining","race","values","56","finally","57","58","denodeify","argumentCount","Infinity","denodeifyWithCount","denodeifyWithoutCount","callbackFn","body","fnLength","_","nodeify","ctx","59","enableSynchronous","isPending","getState","isFulfilled","isRejected","getValue","getReason","disableSynchronous","60","width","chunks","digits","pool","GLOBAL","startdenom","significance","overflow","mask","oldRandom","ARC4","keylen","S","g","flatten","depth","typ","mixkey","smear","stringseed","tostring","autoseed","crypto","getRandomValues","Uint8Array","plugins","screen","use_entropy","entropy","arc4","resetGlobal","61","isPrototype","62","possibleTypes","63","isFunction","classRe","functionToString","64","65","66","uuidRegex","isUUID","_classCallCheck","uuidv4","v4","schema","pushAgent","text","alert","asyncGeneratorStep","gen","_next","_throw","info","_asyncToGenerator","_inherits","subClass","superClass","setToStringTag","Environnement","updateEnv","item","store","dispatch","commit"],"mappings":"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","file":"js/chunk-412076b5.482472d1.js","sourcesContent":["'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar arraySlice = require('../internals/array-slice');\n\nvar Function = global.Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar $toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar n$ToString = RegExpPrototype[TO_STRING];\nvar getFlags = uncurryThis(regExpFlags);\n\nvar NOT_GENERIC = fails(function () { return n$ToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = PROPER_FUNCTION_NAME && n$ToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = $toString(R.source);\n    var rf = R.flags;\n    var f = $toString(rf === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype) ? getFlags(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn.js\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}\n\nmodule.exports = _createSuper;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var Agent = require('../agent');\n\n// let schema = {\n//   \"ve:type\": {\"@id\": \"ve:tension\"},\n//   \"ve:wi\" : 'what is ?',\n//   \"ve:wsb\": 'test in root and in properties',\n//   \"ve:proposition\": '',\n// }\n\n// let props = [\n//   {\"name\": 've:pod', \"value\": null},\n//   // {\"name\": 've:wsb', \"value\": \"What should be in prop ?\"},\n//   // {\"name\": 've:proposition', \"value\": \"What is in prop ?\"},\n// ]\n\nclass Board extends Agent {\n\n  constructor(options){\n    super(options); // this is required\n    // this.data = Object.assign(this.data, schema);\n    //this.data['ve:properties'] = Object.assign(this.data['ve:properties'], props);\n    console.log(this.data);\n  }\n\n}\nmodule.exports = Board;\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind');\nvar aConstructor = require('../internals/a-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" sma\"),_c('br'),_c('b-button',{on:{\"click\":_vm.boardTest}},[_vm._v(\"boardTest\")]),_vm._v(\" Agents : \"),_c('ul',_vm._l((_vm.agents),function(a){return _c('li',{key:a.id},[_vm._v(\" \"+_vm._s(JSON.stringify(a, null, 2))+\" \")])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// var eve = require('evejs');\nimport * as eve from  'evejs/dist/eve.custom.js';\n\nexport function HelloAgent(id) {\n  // execute super constructor\n  eve.Agent.call(this, id);\n  this.count = 0\n\n  // connect to all transports configured by the system\n  this.connect(eve.system.transports.getAll());\n}\n\n// extend the eve.Agent prototype\nHelloAgent.prototype = Object.create(eve.Agent.prototype);\nHelloAgent.prototype.constructor = HelloAgent;\n\nHelloAgent.prototype.sayHello = function(to) {\n  this.send(to, 'Hello ' + to + '!');\n};\n\nHelloAgent.prototype.receive = function(from, message) {\n  console.log(from + ' said: ' + JSON.stringify(message));\n  // document.write(from + ' said: ' + JSON.stringify(message) + '<br>');\n\n  if (typeof message == \"string\" && message.indexOf('Hello') === 0) {\n    // reply to the greeting\n    this.send(from, 'Hi ' + from + ', nice to meet you!');\n  }\n  // else{\n  //   if(this.count <10)\n  //   {\n  //     this.count ++\n  //     this.send(from, 'Hi ' + from + 'my count is '+this.count );\n  //   }\n  // }\n};\n","<template>\n  <div>\n    sma<br>\n    <b-button @click=\"boardTest\">boardTest</b-button>\n    Agents :\n    <ul>\n      <li v-for=\"a in agents\" :key=\"a.id\">\n        {{JSON.stringify(a, null, 2)}}\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport * as Environnement from '@/agents/environnement'\nimport * as Acteur from '@/agents/acteur'\nimport * as Board from '@/agents/acteur'\nimport  'evejs/dist/eve.custom.js';\n\nimport { HelloAgent } from '@/agents/HelloAgent.js';\n// import { Observable } from 'object-observer/dist/object-observer.min.js';\n\nexport default {\n  name: \"Sma\",\n  data(){\n    return{\n      observables: []\n    }\n\n  },\n  created(){\n    // create two agents\nthis.agent1 = new HelloAgent('agent1');\nthis.agent2 = new HelloAgent('agent2');\n\nconsole.log(this.agent1)\n\n  // send a message to agent1\n  this.agent2.send('agent1', 'Hello agent1!');\n\n    this.env = new Environnement({name: \"env\", store: this.$store, type: 'Vue2', vue: this})\n    console.log(this.env)\n    this.board = new Board({name: \"board\"})\n    this.board.print()\n    this.acteur = new Acteur({name: \"user\"})\n\n    this.acteur.print()\n    this.acteur.log(\"yohoho, hello i'm the principal actor!\")\n    let fictif = new Acteur({name: \"fictif 1\"})\n    console.log(\"fictif 1\", fictif)\n    let agents = window.env.getAgents()\n    console.log(agents)\n  },\n  methods:{\n    boardTest(){\n      this.acteur.send(\"board\", {action: \"put\", content: {text: \"hello\", world: \"world\"}})\n      this.acteur.send(\"board\", {action: \"read\"})\n    }\n  },\n  watch:{\n    //     agents(){\n    //       this.observables = []\n    //       this.agents.forEach(agent => {\n    //         let observableAgent = Observable.from(agent);\n    //         this.observables.push(observableAgent)\n    //         observableAgent.observe(changes => {\n    //           changes.forEach(change => {\n    //             console.log(\"CHANGE\", change);\n    //           });\n    //         });\n    //       });\n    // console.log(this.observables)\n    //     }\n  },\n  computed:{\n    agents(){\n      return this.$store.state.sma.agents\n    },\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sma.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sma.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sma.vue?vue&type=template&id=f10c6820&\"\nimport script from \"./Sma.vue?vue&type=script&lang=js&\"\nexport * from \"./Sma.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.eve = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],2:[function(require,module,exports){\n(function (global){(function (){\n/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this)}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],3:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n},{}],4:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n},{\"./decode\":3,\"./encode\":4}],6:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n},{\"./util\":7,\"punycode\":2,\"querystring\":5}],7:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = require(\"./raw\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n\n},{\"./raw\":9}],9:[function(require,module,exports){\n(function (global){(function (){\n\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n}).call(this)}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],10:[function(require,module,exports){\n\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\n},{\"es5-ext/object/assign\":14,\"es5-ext/object/normalize-options\":22,\"es5-ext/string/#/contains\":25,\"type/plain-function/is\":63,\"type/value/is\":65}],11:[function(require,module,exports){\n(function (process){(function (){\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n\n}).call(this)}).call(this,require('_process'))\n},{\"./common\":12,\"_process\":1}],12:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n\n},{\"ms\":51}],13:[function(require,module,exports){\n\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n\n},{}],14:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n\n},{\"./is-implemented\":15,\"./shim\":16}],15:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n\n},{}],16:[function(require,module,exports){\n\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n\n},{\"../keys\":19,\"../valid-value\":24}],17:[function(require,module,exports){\n\"use strict\";\n\nvar value                   = require(\"./valid-value\")\n  , objPropertyIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nmodule.exports = function (obj) {\n\tvar i;\n\tvalue(obj);\n\tfor (i in obj) {\n\t\t// Jslint: ignore\n\t\tif (objPropertyIsEnumerable.call(obj, i)) return false;\n\t}\n\treturn true;\n};\n\n},{\"./valid-value\":24}],18:[function(require,module,exports){\n\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n\n},{\"../function/noop\":13}],19:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n\n},{\"./is-implemented\":20,\"./shim\":21}],20:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\n},{}],21:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n\n},{\"../is-value\":18}],22:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n\n},{\"./is-value\":18}],23:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\n},{}],24:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n\n},{\"./is-value\":18}],25:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n\n},{\"./is-implemented\":26,\"./shim\":27}],26:[function(require,module,exports){\n\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n\n},{}],27:[function(require,module,exports){\n\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n\n},{}],28:[function(require,module,exports){\nexports.Agent = require('./lib/Agent');\nexports.ServiceManager = require('./lib/ServiceManager');\nexports.TransportManager = require('./lib/TransportManager');\n\nexports.transport = {\n  LocalTransport:     require('./lib/transport/local/LocalTransport')\n};\n\nexports.TransportManager.registerType(exports.transport.LocalTransport);\n\n// load the default ServiceManager, a singleton, initialized with a LocalTransport\nexports.system = new exports.ServiceManager();\nexports.system.transports.add(new exports.transport.LocalTransport());\n\n// override Agent.getTransportById in order to support Agent.connect(transportId)\nexports.Agent.getTransportById = function (id) {\n  return exports.system.transports.get(id);\n};\n\n},{\"./lib/Agent\":29,\"./lib/ServiceManager\":30,\"./lib/TransportManager\":31,\"./lib/transport/local/LocalTransport\":35}],29:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('promise');\nvar uuid = require('uuid-v4');\nvar util = require('./util');\nvar URL = require('url');\n\n/**\n * Agent\n * @param {string} [id]         Id for the agent. If not provided, the agent\n *                              will be given a uuid.\n * @constructor\n */\nfunction Agent(id) {\n  this.id = id ? id.toString() : uuid();\n\n  // a list with all connected transports\n  this.connections = [];\n  this.defaultConnection = null;\n  this.ready = Promise.resolve([]);\n}\n\n// an object with modules which can be used to extend the agent\nAgent.modules = {};\n\n/**\n * Register a new type of module. This module can then be loaded via\n * Agent.extend() and Agent.loadModule().\n * @param {Function} constructor     A module constructor\n */\nAgent.registerModule = function (constructor) {\n  var type = constructor.prototype.type;\n  if (typeof constructor !== 'function') {\n    throw new Error('Constructor function expected');\n  }\n  if (!type) {\n    throw new Error('Field \"prototype.type\" missing in transport constructor');\n  }\n  if (type in Agent.modules) {\n    if (Agent.modules[type] !== constructor) {\n      throw new Error('Module of type \"' + type + '\" already exists');\n    }\n  }\n\n  Agent.modules[type] = constructor;\n};\n\n/**\n * Get a transport by id.\n * This static method can be overloaded for example by the get function of\n * a singleton TransportManager.\n * @param {string} id\n * @return {Transport}\n */\nAgent.getTransportById = function (id) {\n  throw new Error('Transport with id \"' + id + '\" not found');\n};\n\n/**\n * Extend an agent with modules (mixins).\n * The modules new functions are added to the Agent itself.\n * See also function `loadModule`.\n * @param {string | string[]} module  A module name or an Array with module\n *                                    names. Available modules:\n *                                    'pattern', 'request', 'babble'\n * @param {Object} [options]          Additional options for loading the module\n * @return {Agent} Returns the agent itself\n */\nAgent.prototype.extend = function (module, options) {\n  if (Array.isArray(module)) {\n    var modules = [].concat(module);\n\n    // order the modules such that 'pattern' comes first, this module must be\n    // loaded before other modules ('request' specifically)\n    modules.sort(function (a, b) {\n      if (a == 'pattern') return -1;\n      if (b == 'pattern') return 1;\n      return 0;\n    });\n\n    // an array with module names\n    for (var i = 0; i < modules.length; i++) {\n      this.extend(modules[i], options)\n    }\n  }\n  else {\n    // a single module name\n    var constructor = _getModuleConstructor(module);\n    var instance = new constructor(this, options);\n    var mixin = instance.mixin();\n\n    // check for conflicts in the modules mixin functions\n    var me = this;\n    Object.keys(mixin).forEach(function (name) {\n      if (me[name] !== undefined && name !== '_receive') {\n        throw new Error('Conflict: agent already has a property \"' + prop + '\"');\n      }\n    });\n\n    // extend the agent with all mixin functions provided by the module\n    Object.keys(mixin).forEach(function (name) {\n      me[name] = mixin[name];\n    });\n  }\n\n  return this;\n};\n\n/**\n * Load a module onto an agent.\n * See also function `extend`.\n * @param {string | string[]} module  A module name or an Array with module\n *                                    names. Available modules:\n *                                    'pattern', 'request', 'babble'\n * @param {Object} [options]          Additional options for loading the module\n * @return {Object} Returns the created module\n */\nAgent.prototype.loadModule = function (module, options, additionalOptions) {\n  var _options = options !== undefined ? Object.create(options) : {};\n  _options.extend = false;\n\n  var constructor = _getModuleConstructor(module);\n  var instance = new constructor(this, options, additionalOptions);\n  var mixin = instance.mixin();\n\n  // only replace the _receive function, do not add other mixin functions\n  this._receive = mixin._receive;\n\n  return instance;\n};\n\n/**\n * Get a module constructor by it's name.\n * Throws an error when the module is not found.\n * @param {string} name\n * @return {function} Returns the modules constructor function\n * @private\n */\nfunction _getModuleConstructor(name) {\n  var constructor = Agent.modules[name];\n  if (!constructor) {\n    throw new Error('Unknown module \"' + name + '\". ' +\n      'Choose from: ' + Object.keys(Agent.modules).map(JSON.stringify).join(', '));\n  }\n  return constructor;\n}\n\n/**\n * Send a message to an agent\n * @param {string} to\n *              to is either:\n *              - A string \"agentId\", the id of the recipient. Will be send\n *                via the default transport or when there is no default\n *                transport via the first connected transport.\n *              - A string \"agentId@transportId\" Only usable locally, not\n *                for sharing an address with remote agents.\n *              - A string \"protocol://networkId/agentId\". This is a sharable\n *                identifier for an agent.\n * @param {*} message  Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n */\nAgent.prototype.send = function (to, message) {\n\n  var colon = to.indexOf(':');\n  if (colon !== -1) {\n    var url = URL.parse(to);\n\n    //TODO: Fix this for protocols that use networkId instead of host (Needs to be fixed in the protocol itself.)\n    return this._sendByProtocol(url.protocol.slice(0, -1), to, message);\n  }\n\n  // TODO: deprecate this notation \"agentId@transportId\"?\n  var at = to.indexOf('@');\n  if (at != -1) {\n    // to is an id like \"agentId@transportId\"\n    var _to = to.substring(0, at);\n    var _transportId = to.substring(at + 1);\n    return this._sendByTransportId(_transportId, _to, message);\n  }\n\n  // to is an id like \"agentId\". Send via the default transport\n  var conn = this.defaultConnection;\n  if (conn) {\n    return conn.send(to, message);\n  }\n  else {\n    return Promise.reject(new Error('No transport found'));\n  }\n};\n\n/**\n * Send a transport to an agent given a networkId\n * @param {string} networkId    A network id\n * @param {string} to           An agents id\n * @param {string} message      Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n * @private\n */\nAgent.prototype._sendByNetworkId = function (networkId, to, message) {\n  // TODO: change this.connections to a map with networkId as keys, much faster\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.networkId == networkId) {\n      return connection.send(to, message);\n    }\n  }\n\n  return Promise.reject(new Error('No transport found with networkId \"' + networkId + '\"'));\n};\n\n/**\n * Send a message by a transport by protocol.\n * The message will be send via the first found transport having the specified\n * protocol.\n * @param {string} protocol     A protocol, for example 'http' or 'ws'\n * @param {string} to           An agents id\n * @param {string} message      Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n * @private\n */\nAgent.prototype._sendByProtocol = function (protocol, to, message) {\n\n  // the https addresses also make use of the http protocol.\n  protocol = protocol == 'https' ? 'http' : protocol;\n\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.type == protocol) {\n      return connection.send(to, message);\n    }\n  }\n\n  return Promise.reject(new Error('No transport found for protocol \"' + protocol + '\"'));\n};\n\n/**\n * Send a transport to an agent via a specific transport\n * @param {string} transportId  The configured id of a transport.\n * @param {string} to           An agents id\n * @param {string} message      Message to be send\n * @return {Promise} Returns a promise which resolves when the message as\n *                   successfully been sent, or rejected when sending the\n *                   message failed\n * @private\n */\nAgent.prototype._sendByTransportId = function (transportId, to, message) {\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.id == transportId) {\n      return connection.send(to, message);\n    }\n  }\n\n  return Promise.reject(new Error('No transport found with id \"' + transportId + '\"'));\n};\n\n/**\n * Receive a message.\n * @param {string} from     Id of sender\n * @param {*} message       Received message, a JSON object (often a string)\n */\nAgent.prototype.receive = function (from, message, oobParams) {\n  // ... to be overloaded\n};\n\n/**\n * The method _receive is overloaded in a cascaded way by modules, and calls\n * the public method Agent.receive at the end of the chain.\n * @param {string} from     Id of sender\n * @param {*} message       Received message, a JSON object (often a string)\n * @param {array} oobParams Optional Out of Band parameters, e.g. query params for http\n * @returns {*} Returns the return value of Agent.receive\n * @private\n */\nAgent.prototype._receive = function (from, message, oobParams) {\n  return this.receive(from, message);\n};\n\nAgent.prototype.getUrls = function () {\n  return this.connections.map(function (connection) {\n    return connection.getMyUrl()\n  });\n};\n\nAgent.prototype.getUrlByProtocol = function (protocol) {\n  for (var i = 0; i < this.connections.length; i++) {\n    var connection = this.connections[i];\n    if (connection.transport.type == protocol) {\n      return connection.getMyUrl();\n    }\n  }\n};\n\n/**\n * Connect to a transport. The agent will subscribe itself to\n * messages sent to his id.\n * @param {string | Transport | Transport[] | string[]} transport\n *                                  A Transport instance, or the id of a\n *                                  transport loaded in eve.system.\n * @param {string} [id]             An optional alternative id to be used\n *                                  for the connection. By default, the agents\n *                                  own id is used.\n * @return {Connection | Connection[]}  Returns a connection or, in case of\n *                                      multiple transports, returns an\n *                                      array with connections. The connections\n *                                      have a promise .ready which resolves\n *                                      as soon as the connection is ready for\n *                                      use.\n */\nAgent.prototype.connect = function (transport, id) {\n  if (Array.isArray(transport)) {\n    var me = this;\n    return transport.map(function (_transport) {\n        try {\n          return me._connect(_transport, id);\n        } catch (e) {\n          return {error: e}\n        }\n      }\n    );\n  }\n  else if (typeof transport === 'string') {\n    // get transport by id\n    try {\n      return this._connect(Agent.getTransportById(transport), id);\n    } catch (e) {\n      return {error: e}\n    }\n  }\n  else {\n    // a transport instance\n    try {\n      return this._connect(transport, id);\n    } catch (e) {\n      return {error: e}\n    }\n  }\n};\n\n/**\n * Connect to a transport\n * @param {Transport} transport     A Transport instance\n * @param {string} [id]             An optional alternative id to be used\n *                                  for the connection. By default, the agents\n *                                  own id is used.\n * @return {Connection}             Returns a connection.\n * @private\n */\nAgent.prototype._connect = function (transport, id) {\n  // create a receive function which is bound to the _receive function.\n  // the _receive function can be replaced in by modules in a cascaded way,\n  // and in the end calls this.receive of the agent.\n  // note: we don't do receive = this._receive.bind(this) as the _receive\n  //       function can be overloaded after a connection is made.\n  var me = this;\n  var receive = function (from, message, oobParams) {\n    return me._receive(from, message, oobParams);\n  };\n  var connection = transport.connect(id || this.id, receive);\n  this.connections.push(connection);\n\n  // set or replace the defaultConnection\n  if (!this.defaultConnection) {\n    this.defaultConnection = connection;\n  }\n  else if (transport['default']) {\n    if (this.defaultConnection['default']) {\n      throw new Error('Cannot connect to a second default transport');\n    }\n    this.defaultConnection = connection;\n  }\n\n  this._updateReady();\n\n  return connection;\n};\n\n/**\n * Disconnect from one or multiple transports\n * @param {string | Transport | string[] | Transport[]} [transport]\n *              A transport or an array with transports.\n *              parameter transport can be an instance of a Transport, or the\n *              id of a transport.\n *              When transport is undefined, the agent will be disconnected\n *              from all connected transports.\n */\nAgent.prototype.disconnect = function (transport) {\n  var i, connection;\n\n  if (!transport) {\n    // disconnect all transports\n    while (connection = this.connections[0]) {\n      this._disconnect(connection);\n    }\n  }\n  else if (Array.isArray(transport)) {\n    // an array with transports\n    i = 0;\n    while (i < this.connections.length) {\n      connection = this.connections[i];\n      if (transport.indexOf(connection.transport) !== -1) {\n        this._disconnect(connection);\n      }\n      else {\n        i++;\n      }\n    }\n  }\n  else if (typeof transport === 'string') {\n    // transport by id\n    this.disconnect(Agent.getTransportById(transport));\n  }\n  else {\n    // a single transport\n    for (i = 0; i < this.connections.length; i++) {\n      connection = this.connections[i];\n      if (connection.transport === transport) {\n        this._disconnect(connection);\n        break;\n      }\n    }\n  }\n};\n\n/**\n * Close a connection\n * @param {Connection} connection\n * @private\n */\nAgent.prototype._disconnect = function (connection) {\n  // find the connection\n  var index = this.connections.indexOf(connection);\n  if (index !== -1) {\n    // close the connection\n    connection.close();\n\n    // remove from the list with connections\n    this.connections.splice(index, 1);\n\n    // replace the defaultConnection if needed\n    if (this.defaultConnection === connection) {\n      this.defaultConnection = this.connections[this.connections.length - 1] || null;\n    }\n  }\n\n  this._updateReady();\n};\n\n/**\n * Update the ready state of the agent\n * @private\n */\nAgent.prototype._updateReady = function () {\n  // FIXME: we should not replace with a new Promise,\n  //        we have a problem when this.ready is requested before ready,\n  //        and another connection is opened before ready\n  this.ready = Promise.all(this.connections.map(function (connection) {\n    return connection.ready;\n  }));\n};\n\nmodule.exports = Agent;\n\n},{\"./util\":36,\"promise\":52,\"url\":6,\"uuid-v4\":66}],30:[function(require,module,exports){\n'use strict';\n\nvar seed = require('seed-random');\nvar hypertimer = require('hypertimer');\nvar TransportManager = require('./TransportManager');\n\n// map with known configuration properties\nvar KNOWN_PROPERTIES = {\n  transports: true,\n  timer: true,\n  random: true\n};\n\nfunction ServiceManager(config) {\n  this.transports = new TransportManager();\n\n  this.timer = hypertimer();\n\n  this.random = Math.random;\n\n  this.init(config);\n}\n\n/**\n * Initialize the service manager with services loaded from a configuration\n * object. All current services are unloaded and removed.\n * @param {Object} config\n */\nServiceManager.prototype.init = function (config) {\n  this.transports.clear();\n\n  if (config) {\n    if (config.transports) {\n      this.transports.load(config.transports);\n    }\n\n    if (config.timer) {\n      this.timer.config(config.timer);\n    }\n\n    if (config.random) {\n      if (config.random.deterministic) {\n        var key = config.random.seed || 'random seed';\n        this.random = seed(key, config.random);\n      }\n      else {\n        this.random = Math.random;\n      }\n    }\n\n    for (var prop in config) {\n      if (config.hasOwnProperty(prop) && !KNOWN_PROPERTIES[prop]) {\n        // TODO: should log this warning via a configured logger\n        console.log('WARNING: Unknown configuration option \"' + prop + '\"')\n      }\n    }\n  }\n};\n\n/**\n * Clear all configured services\n */\nServiceManager.prototype.clear = function () {\n  this.transports.clear();\n};\n\nmodule.exports = ServiceManager;\n\n},{\"./TransportManager\":31,\"hypertimer\":39,\"seed-random\":60}],31:[function(require,module,exports){\n'use strict';\n\n/**\n * A manager for loading and finding transports.\n * @param {Array} [config]      Optional array containing configuration objects\n *                             for transports.\n * @constructor\n */\nfunction TransportManager(config) {\n  this.transports = [];\n\n  if (config) {\n    this.load(config);\n  }\n}\n\n// map with all registered types of transports\n// each transport must register itself at the TransportManager using registerType.\nTransportManager.types = {};\n\n/**\n * Register a new type of transport. This transport can then be loaded via\n * configuration.\n * @param {Transport.prototype} constructor     A transport constructor\n */\nTransportManager.registerType = function (constructor) {\n  var type = constructor.prototype.type;\n  if (typeof constructor !== 'function') {\n    throw new Error('Constructor function expected');\n  }\n  if (!type) {\n    throw new Error('Field \"prototype.type\" missing in transport constructor');\n  }\n  if (type in TransportManager.types) {\n    if (TransportManager.types[type] !== constructor) {\n      throw new Error('Transport type \"' + type + '\" already exists');\n    }\n  }\n\n  TransportManager.types[type] = constructor;\n};\n\n/**\n * Add a loaded transport to the manager\n * @param {Transport} transport\n * @return {Transport} returns the transport itself\n */\nTransportManager.prototype.add = function (transport) {\n  this.transports.push(transport);\n  return transport;\n};\n\n/**\n * Load one or multiple transports based on JSON configuration.\n * New transports will be appended to current transports.\n * @param {Object | Array} config\n * @return {Transport | Transport[]} Returns the loaded transport(s)\n */\nTransportManager.prototype.load = function (config) {\n  if (Array.isArray(config)) {\n    return config.map(this.load.bind(this));\n  }\n\n  var type = config.type;\n  if (!type) {\n    throw new Error('Property \"type\" missing');\n  }\n\n  var constructor = TransportManager.types[type];\n  if (!constructor) {\n    throw new Error('Unknown type of transport \"' + type + '\". ' +\n        'Choose from: ' + Object.keys(TransportManager.types).join(','))\n  }\n\n  var transport = new constructor(config);\n  this.transports.push(transport);\n  return transport;\n};\n\n/**\n * Unload a transport.\n * @param {Transport | Transport[] | string | string[]} transport\n *              A Transport instance or the id of a transport, or an Array\n *              with transports or transport ids.\n */\nTransportManager.prototype.unload = function (transport) {\n  var _transport;\n  if (typeof transport === 'string') {\n    _transport = this.get(transport);\n  }\n  else if (Array.isArray(transport)) {\n    for (var i = 0; i < transport.length; i++) {\n      this.unload(transport[i]);\n    }\n  }\n  else {\n    _transport = transport;\n  }\n\n  if (_transport) {\n    _transport.close();\n\n    var index = this.transports.indexOf(_transport);\n    if (index !== -1) {\n      this.transports.splice(index, 1);\n    }\n  }\n};\n\n/**\n * Get a transport by its id. The transport must have been created with an id\n * @param {string} [id] The id of a transport\n * @return {Transport} Returns the transport when found. Throws an error\n *                     when not found.\n */\nTransportManager.prototype.get = function (id) {\n  for (var i = 0; i < this.transports.length; i++) {\n    var transport = this.transports[i];\n    if (transport.id === id) {\n      return transport;\n    }\n  }\n\n  throw new Error('Transport with id \"' + id + '\" not found');\n};\n\n/**\n * Get all transports.\n * @return {Transport[]} Returns an array with all loaded transports.\n */\nTransportManager.prototype.getAll = function () {\n  return this.transports.concat([]);\n};\n\n/**\n * Find transports by type.\n * @param {string} [type]   Type of the transport. Choose from 'amqp',\n *                          'distribus', 'local', 'pubnub'.\n * @return {Transport[]}    When type is defined, the all transports of this\n *                          type are returned. When undefined, all transports\n *                          are returned.\n */\nTransportManager.prototype.getByType = function (type) {\n  if (type) {\n    if (!(type in TransportManager.types)) {\n      throw new Error('Unknown type of transport \"' + type + '\". ' +\n          'Choose from: ' + Object.keys(TransportManager.types).join(','))\n    }\n\n    return this.transports.filter(function (transport) {\n      return transport.type === type;\n    });\n  }\n  else {\n    return [].concat(this.transports);\n  }\n};\n\n/**\n * Close all configured transports and remove them from the manager.\n */\nTransportManager.prototype.clear = function () {\n  this.transports.forEach(function (transport) {\n    transport.close();\n  });\n  this.transports = [];\n};\n\nmodule.exports = TransportManager;\n\n},{}],32:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('promise');\n\n/**\n * An abstract Transport connection\n * @param {Transport} transport\n * @param {string} id\n * @param {function} receive\n * @constructor\n * @abstract\n */\nfunction Connection (transport, id, receive) {\n  throw new Error('Cannot create an abstract Connection');\n}\n\nConnection.prototype.ready = Promise.reject(new Error('Cannot get abstract property ready'));\n\n/**\n * Send a message to an agent.\n * @param {string} to\n * @param {*} message\n * @return {Promise} returns a promise which resolves when the message has been sent\n */\nConnection.prototype.send = function (to, message) {\n  throw new Error('Cannot call abstract function send');\n};\n\n/**\n * Close the connection, disconnect from the transport.\n */\nConnection.prototype.close = function () {\n  throw new Error('Cannot call abstract function \"close\"');\n};\n\nConnection.prototype.getMyUrl = function(){\n  return this.transport.type +\":\"+this.id;\n};\n\nmodule.exports = Connection;\n\n},{\"promise\":52}],33:[function(require,module,exports){\n'use strict';\n\n/**\n * Abstract prototype of a transport\n * @param {Object} [config]\n * @constructor\n */\nfunction Transport(config) {\n  this.id = config && config.id || null;\n  this['default'] = config && config['default'] || false;\n}\n\nTransport.prototype.type = null;\n\n/**\n * Connect an agent\n * @param {String} id\n * @param {Function} receive  Invoked as receive(from, message)\n * @return {Connection}       Returns a connection\n */\nTransport.prototype.connect = function(id, receive) {\n  throw new Error('Cannot invoke abstract function \"connect\"');\n};\n\n/**\n * Close the transport\n */\nTransport.prototype.close = function() {\n  throw new Error('Cannot invoke abstract function \"close\"');\n};\n\nmodule.exports = Transport;\n\n},{}],34:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('promise');\nvar Connection = require('../Connection');\n\n/**\n * A local connection.\n * @param {LocalTransport} transport\n * @param {string | number} id\n * @param {function} receive\n * @constructor\n */\nfunction LocalConnection(transport, id, receive) {\n  this.transport = transport;\n  this.id = id;\n\n  // register the agents receive function\n  if (this.id in this.transport.agents) {\n    throw new Error('Agent with id ' + id + ' already exists');\n  }\n  this.transport.agents[this.id] = receive;\n\n  // ready state\n  this.ready = Promise.resolve(this);\n}\n\nLocalConnection.prototype.getMyUrl = function(){\n  return this.transport.type +\":\"+this.id;\n};\n\n/**\n * Send a message to an agent.\n * @param {string} to\n * @param {*} message\n * @return {Promise} returns a promise which resolves when the message has been sent\n */\nLocalConnection.prototype.send = function (to, message) {\n  var query = to.replace(\"local:\",\"\").split(\"?\");\n  var callback = this.transport.agents[query[0]];\n  if (!callback) {\n    return Promise.reject(new Error('Agent with id ' + to + ' not found'));\n  }\n\n  var queryParams = query[1] ? query[1].split(\"&\"):[];\n  // invoke the agents receiver as callback(from, message, queryparameters)\n  callback(\"local:\"+this.id, message, queryParams);\n\n  return Promise.resolve();\n};\n\n/**\n * Close the connection\n */\nLocalConnection.prototype.close = function () {\n  delete this.transport.agents[this.id];\n};\n\nmodule.exports = LocalConnection;\n\n},{\"../Connection\":32,\"promise\":52}],35:[function(require,module,exports){\n'use strict';\n\nvar Transport = require('./../Transport');\nvar LocalConnection = require('./LocalConnection');\n\n/**\n * Create a local transport.\n * @param {Object} config         Config can contain the following properties:\n *                                - `id: string`. Optional\n * @constructor\n */\nfunction LocalTransport(config) {\n  this.id = config && config.id || null;\n  this.networkId = this.id || null;\n  this['default'] = config && config['default'] || false;\n  this.agents = {};\n}\n\nLocalTransport.prototype = new Transport();\n\nLocalTransport.prototype.type = 'local';\n\n/**\n * Connect an agent\n * @param {String} id\n * @param {Function} receive                  Invoked as receive(from, message)\n * @return {LocalConnection} Returns a promise which resolves when\n *                                                connected.\n */\nLocalTransport.prototype.connect = function(id, receive) {\n  return new LocalConnection(this, id, receive);\n};\n\n/**\n * Close the transport. Removes all agent connections.\n */\nLocalTransport.prototype.close = function() {\n  this.agents = {};\n};\n\nmodule.exports = LocalTransport;\n\n},{\"./../Transport\":33,\"./LocalConnection\":34}],36:[function(require,module,exports){\n'use strict';\n\n/**\n * Test whether the provided value is a Promise.\n * A value is marked as a Promise when it is an object containing functions\n * `then` and `catch`.\n * @param {*} value\n * @return {boolean} Returns true when `value` is a Promise\n */\nexports.isPromise = function (value) {\n  return value &&\n      typeof value['then'] === 'function' &&\n      typeof value['catch'] === 'function'\n};\n\n/**\n * Normalize a url. Removes trailing slash\n * @param {string} url\n * @return {string} Returns the normalized url\n */\nexports.normalizeURL = function (url) {\n  if (url[url.length - 1] == '/') {\n    return url.substring(0, url.length - 1);\n  }\n  else {\n    return url;\n  }\n};\n\n},{}],37:[function(require,module,exports){\n'use strict';\n\nvar isEmpty = require('es5-ext/object/is-empty')\n  , value   = require('es5-ext/object/valid-value')\n\n  , hasOwnProperty = Object.prototype.hasOwnProperty;\n\nmodule.exports = function (obj/*, type*/) {\n\tvar type;\n\tvalue(obj);\n\ttype = arguments[1];\n\tif (arguments.length > 1) {\n\t\treturn hasOwnProperty.call(obj, '__ee__') && Boolean(obj.__ee__[type]);\n\t}\n\treturn obj.hasOwnProperty('__ee__') && !isEmpty(obj.__ee__);\n};\n\n},{\"es5-ext/object/is-empty\":17,\"es5-ext/object/valid-value\":24}],38:[function(require,module,exports){\n'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n\n},{\"d\":10,\"es5-ext/object/valid-callable\":23}],39:[function(require,module,exports){\nmodule.exports = require('./lib/hypertimer');\n\n},{\"./lib/hypertimer\":42}],40:[function(require,module,exports){\nmodule.exports = (typeof window === 'undefined' || typeof window.Promise === 'undefined') ?\n    require('promise') :\n    window.Promise;\n\n},{\"promise\":52}],41:[function(require,module,exports){\nvar Debug = typeof window !== 'undefined' ? window.Debug : require('debug');\n\nmodule.exports = Debug || function () {\n  // empty stub when in the browser\n  return function () {};\n};\n\n},{\"debug\":11}],42:[function(require,module,exports){\nvar emitter = require('event-emitter');\nvar hasListeners = require('event-emitter/has-listeners');\nvar createMaster = require('./synchronization/master').createMaster;\nvar createSlave = require('./synchronization/slave').createSlave;\nvar util = require('./util');\n\n// enum for type of timeout\nvar TYPE = {\n  TIMEOUT: 0,\n  INTERVAL: 1,\n  TRIGGER: 2\n};\n\n/**\n * Create a new hypertimer\n * @param {Object} [options]  The following options are available:\n *                            deterministic: boolean\n *                                        If true (default), simultaneous events\n *                                        are executed in a deterministic order.\n *                            paced: boolean\n *                                        Mode for pacing of time. When paced,\n *                                        the time proceeds at a continuous,\n *                                        configurable rate, useful for\n *                                        animation purposes. When unpaced, the\n *                                        time jumps immediately from scheduled\n *                                        event to the next scheduled event.\n *                            rate: number\n *                                        The rate of progress of time with\n *                                        respect to real-time. Rate must be a\n *                                        positive number, and is 1 by default.\n *                                        For example when 2, the time of the\n *                                        hypertimer runs twice as fast as\n *                                        real-time.\n *                                        Only applicable when option paced=true.\n *                            time: number | Date | String\n *                                        Set a simulation time. If not provided,\n *                                        The timer is instantiated with the\n *                                        current system time.\n */\nfunction hypertimer(options) {\n  // options\n  var paced = true;\n  var rate = 1;             // number of milliseconds per milliseconds\n  var deterministic = true; // run simultaneous events in a deterministic order\n  var configuredTime = null;// only used for returning the configured time on .config()\n  var master = null;        // url of master, will run as slave\n  var port = null;          // port to serve as master\n\n  // properties\n  var running = false;              // true when running\n  var startTime = null;             // timestamp. the moment in real-time when hyperTime was set\n  var hyperTime = util.systemNow(); // timestamp. the start time in hyper-time\n  var timeouts = [];                // array with all running timeouts\n  var current = {};                 // the timeouts currently in progress (callback is being executed)\n  var timeoutId = null;             // currently running timer\n  var idSeq = 0;                    // counter for unique timeout id's\n  var server = null;\n  var client = null;\n\n  // exported timer object with public functions and variables\n  // add event-emitter mixin\n  var timer = emitter({});\n\n  /**\n   * Change configuration options of the hypertimer, or retrieve current\n   * configuration.\n   * @param {Object} [options]  The following options are available:\n   *                            deterministic: boolean\n   *                                        If true (default), simultaneous events\n   *                                        are executed in a deterministic order.\n   *                            paced: boolean\n   *                                        Mode for pacing of time. When paced,\n   *                                        the time proceeds at a continuous,\n   *                                        configurable rate, useful for\n   *                                        animation purposes. When unpaced, the\n   *                                        time jumps immediately from scheduled\n   *                                        event to the next scheduled event.\n   *                            rate: number\n   *                                        The rate of progress of time with\n   *                                        respect to real-time. Rate must be a\n   *                                        positive number, and is 1 by default.\n   *                                        For example when 2, the time of the\n   *                                        hypertimer runs twice as fast as\n   *                                        real-time.\n   *                                        Only applicable when option paced=true.\n   *                            time: number | Date | String\n   *                                        Set a simulation time.\n   * @return {Object} Returns the applied configuration\n   */\n  timer.config = function(options) {\n    if (options) {\n      _validateConfig(options);\n      _setConfig(options);\n    }\n\n    // return a copy of the configuration options\n    return _getConfig();\n  };\n\n  /**\n   * Returns the current time of the timer as a number.\n   * See also getTime().\n   * @return {number} The time\n   */\n  timer.now = function () {\n    if (paced) {\n      if (running) {\n        // TODO: implement performance.now() / process.hrtime(time) for high precision calculation of time interval\n        var realInterval = util.systemNow() - startTime;\n        var hyperInterval = realInterval * rate;\n        return hyperTime + hyperInterval;\n      }\n      else {\n        return hyperTime;\n      }\n    }\n    else {\n      return hyperTime;\n    }\n  };\n\n  /**\n   * Continue the timer.\n   */\n  timer['continue'] = function() {\n    startTime = util.systemNow();\n    running = true;\n\n    // reschedule running timeouts\n    _schedule();\n  };\n\n  /**\n   * Pause the timer. The timer can be continued again with `continue()`\n   */\n  timer.pause = function() {\n    hyperTime = timer.now();\n    startTime = null;\n    running = false;\n\n    // reschedule running timeouts (pauses them)\n    _schedule();\n  };\n\n  /**\n   * Returns the current time of the timer as Date.\n   * See also now().\n   * @return {Date} The time\n   */\n  timer.getTime = function() {\n    return new Date(timer.now());\n  };\n\n  /**\n   * Get the value of the hypertimer. This function returns the result of getTime().\n   * @return {Date} current time\n   */\n  timer.valueOf = timer.getTime;\n\n  /**\n   * Return a string representation of the current hyper-time.\n   * @returns {string} String representation\n   */\n  timer.toString = function () {\n    return timer.getTime().toString();\n  };\n\n  /**\n   * Set a timeout, which is triggered when the timeout occurs in hyper-time.\n   * See also setTrigger.\n   * @param {Function} callback   Function executed when delay is exceeded.\n   * @param {number} delay        The delay in milliseconds. When the delay is\n   *                              smaller or equal to zero, the callback is\n   *                              triggered immediately.\n   * @return {number} Returns a timeoutId which can be used to cancel the\n   *                  timeout using clearTimeout().\n   */\n  timer.setTimeout = function(callback, delay) {\n    var id = idSeq++;\n    var timestamp = timer.now() + delay;\n    if (isNaN(timestamp)) {\n      throw new TypeError('delay must be a number');\n    }\n\n    // add a new timeout to the queue\n    _queueTimeout({\n      id: id,\n      type: TYPE.TIMEOUT,\n      time: timestamp,\n      callback: callback\n    });\n\n    // reschedule the timeouts\n    _schedule();\n\n    return id;\n  };\n\n  /**\n   * Set a trigger, which is triggered when the timeout occurs in hyper-time.\n   * See also getTimeout.\n   * @param {Function} callback   Function executed when timeout occurs.\n   * @param {Date | number | string } time\n   *                              An absolute moment in time (Date) when the\n   *                              callback will be triggered. When the date is\n   *                              a Date in the past, the callback is triggered\n   *                              immediately.\n   * @return {number} Returns a triggerId which can be used to cancel the\n   *                  trigger using clearTrigger().\n   */\n  timer.setTrigger = function (callback, time) {\n    var id = idSeq++;\n    var timestamp = toTimestamp(time);\n\n    // add a new timeout to the queue\n    _queueTimeout({\n      id: id,\n      type: TYPE.TRIGGER,\n      time: timestamp,\n      callback: callback\n    });\n\n    // reschedule the timeouts\n    _schedule();\n\n    return id;\n  };\n\n\n  /**\n   * Trigger a callback every interval. Optionally, a start date can be provided\n   * to specify the first time the callback must be triggered.\n   * See also setTimeout and setTrigger.\n   * @param {Function} callback         Function executed when delay is exceeded.\n   * @param {number} interval           Interval in milliseconds. When interval\n   *                                    is smaller than zero or is infinity, the\n   *                                    interval will be set to zero and triggered\n   *                                    with a maximum rate.\n   * @param {Date | number | string} [firstTime]\n   *                                    An absolute moment in time (Date) when the\n   *                                    callback will be triggered the first time.\n   *                                    By default, firstTime = now() + interval.\n   * @return {number} Returns a intervalId which can be used to cancel the\n   *                  trigger using clearInterval().\n   */\n  timer.setInterval = function(callback, interval, firstTime) {\n    var id = idSeq++;\n\n    var _interval = Number(interval);\n    if (isNaN(_interval)) {\n      throw new TypeError('interval must be a number');\n    }\n    if (_interval < 0 || !isFinite(_interval)) {\n      _interval = 0;\n    }\n\n    var _firstTime = (firstTime != undefined) ?\n        toTimestamp(firstTime) :\n        null;\n\n    var now = timer.now();\n    var _time = (_firstTime != null) ? _firstTime : (now + _interval);\n\n    var timeout = {\n      id: id,\n      type: TYPE.INTERVAL,\n      interval: _interval,\n      time: _time,\n      firstTime: _firstTime != null ? _firstTime : _time,\n      occurrence: 0,\n      callback: callback\n    };\n\n    if (_time < now) {\n      // update schedule when in the past\n      _rescheduleInterval(timeout, now);\n    }\n\n    // add a new timeout to the queue\n    _queueTimeout(timeout);\n\n    // reschedule the timeouts\n    _schedule();\n\n    return id;\n  };\n\n  /**\n   * Cancel a timeout\n   * @param {number} timeoutId   The id of a timeout\n   */\n  timer.clearTimeout = function(timeoutId) {\n    // test whether timeout is currently being executed\n    if (current[timeoutId]) {\n      delete current[timeoutId];\n      return;\n    }\n\n    // find the timeout in the queue\n    for (var i = 0; i < timeouts.length; i++) {\n      if (timeouts[i].id === timeoutId) {\n        // remove this timeout from the queue\n        timeouts.splice(i, 1);\n\n        // reschedule timeouts\n        _schedule();\n        break;\n      }\n    }\n  };\n\n  /**\n   * Cancel a trigger\n   * @param {number} triggerId   The id of a trigger\n   */\n  timer.clearTrigger = timer.clearTimeout;\n\n  timer.clearInterval = timer.clearTimeout;\n\n  /**\n   * Returns a list with the id's of all timeouts\n   * @returns {number[]} Timeout id's\n   */\n  timer.list = function () {\n    return timeouts.map(function (timeout) {\n      return timeout.id;\n    });\n  };\n\n  /**\n   * Clear all timeouts\n   */\n  timer.clear = function () {\n    // empty the queue\n    current = {};\n    timeouts = [];\n\n    // reschedule\n    _schedule();\n  };\n\n  /**\n   * Destroy the timer. This will clear all timeouts, and close connections\n   * to a master or to slave timers.\n   */\n  timer.destroy = function () {\n    timer.clear();\n    if (client) client.destroy();\n    if (server) server.destroy();\n  };\n\n  /**\n   * Get the current configuration\n   * @returns {{paced: boolean, rate: number, deterministic: boolean, time: *, master: *}}\n   *                Returns a copy of the current configuration\n   * @private\n   */\n  function _getConfig () {\n    return {\n      paced: paced,\n      rate: rate,\n      deterministic: deterministic,\n      time: configuredTime,\n      master: master,\n      port: port\n    }\n  }\n\n  /**\n   * Validate configuration, depending on the current mode: slave or normal\n   * @param {Object} options\n   * @private\n   */\n  function _validateConfig (options) {\n    // validate writable options\n    if (client || options.master) {\n      // when we are a slave, we can't adjust the config, except for\n      // changing the master url or becoming a master itself (port configured)\n      for (var prop in options) {\n        if (prop !== 'master' && prop !== 'slave') {\n          throw new Error('Cannot apply configuration option \"'  + prop +'\", timer is configured as slave.');\n        }\n      }\n    }\n  }\n\n  /**\n   * Change configuration\n   * @param {{paced: boolean, rate: number, deterministic: boolean, time: *, master: *}} options\n   * @private\n   */\n  function _setConfig(options) {\n    if ('deterministic' in options) {\n      deterministic = options.deterministic ? true : false;\n    }\n\n    if ('paced' in options) {\n      paced = options.paced ? true : false;\n    }\n\n    // important: apply time before rate\n    if ('time' in options) {\n      hyperTime = toTimestamp(options.time);\n      startTime = util.systemNow();\n\n      // update intervals\n      _rescheduleIntervals(hyperTime);\n\n      configuredTime = new Date(hyperTime).toISOString();\n    }\n\n    if ('rate' in options) {\n      var newRate = Number(options.rate);\n      if (isNaN(newRate) || newRate <= 0) {\n        throw new TypeError('Invalid rate ' + JSON.stringify(options.rate) + '. Rate must be a positive number');\n      }\n\n      // important: first get the new hyperTime, then adjust the startTime\n      hyperTime = timer.now();\n      startTime = util.systemNow();\n      rate = newRate;\n    }\n\n    if ('master' in options) {\n      // create a timesync slave, connect to master via a websocket\n      if (client) {\n        client.destroy();\n        client = null;\n      }\n\n      master = options.master;\n      if (options.master != null) {\n        client = createSlave(options.master);\n\n        function applyConfig(config) {\n          var prev = _getConfig();\n          _setConfig(config);\n          var curr = _getConfig();\n          timer.emit('config', curr, prev);\n        }\n\n        client.on('change', function (time)   { applyConfig({time: time}) });\n        client.on('config', function (config) { applyConfig(config) });\n        client.on('error',  function (err)    { timer.emit('error', err) });\n      }\n    }\n\n    // create a master\n    if ('port' in options) {\n      if (server) {\n        server.destroy();\n        server = null;\n      }\n\n      port = options.port;\n      if (options.port) {\n        server = createMaster(timer.now, timer.config, options.port);\n        server.on('error', function (err) { timer.emit('error', err) });\n      }\n    }\n\n    // reschedule running timeouts\n    _schedule();\n\n    if (server) {\n      // broadcast changed config\n      server.broadcastConfig();\n    }\n  }\n\n  /**\n   * Reschedule all intervals after a new time has been set.\n   * @param {number} now\n   * @private\n   */\n  function _rescheduleIntervals(now) {\n    for (var i = 0; i < timeouts.length; i++) {\n      var timeout = timeouts[i];\n      if (timeout.type === TYPE.INTERVAL) {\n        _rescheduleInterval(timeout, now);\n      }\n    }\n  }\n\n  /**\n   * Reschedule the intervals after a new time has been set.\n   * @param {Object} timeout\n   * @param {number} now\n   * @private\n   */\n  function _rescheduleInterval(timeout, now) {\n    timeout.occurrence = Math.round((now - timeout.firstTime) / timeout.interval);\n    timeout.time = timeout.firstTime + timeout.occurrence * timeout.interval;\n  }\n\n  /**\n   * Add a timeout to the queue. After the queue has been changed, the queue\n   * must be rescheduled by executing _reschedule()\n   * @param {{id: number, type: number, time: number, callback: Function}} timeout\n   * @private\n   */\n  function _queueTimeout(timeout) {\n    // insert the new timeout at the right place in the array, sorted by time\n    if (timeouts.length > 0) {\n      var i = timeouts.length - 1;\n      while (i >= 0 && timeouts[i].time > timeout.time) {\n        i--;\n      }\n\n      // insert the new timeout in the queue. Note that the timeout is\n      // inserted *after* existing timeouts with the exact *same* time,\n      // so the order in which they are executed is deterministic\n      timeouts.splice(i + 1, 0, timeout);\n    }\n    else {\n      // queue is empty, append the new timeout\n      timeouts.push(timeout);\n    }\n  }\n\n  /**\n   * Execute a timeout\n   * @param {{id: number, type: number, time: number, callback: function}} timeout\n   * @param {function} [callback]\n   *             The callback is executed when the timeout's callback is\n   *             finished. Called without parameters\n   * @private\n   */\n  function _execTimeout(timeout, callback) {\n    // store the timeout in the queue with timeouts in progress\n    // it can be cleared when a clearTimeout is executed inside the callback\n    current[timeout.id] = timeout;\n\n    function finish() {\n      // in case of an interval we have to reschedule on next cycle\n      // interval must not be cleared while executing the callback\n      if (timeout.type === TYPE.INTERVAL && current[timeout.id]) {\n        timeout.occurrence++;\n        timeout.time = timeout.firstTime + timeout.occurrence * timeout.interval;\n        _queueTimeout(timeout);\n        //console.log('queue timeout', timer.getTime().toISOString(), new Date(timeout.time).toISOString(), timeout.occurrence) // TODO: cleanup\n      }\n\n      // remove the timeout from the queue with timeouts in progress\n      delete current[timeout.id];\n\n      callback && callback();\n    }\n\n    // execute the callback\n    try {\n      if (timeout.callback.length == 0) {\n        // synchronous timeout,  like `timer.setTimeout(function () {...}, delay)`\n        timeout.callback();\n        finish();\n      } else {\n        // asynchronous timeout, like `timer.setTimeout(function (done) {...; done(); }, delay)`\n        timeout.callback(finish);\n      }\n    } catch (err) {\n      // emit or log the error\n      if (hasListeners(timer, 'error')) {\n        timer.emit('error', err);\n      }\n      else {\n        console.log('Error', err);\n      }\n\n      finish();\n    }\n  }\n\n  /**\n   * Remove all timeouts occurring before or on the provided time from the\n   * queue and return them.\n   * @param {number} time    A timestamp\n   * @returns {Array} returns an array containing all expired timeouts\n   * @private\n   */\n  function _getExpiredTimeouts(time) {\n    var i = 0;\n    while (i < timeouts.length && ((timeouts[i].time <= time) || !isFinite(timeouts[i].time))) {\n      i++;\n    }\n    var expired = timeouts.splice(0, i);\n\n    if (deterministic == false) {\n      // the array with expired timeouts is in deterministic order\n      // shuffle them\n      util.shuffle(expired);\n    }\n\n    return expired;\n  }\n\n  /**\n   * Reschedule all queued timeouts\n   * @private\n   */\n  function _schedule() {\n    // do not _schedule when there are timeouts in progress\n    // this can be the case with async timeouts in non-paced mode.\n    // _schedule will be executed again when all async timeouts are finished.\n    if (!paced && Object.keys(current).length > 0) {\n      return;\n    }\n\n    var next = timeouts[0];\n\n    // cancel timer when running\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n\n    if (running && next) {\n      // schedule next timeout\n      var time = next.time;\n      var delay = time - timer.now();\n      var realDelay = paced ? delay / rate : 0;\n\n      function onTimeout() {\n        // when running in non-paced mode, update the hyperTime to\n        // adjust the time of the current event\n        if (!paced) {\n          hyperTime = (time > hyperTime && isFinite(time)) ? time : hyperTime;\n        }\n\n        // grab all expired timeouts from the queue\n        var expired = _getExpiredTimeouts(time);\n        // note: expired.length can never be zero (on every change of the queue, we reschedule)\n\n        // execute all expired timeouts\n        if (paced) {\n          // in paced mode, we fire all timeouts in parallel,\n          // and don't await their completion (they can do async operations)\n          expired.forEach(function (timeout) {\n            _execTimeout(timeout);\n          });\n\n          // schedule the next round\n          _schedule();\n        }\n        else {\n          // in non-paced mode, we execute all expired timeouts serially,\n          // and wait for their completion in order to guarantee deterministic\n          // order of execution\n          function next() {\n            var timeout = expired.shift();\n            if (timeout) {\n              _execTimeout(timeout, next);\n            }\n            else {\n              // schedule the next round\n              _schedule();\n            }\n          }\n          next();\n        }\n      }\n\n      timeoutId = setTimeout(onTimeout, Math.round(realDelay));\n      // Note: Math.round(realDelay) is to defeat a bug in node.js v0.10.30,\n      //       see https://github.com/joyent/node/issues/8065\n    }\n  }\n\n  /**\n   * Convert a Date, number, or ISOString to a number timestamp,\n   * and validate whether it's a valid Date. The number Infinity is also\n   * accepted as a valid timestamp\n   * @param {Date | number | string} date\n   * @return {number} Returns a unix timestamp, a number\n   */\n  function toTimestamp(date) {\n    var value =\n        (typeof date === 'number') ? date :           // number\n        (date instanceof Date)     ? date.valueOf() : // Date\n        new Date(date).valueOf();                     // ISOString, momentjs, ...\n\n    if (isNaN(value)) {\n      throw new TypeError('Invalid date ' + JSON.stringify(date) + '. ' +\n          'Date, number, or ISOString expected');\n    }\n\n    return value;\n  }\n\n  Object.defineProperty(timer, 'running', {\n    get: function () {\n      return running;\n    }\n  });\n\n  timer.config(options);  // apply options\n  timer.continue();       // start the timer\n\n  return timer;\n}\n\nmodule.exports = hypertimer;\n\n},{\"./synchronization/master\":44,\"./synchronization/slave\":45,\"./util\":49,\"event-emitter\":38,\"event-emitter/has-listeners\":37}],43:[function(require,module,exports){\nmodule.exports = (typeof window === 'undefined' || typeof window.WebSocket === 'undefined') ?\n    require('ws') :\n    window.WebSocket;\n\n},{\"ws\":50}],44:[function(require,module,exports){\nvar WebSocket = require('./WebSocket');\nvar emitter = require('./socket-emitter');\nvar debug = require('../debug')('hypertimer:master');\n\nexports.createMaster = function (now, config, port) {\n  var master = new WebSocket.Server({port: port});\n\n  master.on('connection', function (ws) {\n    debug('new connection');\n\n    var _emitter = emitter(ws);\n\n    // ping timesync messages (for the timesync module)\n    _emitter.on('time', function (data, callback) {\n      var time = now();\n      callback(time);\n      debug('send time ' + new Date(time).toISOString());\n    });\n\n    // send the masters config to the new connection\n    var config = sanitizedConfig();\n    debug('send config', config);\n    _emitter.send('config', config);\n\n    ws.emitter = _emitter; // used by broadcast\n  });\n\n  master.broadcast = function (event, data) {\n    debug('broadcast', event, data);\n    master.clients.forEach(function (client) {\n      client.emitter.send(event, data);\n    });\n  };\n\n  master.broadcastConfig = function () {\n    master.broadcast('config', sanitizedConfig());\n  };\n\n  master.destroy = function() {\n    master.close();\n    debug('destroyed');\n  };\n\n  function sanitizedConfig() {\n    var curr = config();\n    delete curr.time;\n    delete curr.master;\n    delete curr.port;\n    return curr;\n  }\n\n  debug('listening at ws://localhost:' + port);\n\n  return master;\n};\n\n},{\"../debug\":41,\"./WebSocket\":43,\"./socket-emitter\":46}],45:[function(require,module,exports){\nvar WebSocket = require('./WebSocket');\nvar Promise = require('../Promise');\nvar debug = require('../debug')('hypertimer:slave');\nvar emitter = require('./socket-emitter');\nvar stat = require('./stat');\nvar util = require('./util');\n\n// TODO: make these constants configurable\nvar INTERVAL = 3600000; // once an hour\nvar DELAY = 1000;       // delay between individual requests\nvar REPEAT = 5;         // number of times to request the time for determining latency\n\nexports.createSlave = function (url) {\n  var ws = new WebSocket(url);\n  var slave = emitter(ws);\n  var isFirst = true;\n  var isDestroyed = false;\n  var syncTimer = null;\n\n  ws.onopen = function () {\n    debug('connected');\n    sync();\n    syncTimer = setInterval(sync, INTERVAL);\n  };\n\n  slave.destroy = function () {\n    isDestroyed = true;\n\n    clearInterval(syncTimer);\n    syncTimer = null;\n\n    ws.close();\n\n    debug('destroyed');\n  };\n\n  /**\n   * Sync with the time of the master. Emits a 'change' message\n   * @private\n   */\n  function sync() {\n    // retrieve latency, then wait 1 sec\n    function getLatencyAndWait() {\n      var result = null;\n\n      if (isDestroyed) {\n        return Promise.resolve(result);\n      }\n\n      return getLatency(slave)\n          .then(function (latency) { result = latency })  // store the retrieved latency\n          .catch(function (err)    { console.log(err) })  // just log failed requests\n          .then(function () { return util.wait(DELAY) })  // wait 1 sec\n          .then(function () { return result});            // return the retrieved latency\n    }\n\n    return util\n        .repeat(getLatencyAndWait, REPEAT)\n        .then(function (all) {\n          debug('latencies', all);\n\n          // filter away failed requests\n          var latencies = all.filter(function (latency) {\n            return latency !== null;\n          });\n\n          // calculate the limit for outliers\n          var limit = stat.median(latencies) + stat.std(latencies);\n\n          // filter away outliers: all latencies largereq than the mean+std\n          var filtered = latencies.filter(function (latency) {\n            return latency < limit;\n          });\n\n          // return the mean latency\n          return (filtered.length > 0) ? stat.mean(filtered) : null;\n        })\n        .then(function (latency) {\n          if (isDestroyed) {\n            return Promise.resolve(null);\n          }\n          else {\n            return slave.request('time').then(function (timestamp) {\n              var time = timestamp + latency;\n              slave.emit('change', time);\n              return time;\n            });\n          }\n        })\n        .catch(function (err) {\n          slave.emit('error', err)\n        });\n  }\n\n  /**\n   * Request the time of the master and calculate the latency from the\n   * roundtrip time\n   * @param {{request: function}} emitter\n   * @returns {Promise.<number | null>} returns the latency\n   * @private\n   */\n  function getLatency(emitter) {\n    var start = Date.now();\n\n    return emitter.request('time')\n        .then(function (timestamp) {\n          var end = Date.now();\n          var latency = (end - start) / 2;\n          var time = timestamp + latency;\n\n          // apply the first ever retrieved offset immediately.\n          if (isFirst) {\n            isFirst = false;\n            emitter.emit('change', time);\n          }\n\n          return latency;\n        })\n  }\n\n  return slave;\n};\n\n\n},{\"../Promise\":40,\"../debug\":41,\"./WebSocket\":43,\"./socket-emitter\":46,\"./stat\":47,\"./util\":48}],46:[function(require,module,exports){\n// Turn a WebSocket in an event emitter.\nvar eventEmitter = require('event-emitter');\nvar Promise = require('./../Promise');\nvar debug = require('../debug')('hypertimer:socket');\n\nvar TIMEOUT = 60000; // ms\n// TODO: make timeout a configuration setting\n\nmodule.exports = function (socket) {\n  var emitter = eventEmitter({\n    socket: socket,\n    send: send,\n    request: request\n  });\n\n  /**\n   * Send an event\n   * @param {string} event\n   * @param {*} data\n   */\n  function send (event, data) {\n    var envelope = {\n      event: event,\n      data: data\n    };\n    debug('send', envelope);\n    socket.send(JSON.stringify(envelope));\n  }\n\n  /**\n   * Request an event, await a response\n   * @param {string} event\n   * @param {*} data\n   * @return {Promise} Returns a promise which resolves with the reply\n   */\n  function request (event, data) {\n    return new Promise(function (resolve, reject) {\n      // put the data in an envelope with id\n      var id = getId();\n      var envelope = {\n        event: event,\n        id: id,\n        data: data\n      };\n\n      // add the request to the list with requests in progress\n      queue[id] = {\n        resolve: resolve,\n        reject: reject,\n        timeout: setTimeout(function () {\n          delete queue[id];\n          reject(new Error('Timeout'));\n        }, TIMEOUT)\n      };\n\n      debug('request', envelope);\n      socket.send(JSON.stringify(envelope));\n    }).catch(function (err) {console.log('ERROR', err)});\n  }\n\n  /**\n   * Event handler, handles incoming messages\n   * @param {Object} event\n   */\n  socket.onmessage = function (event) {\n    var data = event.data;\n    var envelope = JSON.parse(data);\n    debug('receive', envelope);\n\n    // match the request from the id in the response\n    var request = queue[envelope.id];\n    if (request) {\n      // incoming response\n      clearTimeout(request.timeout);\n      delete queue[envelope.id];\n      request.resolve(envelope.data);\n    }\n    else if ('id' in envelope) {\n      // incoming request\n      emitter.emit(envelope.event, envelope.data, function (reply) {\n        var response = {\n          id: envelope.id,\n          data: reply\n        };\n\n        if (socket.readyState === socket.OPEN || socket.readyState === socket.CONNECTING) {\n          debug('reply', response);\n          socket.send(JSON.stringify(response));\n        }\n        else {\n          debug('cancel reply', response, '(socket is closed)');\n        }\n      });\n    }\n    else {\n      // regular incoming message\n      emitter.emit(envelope.event, envelope.data);\n    }\n  };\n\n  var queue = {};   // queue with requests in progress\n\n  // get a unique id (simple counter)\n  function getId () {\n    return _id++;\n  }\n  var _id = 0;\n\n  return emitter;\n};\n\n},{\"../debug\":41,\"./../Promise\":40,\"event-emitter\":38}],47:[function(require,module,exports){\n// basic statistical functions\n\nexports.compare = function (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n};\n\nexports.add = function (a, b) {\n  return a + b;\n};\n\nexports.sum = function (arr) {\n  return arr.reduce(exports.add);\n};\n\nexports.mean = function (arr) {\n  return exports.sum(arr) / arr.length;\n};\n\nexports.std = function (arr) {\n  return Math.sqrt(exports.variance(arr));\n};\n\nexports.variance = function (arr) {\n  if (arr.length < 2) return 0;\n\n  var _mean = exports.mean(arr);\n  return arr\n          .map(function (x) {\n            return Math.pow(x - _mean, 2)\n          })\n          .reduce(exports.add) / (arr.length - 1);\n};\n\nexports.median = function (arr) {\n  if (arr.length < 2) return arr[0];\n\n  var sorted = arr.slice().sort(exports.compare);\n  if (sorted.length % 2 === 0) {\n    // even\n    return (arr[arr.length / 2 - 1] + arr[arr.length / 2]) / 2;\n  }\n  else {\n    // odd\n    return arr[(arr.length - 1) / 2];\n  }\n};\n\n},{}],48:[function(require,module,exports){\nvar Promise = require('../Promise');\n\n/**\n * Resolve a promise after a delay\n * @param {number} delay    A delay in milliseconds\n * @returns {Promise} Resolves after given delay\n */\nexports.wait = function(delay) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, delay);\n  });\n};\n\n/**\n * Repeat a given asynchronous function a number of times\n * @param {function} fn   A function returning a promise\n * @param {number} times\n * @return {Promise}\n */\nexports.repeat = function (fn, times) {\n  return new Promise(function (resolve, reject) {\n    var count = 0;\n    var results = [];\n\n    function recurse() {\n      if (count < times) {\n        count++;\n        fn().then(function (result) {\n          results.push(result);\n          recurse();\n        })\n      }\n      else {\n        resolve(results);\n      }\n    }\n\n    recurse();\n  });\n};\n\n/**\n * Repeat an asynchronous callback function whilst\n * @param {function} condition   A function returning true or false\n * @param {function} callback    A callback returning a Promise\n * @returns {Promise}\n */\nexports.whilst = function (condition, callback) {\n  return new Promise(function (resolve, reject) {\n    function recurse() {\n      if (condition()) {\n        callback().then(function () {\n          recurse()\n        });\n      }\n      else {\n        resolve();\n      }\n    }\n\n    recurse();\n  });\n};\n\n},{\"../Promise\":40}],49:[function(require,module,exports){\n\n/* istanbul ignore else */\nif (typeof Date.now === 'function') {\n  /**\n   * Helper function to get the current time\n   * @return {number} Current time\n   */\n  exports.systemNow = function () {\n    return Date.now();\n  }\n}\nelse {\n  /**\n   * Helper function to get the current time\n   * @return {number} Current time\n   */\n  exports.systemNow = function () {\n    return new Date().valueOf();\n  }\n}\n\n/**\n * Shuffle an array\n *\n * + Jonas Raoni Soares Silva\n * @ http://jsfromhell.com/array/shuffle [v1.0]\n *\n * @param {Array} o   Array to be shuffled\n * @returns {Array}   Returns the shuffled array\n */\nexports.shuffle = function (o){\n  for(var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);\n  return o;\n};\n\n},{}],50:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n\n},{}],51:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n\n},{}],52:[function(require,module,exports){\n'use strict';\n\nmodule.exports = require('./lib')\n\n},{\"./lib\":57}],53:[function(require,module,exports){\n'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._U = 0;\n  this._V = 0;\n  this._W = null;\n  this._X = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._Y = null;\nPromise._Z = null;\nPromise._0 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._V === 3) {\n    self = self._W;\n  }\n  if (Promise._Y) {\n    Promise._Y(self);\n  }\n  if (self._V === 0) {\n    if (self._U === 0) {\n      self._U = 1;\n      self._X = deferred;\n      return;\n    }\n    if (self._U === 1) {\n      self._U = 2;\n      self._X = [self._X, deferred];\n      return;\n    }\n    self._X.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._V === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._V === 1) {\n        resolve(deferred.promise, self._W);\n      } else {\n        reject(deferred.promise, self._W);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._W);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._V = 3;\n      self._W = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._V = 1;\n  self._W = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._V = 2;\n  self._W = newValue;\n  if (Promise._Z) {\n    Promise._Z(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._U === 1) {\n    handle(self, self._X);\n    self._X = null;\n  }\n  if (self._U === 2) {\n    for (var i = 0; i < self._X.length; i++) {\n      handle(self, self._X[i]);\n    }\n    self._X = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n},{\"asap/raw\":9}],54:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype.done = function (onFulfilled, onRejected) {\n  var self = arguments.length ? this.then.apply(this, arguments) : this;\n  self.then(null, function (err) {\n    setTimeout(function () {\n      throw err;\n    }, 0);\n  });\n};\n\n},{\"./core.js\":53}],55:[function(require,module,exports){\n'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._0);\n  p._V = 1;\n  p._W = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nvar iterableToArray = function (iterable) {\n  if (typeof Array.from === 'function') {\n    // ES2015+, iterables exist\n    iterableToArray = Array.from;\n    return Array.from(iterable);\n  }\n\n  // ES5, only arrays and array-likes exist\n  iterableToArray = function (x) { return Array.prototype.slice.call(x); };\n  return Array.prototype.slice.call(iterable);\n}\n\nPromise.all = function (arr) {\n  var args = iterableToArray(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._V === 3) {\n            val = val._W;\n          }\n          if (val._V === 1) return res(i, val._W);\n          if (val._V === 2) reject(val._W);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    iterableToArray(values).forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n},{\"./core.js\":53}],56:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype.finally = function (f) {\n  return this.then(function (value) {\n    return Promise.resolve(f()).then(function () {\n      return value;\n    });\n  }, function (err) {\n    return Promise.resolve(f()).then(function () {\n      throw err;\n    });\n  });\n};\n\n},{\"./core.js\":53}],57:[function(require,module,exports){\n'use strict';\n\nmodule.exports = require('./core.js');\nrequire('./done.js');\nrequire('./finally.js');\nrequire('./es6-extensions.js');\nrequire('./node-extensions.js');\nrequire('./synchronous.js');\n\n},{\"./core.js\":53,\"./done.js\":54,\"./es6-extensions.js\":55,\"./finally.js\":56,\"./node-extensions.js\":58,\"./synchronous.js\":59}],58:[function(require,module,exports){\n'use strict';\n\n// This file contains then/promise specific extensions that are only useful\n// for node.js interop\n\nvar Promise = require('./core.js');\nvar asap = require('asap');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nPromise.denodeify = function (fn, argumentCount) {\n  if (\n    typeof argumentCount === 'number' && argumentCount !== Infinity\n  ) {\n    return denodeifyWithCount(fn, argumentCount);\n  } else {\n    return denodeifyWithoutCount(fn);\n  }\n};\n\nvar callbackFn = (\n  'function (err, res) {' +\n  'if (err) { rj(err); } else { rs(res); }' +\n  '}'\n);\nfunction denodeifyWithCount(fn, argumentCount) {\n  var args = [];\n  for (var i = 0; i < argumentCount; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'return new Promise(function (rs, rj) {',\n    'var res = fn.call(',\n    ['self'].concat(args).concat([callbackFn]).join(','),\n    ');',\n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n  return Function(['Promise', 'fn'], body)(Promise, fn);\n}\nfunction denodeifyWithoutCount(fn) {\n  var fnLength = Math.max(fn.length - 1, 3);\n  var args = [];\n  for (var i = 0; i < fnLength; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'var args;',\n    'var argLength = arguments.length;',\n    'if (arguments.length > ' + fnLength + ') {',\n    'args = new Array(arguments.length + 1);',\n    'for (var i = 0; i < arguments.length; i++) {',\n    'args[i] = arguments[i];',\n    '}',\n    '}',\n    'return new Promise(function (rs, rj) {',\n    'var cb = ' + callbackFn + ';',\n    'var res;',\n    'switch (argLength) {',\n    args.concat(['extra']).map(function (_, index) {\n      return (\n        'case ' + (index) + ':' +\n        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +\n        'break;'\n      );\n    }).join(''),\n    'default:',\n    'args[argLength] = cb;',\n    'res = fn.apply(self, args);',\n    '}',\n    \n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n\n  return Function(\n    ['Promise', 'fn'],\n    body\n  )(Promise, fn);\n}\n\nPromise.nodeify = function (fn) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    var callback =\n      typeof args[args.length - 1] === 'function' ? args.pop() : null;\n    var ctx = this;\n    try {\n      return fn.apply(this, arguments).nodeify(callback, ctx);\n    } catch (ex) {\n      if (callback === null || typeof callback == 'undefined') {\n        return new Promise(function (resolve, reject) {\n          reject(ex);\n        });\n      } else {\n        asap(function () {\n          callback.call(ctx, ex);\n        })\n      }\n    }\n  }\n};\n\nPromise.prototype.nodeify = function (callback, ctx) {\n  if (typeof callback != 'function') return this;\n\n  this.then(function (value) {\n    asap(function () {\n      callback.call(ctx, null, value);\n    });\n  }, function (err) {\n    asap(function () {\n      callback.call(ctx, err);\n    });\n  });\n};\n\n},{\"./core.js\":53,\"asap\":8}],59:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.enableSynchronous = function () {\n  Promise.prototype.isPending = function() {\n    return this.getState() == 0;\n  };\n\n  Promise.prototype.isFulfilled = function() {\n    return this.getState() == 1;\n  };\n\n  Promise.prototype.isRejected = function() {\n    return this.getState() == 2;\n  };\n\n  Promise.prototype.getValue = function () {\n    if (this._V === 3) {\n      return this._W.getValue();\n    }\n\n    if (!this.isFulfilled()) {\n      throw new Error('Cannot get a value of an unfulfilled promise.');\n    }\n\n    return this._W;\n  };\n\n  Promise.prototype.getReason = function () {\n    if (this._V === 3) {\n      return this._W.getReason();\n    }\n\n    if (!this.isRejected()) {\n      throw new Error('Cannot get a rejection reason of a non-rejected promise.');\n    }\n\n    return this._W;\n  };\n\n  Promise.prototype.getState = function () {\n    if (this._V === 3) {\n      return this._W.getState();\n    }\n    if (this._V === -1 || this._V === -2) {\n      return 0;\n    }\n\n    return this._V;\n  };\n};\n\nPromise.disableSynchronous = function() {\n  Promise.prototype.isPending = undefined;\n  Promise.prototype.isFulfilled = undefined;\n  Promise.prototype.isRejected = undefined;\n  Promise.prototype.getValue = undefined;\n  Promise.prototype.getReason = undefined;\n  Promise.prototype.getState = undefined;\n};\n\n},{\"./core.js\":53}],60:[function(require,module,exports){\n(function (global){(function (){\n'use strict';\r\n\r\nvar width = 256;// each RC4 output is 0 <= x < 256\r\nvar chunks = 6;// at least six RC4 outputs for each double\r\nvar digits = 52;// there are 52 significant digits in a double\r\nvar pool = [];// pool: entropy pool starts empty\r\nvar GLOBAL = typeof global === 'undefined' ? window : global;\r\n\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\nvar startdenom = Math.pow(width, chunks),\r\n    significance = Math.pow(2, digits),\r\n    overflow = significance * 2,\r\n    mask = width - 1;\r\n\r\n\r\nvar oldRandom = Math.random;\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\nmodule.exports = function(seed, options) {\r\n  if (options && options.global === true) {\r\n    options.global = false;\r\n    Math.random = module.exports(seed, options);\r\n    options.global = true;\r\n    return Math.random;\r\n  }\r\n  var use_entropy = (options && options.entropy) || false;\r\n  var key = [];\r\n\r\n  // Flatten the seed string or build one from local entropy if needed.\r\n  var shortseed = mixkey(flatten(\r\n    use_entropy ? [seed, tostring(pool)] :\r\n    0 in arguments ? seed : autoseed(), 3), key);\r\n\r\n  // Use the seed to initialize an ARC4 generator.\r\n  var arc4 = new ARC4(key);\r\n\r\n  // Mix the randomness into accumulated entropy.\r\n  mixkey(tostring(arc4.S), pool);\r\n\r\n  // Override Math.random\r\n\r\n  // This function returns a random double in [0, 1) that contains\r\n  // randomness in every bit of the mantissa of the IEEE 754 value.\r\n\r\n  return function() {         // Closure to return a random double:\r\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n        x = 0;                          //   and no 'extra last byte'.\r\n    while (n < significance) {          // Fill up all significant digits by\r\n      n = (n + x) * width;              //   shifting numerator and\r\n      d *= width;                       //   denominator and generating a\r\n      x = arc4.g(1);                    //   new least-significant-byte.\r\n    }\r\n    while (n >= overflow) {             // To avoid rounding up, before adding\r\n      n /= 2;                           //   last byte, shift everything\r\n      d /= 2;                           //   right using integer Math until\r\n      x >>>= 1;                         //   we have exactly the desired bits.\r\n    }\r\n    return (n + x) / d;                 // Form the number within [0, 1).\r\n  };\r\n};\r\n\r\nmodule.exports.resetGlobal = function () {\r\n  Math.random = oldRandom;\r\n};\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n/** @constructor */\r\nfunction ARC4(key) {\r\n  var t, keylen = key.length,\r\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n  // The empty key [] is treated as [0].\r\n  if (!keylen) { key = [keylen++]; }\r\n\r\n  // Set up S using the standard key scheduling algorithm.\r\n  while (i < width) {\r\n    s[i] = i++;\r\n  }\r\n  for (i = 0; i < width; i++) {\r\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n    s[j] = t;\r\n  }\r\n\r\n  // The \"g\" method returns the next (count) outputs as one number.\r\n  (me.g = function(count) {\r\n    // Using instance members instead of closure state nearly doubles speed.\r\n    var t, r = 0,\r\n        i = me.i, j = me.j, s = me.S;\r\n    while (count--) {\r\n      t = s[i = mask & (i + 1)];\r\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n    }\r\n    me.i = i; me.j = j;\r\n    return r;\r\n    // For robust unpredictability discard an initial batch of values.\r\n    // See http://www.rsa.com/rsalabs/node.asp?id=2009\r\n  })(width);\r\n}\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\nfunction flatten(obj, depth) {\r\n  var result = [], typ = (typeof obj)[0], prop;\r\n  if (depth && typ == 'o') {\r\n    for (prop in obj) {\r\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n    }\r\n  }\r\n  return (result.length ? result : typ == 's' ? obj : obj + '\\0');\r\n}\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\nfunction mixkey(seed, key) {\r\n  var stringseed = seed + '', smear, j = 0;\r\n  while (j < stringseed.length) {\r\n    key[mask & j] =\r\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n  }\r\n  return tostring(key);\r\n}\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto if available.\r\n//\r\n/** @param {Uint8Array=} seed */\r\nfunction autoseed(seed) {\r\n  try {\r\n    GLOBAL.crypto.getRandomValues(seed = new Uint8Array(width));\r\n    return tostring(seed);\r\n  } catch (e) {\r\n    return [+new Date, GLOBAL, GLOBAL.navigator && GLOBAL.navigator.plugins,\r\n            GLOBAL.screen, tostring(pool)];\r\n  }\r\n}\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\nfunction tostring(a) {\r\n  return String.fromCharCode.apply(0, a);\r\n}\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to intefere with determinstic PRNG state later,\r\n// seedrandom will not call Math.random on its own again after\r\n// initialization.\r\n//\r\nmixkey(Math.random(), pool);\r\n\n}).call(this)}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],61:[function(require,module,exports){\n\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n\n},{\"../prototype/is\":64}],62:[function(require,module,exports){\n\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n\n},{\"../value/is\":65}],63:[function(require,module,exports){\n\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n\n},{\"../function/is\":61}],64:[function(require,module,exports){\n\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n\n},{\"../object/is\":62}],65:[function(require,module,exports){\n\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n\n},{}],66:[function(require,module,exports){\n\nexports = module.exports = function() {\n\tvar ret = '', value;\n\tfor (var i = 0; i < 32; i++) {\n\t\tvalue = exports.random() * 16 | 0;\n\t\t// Insert the hypens\n\t\tif (i > 4 && i < 21 && ! (i % 4)) {\n\t\t\tret += '-';\n\t\t}\n\t\t// Add the next random character\n\t\tret += (\n\t\t\t(i === 12) ? 4 : (\n\t\t\t\t(i === 16) ? (value & 3 | 8) : value\n\t\t\t)\n\t\t).toString(16);\n\t}\n\treturn ret;\n};\n\nvar uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;\nexports.isUUID = function(uuid) {\n\treturn uuidRegex.test(uuid);\n};\n\nexports.random = function() {\n\treturn Math.random();\n};\n\n\n},{}]},{},[28])(28)\n});\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// this.options = agent properties\n// vue lifecycle https://v3.vuejs.org/api/options-lifecycle-hooks.html#beforecreate\n// js object lifecycle https://www.coursera.org/lecture/javascript-jquery-json/javascript-object-life-cycle-4pedI\nconst { v4: uuidv4 } = require('uuid');\n\nlet schema = {\n  \"@context\": {\n    \"@vocab\": \"https://www.w3.org/ns/activitystreams\",\n    \"as\": \"https://www.w3.org/ns/activitystreams\",\n    \"ve\": \"https://scenaristeur.github.io/verse/\",\n    \"@id\": \"id\",\n    \"@type\": \"type\"\n  },\n  \"ve:name\":'',\n  \"type\": \"agent\",\n  \"ve:age\": -1 ,\n  \"ve:properties\": [],\n  \"ve:tags\": ''\n  //  \"ve:privacy\": 'private',\n\n}\n\n\nclass Agent{\n\n  constructor(options = {}){\n    //this.env = window.env || {}\n    this.options = options ;\n    this.id == undefined ? this.id = uuidv4() : \"\"\n    this.name = this.options.name || this.id\n    this.data = schema\n    this.data['as:created'] = Date.now()\n    //  console.log(\"construct\", this.options)\n    if (options.debug == true){this.debug()}\n    //this.send('env',{action:'addAgent', value:this})\n    if(window.env != undefined){\n      window.env.pushAgent(this)\n    }else{\n      console.log(\"can not add to env\", this)\n    }\n\n  }\n  save(data){\n    console.log(\"saving\", data)\n    window.env.save(data)\n  }\n\n  send(to, message){\n    let from = {id: this.id, name: this.name}\n    console.log(\"SEND\",\"from\",from, \"to\",to, message)\n  }\n\n  debug(){\n    console.log(\"--- DEBUG --- props : \",this.options)\n    console.log(\"--- DEBUG --- data : \",this.data)\n  }\n\n  print(){\n    console.log(\"--printing props : \",this.options, this.data)\n  }\n\n  log(text){\n    console.log('-----log--- ',text)\n  }\n\n  async wait (str, callback){\n    let name = this.options.name\n    setTimeout(function() {\n      str+= \" \"+name\n      callback(str);\n    }, 3000);\n  }\n  alert(){\n    alert(JSON.stringify(this.data, null, 2))\n  }\n\n\n}\nmodule.exports = Agent;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n$({ global: true }, { Reflect: {} });\n\n// Reflect[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-reflect-@@tostringtag\nsetToStringTag(global.Reflect, 'Reflect', true);\n","var Agent = require('../agent');\n\nlet agents = []\n// let schema = {\n//   \"ve:type\": {\"@id\": \"ve:tension\"},\n//   \"ve:wi\" : 'what is ?',\n//   \"ve:wsb\": 'test in root and in properties',\n//   \"ve:proposition\": '',\n// }\n\nlet props = [\n  {\"name\": 've:type', \"value\": \"virtual\"},\n  {\"name\": 've:size', \"value\": \"unlinmited\"},\n  // {\"name\": 've:wsb', \"value\": \"What should be in prop ?\"},\n  // {\"name\": 've:proposition', \"value\": \"What is in prop ?\"},\n]\n\nclass Environnement extends Agent {\n\n  constructor(options){\n    super(options);\n    //window.env = this// this is required\n    // this.data = Object.assign(this.data, schema);\n    this.data['ve:properties'] = Object.assign(this.data['ve:properties'], props);\n    console.log(this.data);\n    window.env = this\n  }\n\n  pushAgent(a){\n    agents.push(a)\n    this.updateEnv()\n  }\n  removeAgentByName(name){\n    agents = agents.filter(x => {return x.name != name})\n    this.updateEnv()\n  }\n  getAgents(){\n    return agents\n  }\n  async save(item){\n    console.log(\"must save item\", item)\n    if(this.options.type.toLowerCase() == \"vue2\"){\n      await this.options.store.dispatch('local/saveItem', item)\n      await this.options.store.dispatch('local/getItems', item)\n    }\n  }\n\n  updateEnv(){\n    if(this.options.type.toLowerCase() == \"vue2\"){\n      this.options.store.commit('sma/setAgents', agents)\n    }\n  }\n\n}\nmodule.exports = Environnement;\n"],"sourceRoot":""}