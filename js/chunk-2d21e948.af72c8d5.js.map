{"version":3,"sources":["webpack:///./src/components/items/Item.vue?a409","webpack:///./src/agents/PodAgent.js","webpack:///src/components/items/Item.vue","webpack:///./src/components/items/Item.vue?d23f","webpack:///./src/components/items/Item.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","item","attrs","on","$event","$emit","domProps","undefined","putOnline","staticRenderFns","PodAgent","id","eve","call","extend","count","connect","transports","getAll","prototype","Object","create","constructor","sayHello","to","send","receive","from","message","console","log","JSON","stringify","retour","mess","type","action","Vue","$getResource","file","$updateFile","name","props","components","created","agent3","HelloAgent","agent4","podAgent1","methods","content","url","request","reply","component"],"mappings":"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","file":"js/chunk-2d21e948.af72c8d5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',[_c('b-card-title',[_vm._v(_vm._s(_vm.item['ve:name']))]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.$emit('delete',_vm.item)}}},[_vm._v(\"Delete\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$emit('edit',_vm.item)}}},[_vm._v(\"Edit\")]),_vm._v(\" \"+_vm._s(_vm.item['ve:age'])+\" \"),_c('b-card-header',[_c('b',[_vm._v(\"What is : \")]),_vm._v(\" \"+_vm._s(_vm.item['ve:wi'])+\" \"),_c('hr'),_c('b',[_vm._v(\"What should be: \")]),_vm._v(_vm._s(_vm.item['ve:wsb'])+\" \")]),_c('b-card-text',[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.item['ve:proposition'])}})]),_c('b-card-footer',[(_vm.item['ve:url'] != undefined)?_c('span',[_vm._v(\"remote\")]):_c('span',[_c('b-button',{on:{\"click\":_vm.putOnline}},[_vm._v(\"local\")])],1)]),_c('Properties',{attrs:{\"item\":_vm.item}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// var eve = require('evejs');\nimport Vue from 'vue'\nimport * as eve from  'evejs/dist/eve.custom-request.js';\n\nexport function PodAgent(id) {\n  // execute super constructor\n  eve.Agent.call(this, id);\n  this.extend('request');\n  this.count = 0\n\n  // connect to all transports configured by the system\n  this.connect(eve.system.transports.getAll());\n}\n\n// extend the eve.Agent prototype\nPodAgent.prototype = Object.create(eve.Agent.prototype);\nPodAgent.prototype.constructor = PodAgent;\n\nPodAgent.prototype.sayHello = function(to) {\n  this.send(to, 'Hello ' + to + '!');\n};\n\nPodAgent.prototype.receive = async function(from, message) {\n  console.log(\"POD : \"+from + ' said: ' + JSON.stringify(message));\n  // document.write(from + ' said: ' + JSON.stringify(message) + '<br>');\n  let retour = {}\n  try{\n    let mess = message\n    if (message.type == \"request\"){\n      mess = message.message\n    }\n    if (mess.action == \"read\"){\n      let file = await Vue.prototype.$getResource(mess)\n      retour = file\n    }else if (mess.action == \"create\"){\n      let file = await Vue.prototype.$updateFile(mess)\n      retour = file\n    }else{\n      retour = \"i don't understand\"\n    }\n\n  }catch(e){\n    console.log(e)\n    retour = e\n  }\n\n  return retour\n  // let url = message.url\n  // if (message.type == \"request\"){\n  //   url = message.message.url\n  // }\n  // let resources = await Vue.prototype.$getResources(url)\n  // console.log(\"$getResources\", resources)\n  // return {resources: resources};\n  //return {resources: resources}\n  // for (const r of resources){\n  //   console.log(r)\n  //   if (r.type == \"folder\"){\n  //     r.resources = await Vue.prototype.$getResources(r.url)\n  //   }\n  // }\n  //let resources = await getResources(message)\n  //if (message.indexOf('Hello') === 0) {\n  // reply to the greeting\n  //  this.send(from, {resources: resources});\n\n  // }else{\n  //   if(this.count <10)\n  //   {\n  //     this.count ++\n  //     this.send(from, 'Hi ' + from + 'my count is '+this.count );\n  //   }\n  // }\n};\n\n// async function getResources(r){\n//   r.resources = await Vue.prototype.$getResources(r.url)\n//   for (const (i, res) in r.resources){\n//     let res  = r.resources[i]\n//\n//     if (res.type == \"folder\"){\n//       console.log(res.url)\n//       res.resources = await getResources(res)\n//     }\n//   }\n//   console.log(r)\n//   return r\n//\n// }\n","<template>\n  <b-card>\n    <b-card-title>{{item['ve:name']}}</b-card-title>\n    <b-button size=\"sm\" variant=\"danger\" @click=\"$emit('delete',item)\">Delete</b-button>\n    <b-button size=\"sm\" @click=\"$emit('edit',item)\">Edit</b-button>\n    <!-- <a :href=\"'https://scenaristeur.github.io/verse?source='+item['ve:url']\" target=\"_blank\">\n    <b-button size=\"sm\" variant=\"outline-primary\">\n    <b-icon icon=\"share-fill\" aria-label=\"Share\"></b-icon>\n  </b-button>\n</a> -->\n{{item['ve:age']}}\n<b-card-header>\n  <b>What is :       </b> {{item['ve:wi']}}\n  <hr>\n  <b>What should be: </b>{{item['ve:wsb']}}\n</b-card-header>\n\n\n<b-card-text>\n  <div v-html=\"item['ve:proposition']\">\n  </div>\n</b-card-text>\n\n<b-card-footer>\n  <span v-if=\"item['ve:url'] != undefined\">remote</span><span v-else><b-button @click=\"putOnline\">local</b-button></span>\n  <!-- [[dendrites- watch]]{{node.modele}}[[axione - send]] -->\n</b-card-footer>\n<Properties :item=\"item\" />\n</b-card>\n</template>\n\n<!-- title=\"Card Title\"\nimg-src=\"https://picsum.photos/600/300/?image=25\"\nimg-alt=\"Image\"\nimg-top\ntag=\"article\"\nstyle=\"max-width: 20rem;\"\nclass=\"mb-2\" -->\n<script>\n\nimport { PodAgent } from '@/agents/PodAgent.js';\n\nimport { HelloAgent } from '@/agents/HelloAgent.js';\n\n\nexport default {\n  name: \"Item\",\n  props: ['item'],\n  components: {\n    'Properties': () => import('@/components/items/Properties'),\n  },\n  created(){\n    // this.agentItem = new HelloAgent('agentItem');\n    //  this.podAgent1 = new PodAgent('podAgent1');\n    this.agent3 = new HelloAgent('agent3');\n    this.agent4 = new HelloAgent();\n    this.podAgent1 = new PodAgent();\n    console.log(\"PODAGENT\",this.podAgent1)\n  },\n  methods:{\n    putOnline(){\n      console.log(this.item)\n      let app = this\n      //  console.log(this.agentItem, this.podAgent1)\n      try{\n        //  this.agentItem.send('subscribe1', \"hello\")\n\n        // send a message to agent1\n        //this.agent4.send('agent3', 'Hello agent3!, a basic send')\n        let message = {\n          action: \"create\",\n          content : JSON.stringify(this.item, null, 2),\n          file: {type: 'application/ld+json'},\n          url: 'https://agora.solidcommunity.net/public/blackboard/'+this.item.id\n\n\n        }\n        this.agent4.request(this.podAgent1.id, message)\n        // this.agent4.request('agent3', 'Hello agent1! a request')\n        .then(function(reply) {\n          console.log('reply: ', reply);\n          try{\n          console.log(reply.internal_resourceInfo.sourceIri)\n          app.item['ve:url'] = reply.internal_resourceInfo.sourceIri\n        }catch(e){\n          console.log(e)\n        }\n        });\n      }catch(e){\n        console.log(\"e\",e)\n      }\n      // this.agentItem.request('subscribe1', this.item).then(function(reply) {\n      //   console.log('reply from pod: ' + reply);\n      // });\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Item.vue?vue&type=template&id=2cfe5d6a&\"\nimport script from \"./Item.vue?vue&type=script&lang=js&\"\nexport * from \"./Item.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}