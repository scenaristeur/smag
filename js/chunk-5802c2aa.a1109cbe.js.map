{"version":3,"sources":["webpack:///./src/views/sharing/NewNote.vue?7251","webpack:///src/views/sharing/NewNote.vue","webpack:///./src/views/sharing/NewNote.vue?3f75","webpack:///./src/views/sharing/NewNote.vue","webpack:///./node_modules/core-js/modules/es.string.starts-with.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","note","callback","$$v","$set","expression","_e","ref","text_placeholder","on","$event","inputFocus","tags","autocompleteItems","update","tag","add","_v","clean","share","staticRenderFns","name","components","data","debounce","cardActive","checked1","created","language","navigator","split","initForm","$route","query","methods","undefined","pod","webId","n","$store","dispatch","alert","$router","push","currentNote","q","title","text","url","JSON","parse","console","log","topic","newTags","watch","to","$refs","focus","computed","state","solid","get","set","component","$","uncurryThis","getOwnPropertyDescriptor","f","toLength","toString","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","un$StartsWith","startsWith","stringSlice","slice","min","Math","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","String","prototype","writable","target","proto","forced","searchString","that","index","arguments","length","search"],"mappings":"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","file":"js/chunk-5802c2aa.a1109cbe.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-card',[(_vm.cardActive)?_c('b-form-input',{attrs:{\"placeholder\":\"Titre\"},model:{value:(_vm.note.title),callback:function ($$v) {_vm.$set(_vm.note, \"title\", $$v)},expression:\"note.title\"}}):_vm._e(),_c('b-form-input',{ref:\"text\",attrs:{\"placeholder\":_vm.text_placeholder},on:{\"click\":function($event){_vm.inputFocus=true},\"blur\":function($event){_vm.inputFocus=false}},model:{value:(_vm.note.text),callback:function ($$v) {_vm.$set(_vm.note, \"text\", $$v)},expression:\"note.text\"}}),(_vm.cardActive)?_c('b-form-input',{attrs:{\"placeholder\":\"Url\"},model:{value:(_vm.note.url),callback:function ($$v) {_vm.$set(_vm.note, \"url\", $$v)},expression:\"note.url\"}}):_vm._e(),(_vm.cardActive)?_c('vue-tags-input',{attrs:{\"tags\":_vm.tags,\"autocomplete-items\":_vm.autocompleteItems},on:{\"tags-changed\":_vm.update},model:{value:(_vm.tag),callback:function ($$v) {_vm.tag=$$v},expression:\"tag\"}}):_vm._e(),(_vm.cardActive)?_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"info\"},on:{\"click\":_vm.add}},[_vm._v(\"Enregistrer\")]):_vm._e(),(_vm.cardActive)?_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"light\"},on:{\"click\":_vm.clean}},[_vm._v(\"Annuler\")]):_vm._e(),(_vm.cardActive)?_c('b-form-checkbox',{attrs:{\"name\":\"check-button\"},model:{value:(_vm.share),callback:function ($$v) {_vm.share=$$v},expression:\"share\"}},[_vm._v(\" Partager sur \"),_c('a',{attrs:{\"href\":\" https://scenaristeur.github.io/booklice?source=https://booklice.solidweb.org/public/bookmarks/\",\"target\":\"_blank\"}},[_vm._v(\"Booklice Pod\")])]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-card>\n      <b-form-input\n      v-if=\"cardActive\"\n      v-model=\"note.title\"\n      placeholder=\"Titre\"\n      ></b-form-input>\n\n      <b-form-input\n      ref=\"text\"\n      v-model=\"note.text\"\n      :placeholder=\"text_placeholder\"\n      @click=\"inputFocus=true\"\n      @blur=\"inputFocus=false\"\n      ></b-form-input>\n\n      <b-form-input\n      v-if=\"cardActive\"\n      v-model=\"note.url\"\n      placeholder=\"Url\"\n      ></b-form-input>\n\n\n      <vue-tags-input\n      v-if=\"cardActive\"\n      v-model=\"tag\"\n      :tags=\"tags\"\n      :autocomplete-items=\"autocompleteItems\"\n      @tags-changed=\"update\"\n      />\n\n\n      <!-- <b-form-input\n      v-if=\"cardActive\"\n      v-model=\"note.tags\"\n      placeholder=\"Tags séparés par une virgule\"\n      ></b-form-input> -->\n\n      <b-button v-if=\"cardActive\" size=\"sm\" variant=\"info\" @click=\"add\">Enregistrer</b-button>\n      <b-button v-if=\"cardActive\" size=\"sm\" variant=\"light\" @click=\"clean\">Annuler</b-button>\n\n      <b-form-checkbox v-model=\"share\" name=\"check-button\" v-if=\"cardActive\">\n        Partager sur\n        <a href=\" https://scenaristeur.github.io/booklice?source=https://booklice.solidweb.org/public/bookmarks/\"\n        target=\"_blank\">Booklice Pod</a>\n      </b-form-checkbox>\n\n    </b-card>\n  </b-container>\n</template>\n\n<script>\nimport _ from 'underscore'\nconst API_URL = 'https://www.wikidata.org/w/api.php?action=wbsearchentities&origin=*&format=json'\n\nexport default {\n  name: 'NewNote',\n  components: {\n    'VueTagsInput': () => import('@johmun/vue-tags-input'),\n  },\n  data(){\n    return{\n      tag: '',\n      tags: [],\n      autocompleteItems: [],\n      debounce: null,\n      note: {title: \"\", text: \"\", url: \"\", tags: \"\"},\n      inputFocus: false,\n      cardActive: false,\n      text_placeholder: \"Créer une note\",\n      share: true,\n      checked1: true,\n    }\n  },\n  created() {\n    this.language = navigator.language.split(\"-\")[0] || 'en'\n    this.initForm(this.$route.query)\n  },\n  methods:{\n    add(){\n      if (this.pod != undefined && this.pod.webId != null){\n        let n = this.note\n        n.share = this.share\n        this.$store.dispatch('booklice/add', n)\n        this.clean()\n      }else{\n        alert(\"Tu devrais te connecter en selectionnant un fournisseur de PODs, pour enregistrer un Booklice sur ton Pod\")\n        let path = \"/?title=\"+this.note.title+\"&text=\"+this.note.text+\"&url=\"+this.note.url+\"&tags=\"+JSON.stringify(this.note.tags)\n        this.$router.push({path: path})\n      }\n    },\n    clean(){\n      this.note = {title: \"\", text: \"\", url: \"\", tags: \"\"}\n      this.currentNote = {title: \"\", text: \"\", url: \"\", tags: \"\"}\n      this.cardActive = false\n      this.text_placeholder= \"Créer une note\"\n      this.tags = []\n    },\n    initForm(q){\n        console.log(\"init\",q)\n      if (q.title != undefined || q.text != undefined || q.url != undefined){\n        let n = {title: q.title || \"\",\n        text: q.text || \"\",\n        url: q.url || \"\",\n        }\n        this.tags = q.tags != undefined ? JSON.parse(q.tags) : \"\"\n        this.cardActive = true\n        if(n.url.length == 0 && n.text.startsWith('http')){\n          n.url = n.text\n          n.text = \"\"\n          this.text_placeholder = \"Ajoutez une description\"\n        }\n        this.note = n\n        console.log(\"note init\",this.note)\n        this.topic == undefined ? this.topic = \"default\" : \"\"\n      }\n    },\n    update(newTags) {\n      this.autocompleteItems = [];\n      this.tags = newTags;\n    },\n    // initItems() {\n    //   if (this.tag.length < 2) return;\n    //   const url = `https://itunes.apple.com/search?term=\n    //   ${this.tag}&entity=allArtist&attribute=allArtistTerm&limit=6`;\n    //\n    //   clearTimeout(this.debounce);\n    //   this.debounce = setTimeout(() => {\n    //     axios.get(url).then(response => {\n    //       this.autocompleteItems = response.data.results.map(a => {\n    //         return { text: a.artistName };\n    //       });\n    //     }).catch(() => console.warn('Oh. Something went wrong'));\n    //   }, 600);\n    // },\n    async getItems(query) {\n      //  this.conceptUri = \"\"\n      if(query.length>0){\n        this.loading = true\n        let search_url = API_URL+\"&language=\"+this.language+\"&search=\"+query\n        console.log(search_url)\n        try{\n          const res = await fetch(search_url)\n          const suggestions = await res.json()\n          console.log(suggestions)\n          this.items = suggestions.search\n          console.log(this.items)\n          this.autocompleteItems = suggestions.search.map(a => {\n            return { text: a.match.text+\" (\"+a.description+\")\", url: a.concepturi };\n          });\n        }catch(e){\n          alert(e)\n        }\n        this.loading = false\n      }\n    },\n  },\n  watch:{\n    'tag': _.debounce(function(item) { this.getItems(item) }, 500),\n    tags(){\n      console.log(this.tags)\n      this.note.tags = this.tags//.map(t => t.text.trim())\n    },\n    '$route' (to) {\n      //  console.log(\"New Note, to\",to)\n      this.initForm(to.query)\n    },\n    inputFocus(){\n      if (this.inputFocus == true){\n        this.cardActive = true\n        this.text_placeholder = \"Note\"\n        this.$refs.text.focus()\n      }\n    },\n    currentNote(){\n      //console.log(\"currentNote\",this.currentNote)\n      this.note = this.currentNote\n      this.tags = this.currentNote.tags//.map(t => {return {text:t}})\n      this.cardActive = true\n      this.$refs.text.focus()\n      //  console.log(this.$refs.text)\n    }\n  },\n  computed:{\n    pod(){\n      return this.$store.state.solid.pod\n    },\n    currentNote:{\n      get() { return this.$store.state.app.currentNote},\n      set(/*note*/) {/*this.$store.commit('booklice/setCurrentNote', note)*/}\n    },\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewNote.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewNote.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewNote.vue?vue&type=template&id=7aa819ea&\"\nimport script from \"./NewNote.vue?vue&type=script&lang=js&\"\nexport * from \"./NewNote.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es/no-string-prototype-startswith -- safe\nvar un$StartsWith = uncurryThis(''.startsWith);\nvar stringSlice = uncurryThis(''.slice);\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = toString(searchString);\n    return un$StartsWith\n      ? un$StartsWith(that, search, index)\n      : stringSlice(that, index, index + search.length) === search;\n  }\n});\n"],"sourceRoot":""}