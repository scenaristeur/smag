(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-601d2674"],{"4fad":function(e,t,n){var r=n("23e7"),a=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return a(e)}})},"6f53":function(e,t,n){var r=n("83ab"),a=n("e330"),i=n("df75"),o=n("fc6a"),l=n("d1e79").f,s=a(l),c=a([].push),u=function(e){return function(t){var n,a=o(t),l=i(a),u=l.length,d=0,m=[];while(u>d)n=l[d++],r&&!s(a,n)||c(m,e?[n,a[n]]:a[n]);return m}};e.exports={entries:u(!0),values:u(!1)}},"857a":function(e,t,n){var r=n("e330"),a=n("1d80"),i=n("577e"),o=/"/g,l=r("".replace);e.exports=function(e,t,n,r){var s=i(a(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+l(i(r),o,"&quot;")+'"'),c+">"+s+"</"+t+">"}},9911:function(e,t,n){"use strict";var r=n("23e7"),a=n("857a"),i=n("af03");r({target:"String",proto:!0,forced:i("link")},{link:function(e){return a(this,"a","href",e)}})},"9f2a":function(e){e.exports=JSON.parse('{"@context":{"@vocab":"https://www.w3.org/ns/activitystreams","as":"https://www.w3.org/ns/activitystreams","ve":"https://scenaristeur.github.io/verse/","@id":"id","@type":"type"},"ve:name":"","ve:age":-1,"ve:properties":[{"name":"ve:wi","values":[],"label":"What is ?","value_type":"text","order":1},{"name":"ve:wsb","values":[],"label":"What should be ?","value_type":"text","order":2},{"name":"ve:proposition","values":[],"label":"Your proposition ","value_type":"longtext","order":3}],"ve:tags":"","type":"tension"}')},af03:function(e,t,n){var r=n("d039");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},c604:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:"newItemModal",size:"lg",title:"Item Edition"},on:{ok:e.handleOk}},[null!=e.item?n("p",{staticClass:"my-4"},[n("b-row",[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"name"}},[e._v("Name:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{id:"name",autocomplete:"off",autofocus:""},model:{value:e.item["ve:name"],callback:function(t){e.$set(e.item,"ve:name",t)},expression:"item['ve:name']"}})],1),n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"age"}},[n("code",[e._v("Age")]),e._v(":")])]),n("b-col",[n("b-form-input",{attrs:{id:"age",required:"",type:"number"},model:{value:e.item["ve:age"],callback:function(t){e.$set(e.item,"ve:age",t)},expression:"item['ve:age']"}})],1)],1),e._l(e.item["ve:properties"],(function(t){return n("b-row",{key:t.name},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"name"}},[n("code",[e._v(e._s(t.label||t.name))]),e._v(":")])]),n("b-col",{attrs:{sm:"9"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(n){return e.showFieldModal(t)}}},[e._v("+")]),n("Values",{attrs:{values:t.values}})],1)],1)})),null!=e.field?n("b-row",{staticClass:"mt-3"},[n("b-col",{attrs:{sm:"3"}},[n("b-form-input",{attrs:{required:"",placeholder:"property name"},on:{change:e.fieldNameChanged},model:{value:e.field.name,callback:function(t){e.$set(e.field,"name",t)},expression:"field.name"}})],1),n("b-col",{attrs:{sm:"9"}},[n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:e.clear_field}},[e._v("X")])],1)],1):n("b-row",[n("b-col"),n("b-col",[n("b-btn",{attrs:{variant:"outline-primary",size:"sm"},on:{click:e.add}},[e._v("+ add a property or a link")])],1)],1),n("b-row",[n("b-col")],1),n("b-modal",{attrs:{id:"fieldModal",size:"xl",title:e.item["ve:name"]+" -> "+e.currentProp.label||e.currentProp.name}},[n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"text",active:""},on:{click:function(t){e.fieldType="text"}}},[n("b-form-input",{attrs:{placeholder:"new value"},on:{change:e.addNewValue},model:{value:e.newvalue,callback:function(t){e.newvalue=t},expression:"newvalue"}})],1),n("b-tab",{attrs:{title:"textarea"},on:{click:function(t){e.fieldType="textarea"}}},[n("b-form-textarea",{attrs:{placeholder:"Enter something...",rows:"3","max-rows":"6"},on:{change:e.addNewValue},model:{value:e.newvalue,callback:function(t){e.newvalue=t},expression:"newvalue"}})],1),n("b-tab",{attrs:{title:"item"},on:{click:function(t){e.fieldType="item"}}},[n("ItemSelector",{attrs:{currentProp:e.currentProp},on:{"update:currentProp":function(t){e.currentProp=t},"update:current-prop":function(t){e.currentProp=t}}})],1),n("b-tab",{attrs:{title:"link"},on:{click:function(t){e.fieldType="link"}}},[n("b-form-input",{attrs:{placeholder:"name"},model:{value:e.link.name,callback:function(t){e.$set(e.link,"name",t)},expression:"link.name"}}),n("b-form-input",{attrs:{placeholder:"link"},on:{change:e.addNewLink},model:{value:e.link.href,callback:function(t){e.$set(e.link,"href",t)},expression:"link.href"}})],1)],1)],1),e._v(" "+e._s(e.item)+" ")],2):e._e()]),n("NewItemButton")],1)},a=[],i=n("1da1"),o=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("c740"),n("b0c0"),n("9911"),n("4fad"),n("9f2a")),l=n.t(o,2),s={name:"NewItem",components:{NewItemButton:function(){return n.e("chunk-39865b7a").then(n.bind(null,"17dc"))},ItemSelector:function(){return n.e("chunk-7dc1b925").then(n.bind(null,"35cf"))},Values:function(){return n.e("chunk-f96af618").then(n.bind(null,"f472"))}},data:function(){return{item:{},currentProp:{},link:{},field:null,clearing:!1,fieldType:"text",show:!1,newvalue:null}},created:function(){},methods:{handleOk:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("save",e.item),e.currentProp={},t.next=4,e.$store.dispatch("local/saveItem",e.item);case 4:return t.next=6,e.$store.dispatch("local/getItems",e.item);case 6:e.$store.commit("app/setCurrentItem",null);case 7:case"end":return t.stop()}}),t)})))()},add:function(){this.field={name:""}},fieldNameChanged:function(e){if(console.log(e),0==this.clearing&&e.length>0){var t={name:e,values:[]};void 0==this.item["ve:properties"]&&(this.item["ve:properties"]=[]);var n=this.item["ve:properties"].findIndex((function(e){return e.name==t.name}));-1===n?this.item["ve:properties"].push(t):alert(t.name+" already exist"),this.field={}}},clear_field:function(){this.clearing=!0,this.field=null,this.clearing=!1},showFieldModal:function(e){console.log(e),this.currentProp=e,this.$bvModal.show("fieldModal")},addNewValue:function(){var e={value:this.newvalue,type:this.fieldType};this.currentProp.values.push(e),this.newvalue=null},addNewLink:function(){var e={value:this.link,type:this.fieldType};this.currentProp.values.push(e),this.link={}}},watch:{currentItem:function(){console.log("schema",l),console.log(this.currentItem),null!=this.currentItem?(0===Object.entries(this.currentItem).length?(this.currentProp={},this.item=Object.assign({},o),console.log("assign",this.item)):this.item=this.currentItem,console.log(this.item),this.$bvModal.show("newItemModal")):this.item=null}},computed:{currentItem:function(){return this.$store.state.app.currentItem}}},c=s,u=n("2877"),d=Object(u["a"])(c,r,a,!1,null,null,null);t["default"]=d.exports},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),o="findIndex",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)}}]);
//# sourceMappingURL=chunk-601d2674.a1a3d569.js.map